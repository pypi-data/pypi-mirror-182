disable_existing_loggers: false
formatters:
  simple:
    datefmt: "%H:%M"
    format: "%(asctime)s | %(message)s"
  detailed:
    datefmt: "%Y-%m-%d %H:%M:%S"
    format: "%(asctime)s %(name)s %(levelname)s %(filename)s:%(lineno)d %(funcName)s %(threadName)s | %(message)s"
  log_server:
    datefmt: "%Y-%m-%d %H:%M:%S"
    format: "%(message)s,"
  log_server_backup:
    datefmt: "%Y-%m-%d %H:%M:%S"
    format: "%(asctime)s %(levelname)s %(hostname)s %(project)s | %(message)s"
  email:
    format: "%(project)s %(levelname)s | %(message)s"
handlers:
  console_handler:
    class: logging.StreamHandler
    formatter: simple
    level: INFO
    stream: ext://sys.stdout
  info_file_handler:
    backupCount: 20
    class: logging.handlers.RotatingFileHandler
    encoding: utf8
    filename: logs/info.log
    formatter: detailed
    level: INFO
    maxBytes: 10485760
  debug_file_handler:
    backupCount: 20
    class: logging.handlers.RotatingFileHandler
    encoding: utf8
    filename: logs/debug.log
    formatter: detailed
    level: DEBUG
    maxBytes: 10485760
  email_handler:
    class: logging.handlers.SMTPHandler
    formatter: email
    fromaddr: rigs@alleninstitute.org
    level: INFO
    mailhost: aicas-1.corp.alleninstitute.org
    subject: np_logging
    toaddrs:
      - yourname@alleninstitute.org
  info_socket_handler:
    class: logging.handlers.SocketHandler
    formatter: log_server
    host: eng-mindscope
    level: INFO
    port: 9000
  socket_backup_file_handler:
    backupCount: 9999
    class: logging.handlers.RotatingFileHandler
    encoding: utf8
    filename: //allen/programs/mindscope/workgroups/np-exp/log_server/eng-mindscope_backup.log
    formatter: log_server_backup
    level: DEBUG
    maxBytes: 10485760
loggers:
  email:
    handlers:
      - email_handler
    level: INFO
    propagate: false
  web:
    handlers:
      - info_socket_handler
      - socket_backup_file_handler
    level: INFO
    propagate: true
root:
  handlers:
    - console_handler
    - info_file_handler
    - debug_file_handler
  level: DEBUG
exit_email_logger: email
version: 1

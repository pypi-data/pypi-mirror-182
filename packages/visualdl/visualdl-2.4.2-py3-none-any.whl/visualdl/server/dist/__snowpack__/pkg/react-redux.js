import{r as s}from"./common/index-655cebff.js";import"./common/index-55e7d60e.js";import"./common/hoist-non-react-statics.cjs-01efe895.js";import"./common/index-87351f60.js";import{r as E}from"./common/index-6f69db2e.js";import"./common/_commonjsHelpers-b3efd043.js";var d=s.createContext(null);function N(e){e()}var y=N,w=function(t){return y=t},B=function(){return y};function L(){var e=B(),t=null,n=null;return{clear:function(){t=null,n=null},notify:function(){e(function(){for(var u=t;u;)u.callback(),u=u.next})},get:function(){for(var u=[],c=t;c;)u.push(c),c=c.next;return u},subscribe:function(u){var c=!0,r=n={callback:u,next:null,prev:n};return r.prev?r.prev.next=r:t=r,function(){!c||t===null||(c=!1,r.next?r.next.prev=r.prev:n=r.prev,r.prev?r.prev.next=r.next:t=r.next)}}}}var g={notify:function(){},get:function(){return[]}};function C(e,t){var n,i=g;function u(b){return f(),i.subscribe(b)}function c(){i.notify()}function r(){a.onStateChange&&a.onStateChange()}function o(){return Boolean(n)}function f(){n||(n=t?t.addNestedSub(r):e.subscribe(r),i=L())}function v(){n&&(n(),n=void 0,i.clear(),i=g)}var a={addNestedSub:u,notifyNestedSubs:c,handleChangeWrapper:r,isSubscribed:o,trySubscribe:f,tryUnsubscribe:v,getListeners:function(){return i}};return a}var S=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined"?s.useLayoutEffect:s.useEffect;function U(e){var t=e.store,n=e.context,i=e.children,u=s.useMemo(function(){var o=C(t);return o.onStateChange=o.notifyNestedSubs,{store:t,subscription:o}},[t]),c=s.useMemo(function(){return t.getState()},[t]);S(function(){var o=u.subscription;return o.trySubscribe(),c!==t.getState()&&o.notifyNestedSubs(),function(){o.tryUnsubscribe(),o.onStateChange=null}},[u,c]);var r=n||d;return s.createElement(r.Provider,{value:u},i)}function R(){var e=s.useContext(d);return e}function j(e){e===void 0&&(e=d);var t=e===d?R:function(){return s.useContext(e)};return function(){var i=t(),u=i.store;return u}}var D=j();function H(e){e===void 0&&(e=d);var t=e===d?D:j(e);return function(){var i=t();return i.dispatch}}var M=H(),V=function(t,n){return t===n};function W(e,t,n,i){var u=s.useReducer(function(l){return l+1},0),c=u[1],r=s.useMemo(function(){return C(n,i)},[n,i]),o=s.useRef(),f=s.useRef(),v=s.useRef(),a=s.useRef(),b=n.getState(),p;try{if(e!==f.current||b!==v.current||o.current){var m=e(b);a.current===void 0||!t(m,a.current)?p=m:p=a.current}else p=a.current}catch(l){throw o.current&&(l.message+=`
The error may be correlated with this previous error:
`+o.current.stack+`

`),l}return S(function(){f.current=e,v.current=b,a.current=p,o.current=void 0}),S(function(){function l(){try{var h=n.getState();if(h===v.current)return;var x=f.current(h);if(t(x,a.current))return;a.current=x,v.current=h}catch(k){o.current=k}c()}return r.onStateChange=l,r.trySubscribe(),l(),function(){return r.tryUnsubscribe()}},[n,r]),p}function $(e){e===void 0&&(e=d);var t=e===d?R:function(){return s.useContext(e)};return function(i,u){u===void 0&&(u=V);var c=t(),r=c.store,o=c.subscription,f=W(i,u,r,o);return s.useDebugValue(f),f}}var P=$();w(E.unstable_batchedUpdates);export{U as Provider,M as useDispatch,P as useSelector};

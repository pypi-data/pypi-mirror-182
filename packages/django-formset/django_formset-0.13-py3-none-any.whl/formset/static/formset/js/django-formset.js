import{a as ut}from"./chunk-Q73546RI.js";import{b as ft}from"./chunk-SNXKFZ2Y.js";import{a as pt}from"./chunk-XXGBPDQQ.js";import{a as $e,b as te}from"./chunk-ON5OQYWL.js";var Ct=$e((bs,At)=>{var Dr="Expected a function",jt="__lodash_hash_undefined__",yt=1/0,Rr="[object Function]",Hr="[object GeneratorFunction]",Or="[object Symbol]",Br=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Nr=/^\w*$/,Vr=/^\./,Gr=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,qr=/[\\^$.*+?()[\]{}|]/g,zr=/\\(\\)?/g,Ur=/^\[object .+?Constructor\]$/,Kr=typeof global=="object"&&global&&global.Object===Object&&global,Jr=typeof self=="object"&&self&&self.Object===Object&&self,Ie=Kr||Jr||Function("return this")();function Xr(t,e){return t==null?void 0:t[e]}function Zr(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var Wr=Array.prototype,Yr=Function.prototype,vt=Object.prototype,Se=Ie["__core-js_shared__"],mt=function(){var t=/[^.]+$/.exec(Se&&Se.keys&&Se.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),xt=Yr.toString,Me=vt.hasOwnProperty,Et=vt.toString,Qr=RegExp("^"+xt.call(Me).replace(qr,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),ht=Ie.Symbol,en=Wr.splice,tn=wt(Ie,"Map"),re=wt(Object,"create"),gt=ht?ht.prototype:void 0,bt=gt?gt.toString:void 0;function R(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function rn(){this.__data__=re?re(null):{}}function nn(t){return this.has(t)&&delete this.__data__[t]}function on(t){var e=this.__data__;if(re){var r=e[t];return r===jt?void 0:r}return Me.call(e,t)?e[t]:void 0}function sn(t){var e=this.__data__;return re?e[t]!==void 0:Me.call(e,t)}function an(t,e){var r=this.__data__;return r[t]=re&&e===void 0?jt:e,this}R.prototype.clear=rn;R.prototype.delete=nn;R.prototype.get=on;R.prototype.has=sn;R.prototype.set=an;function z(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function ln(){this.__data__=[]}function dn(t){var e=this.__data__,r=ce(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():en.call(e,r,1),!0}function cn(t){var e=this.__data__,r=ce(e,t);return r<0?void 0:e[r][1]}function un(t){return ce(this.__data__,t)>-1}function fn(t,e){var r=this.__data__,n=ce(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}z.prototype.clear=ln;z.prototype.delete=dn;z.prototype.get=cn;z.prototype.has=un;z.prototype.set=fn;function H(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function pn(){this.__data__={hash:new R,map:new(tn||z),string:new R}}function mn(t){return ue(this,t).delete(t)}function hn(t){return ue(this,t).get(t)}function gn(t){return ue(this,t).has(t)}function bn(t,e){return ue(this,t).set(t,e),this}H.prototype.clear=pn;H.prototype.delete=mn;H.prototype.get=hn;H.prototype.has=gn;H.prototype.set=bn;function ce(t,e){for(var r=t.length;r--;)if(Tn(t[r][0],e))return r;return-1}function jn(t,e){e=En(e,t)?[e]:xn(e);for(var r=0,n=e.length;t!=null&&r<n;)t=t[An(e[r++])];return r&&r==n?t:void 0}function yn(t){if(!kt(t)||_n(t))return!1;var e=Fn(t)||Zr(t)?Qr:Ur;return e.test(Cn(t))}function vn(t){if(typeof t=="string")return t;if(De(t))return bt?bt.call(t):"";var e=t+"";return e=="0"&&1/t==-yt?"-0":e}function xn(t){return _t(t)?t:kn(t)}function ue(t,e){var r=t.__data__;return wn(e)?r[typeof e=="string"?"string":"hash"]:r.map}function wt(t,e){var r=Xr(t,e);return yn(r)?r:void 0}function En(t,e){if(_t(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||De(t)?!0:Nr.test(t)||!Br.test(t)||e!=null&&t in Object(e)}function wn(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function _n(t){return!!mt&&mt in t}var kn=Pe(function(t){t=$n(t);var e=[];return Vr.test(t)&&e.push(""),t.replace(Gr,function(r,n,o,i){e.push(o?i.replace(zr,"$1"):n||r)}),e});function An(t){if(typeof t=="string"||De(t))return t;var e=t+"";return e=="0"&&1/t==-yt?"-0":e}function Cn(t){if(t!=null){try{return xt.call(t)}catch{}try{return t+""}catch{}}return""}function Pe(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(Dr);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(Pe.Cache||H),r}Pe.Cache=H;function Tn(t,e){return t===e||t!==t&&e!==e}var _t=Array.isArray;function Fn(t){var e=kt(t)?Et.call(t):"";return e==Rr||e==Hr}function kt(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Ln(t){return!!t&&typeof t=="object"}function De(t){return typeof t=="symbol"||Ln(t)&&Et.call(t)==Or}function $n(t){return t==null?"":vn(t)}function Sn(t,e,r){var n=t==null?void 0:jn(t,e);return n===void 0?r:n}At.exports=Sn});var Nt=$e((js,Bt)=>{var In="Expected a function",St="__lodash_hash_undefined__",It=1/0,Mn=9007199254740991,Pn="[object Function]",Dn="[object GeneratorFunction]",Rn="[object Symbol]",Hn=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,On=/^\w*$/,Bn=/^\./,Nn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Vn=/[\\^$.*+?()[\]{}|]/g,Gn=/\\(\\)?/g,qn=/^\[object .+?Constructor\]$/,zn=/^(?:0|[1-9]\d*)$/,Un=typeof global=="object"&&global&&global.Object===Object&&global,Kn=typeof self=="object"&&self&&self.Object===Object&&self,He=Un||Kn||Function("return this")();function Jn(t,e){return t==null?void 0:t[e]}function Xn(t){var e=!1;if(t!=null&&typeof t.toString!="function")try{e=!!(t+"")}catch{}return e}var Zn=Array.prototype,Wn=Function.prototype,Mt=Object.prototype,Re=He["__core-js_shared__"],Tt=function(){var t=/[^.]+$/.exec(Re&&Re.keys&&Re.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Pt=Wn.toString,pe=Mt.hasOwnProperty,Dt=Mt.toString,Yn=RegExp("^"+Pt.call(pe).replace(Vn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ft=He.Symbol,Qn=Zn.splice,ei=Rt(He,"Map"),ne=Rt(Object,"create"),Lt=Ft?Ft.prototype:void 0,$t=Lt?Lt.toString:void 0;function O(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function ti(){this.__data__=ne?ne(null):{}}function ri(t){return this.has(t)&&delete this.__data__[t]}function ni(t){var e=this.__data__;if(ne){var r=e[t];return r===St?void 0:r}return pe.call(e,t)?e[t]:void 0}function ii(t){var e=this.__data__;return ne?e[t]!==void 0:pe.call(e,t)}function oi(t,e){var r=this.__data__;return r[t]=ne&&e===void 0?St:e,this}O.prototype.clear=ti;O.prototype.delete=ri;O.prototype.get=ni;O.prototype.has=ii;O.prototype.set=oi;function U(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function si(){this.__data__=[]}function ai(t){var e=this.__data__,r=me(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Qn.call(e,r,1),!0}function li(t){var e=this.__data__,r=me(e,t);return r<0?void 0:e[r][1]}function di(t){return me(this.__data__,t)>-1}function ci(t,e){var r=this.__data__,n=me(r,t);return n<0?r.push([t,e]):r[n][1]=e,this}U.prototype.clear=si;U.prototype.delete=ai;U.prototype.get=li;U.prototype.has=di;U.prototype.set=ci;function B(t){var e=-1,r=t?t.length:0;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function ui(){this.__data__={hash:new O,map:new(ei||U),string:new O}}function fi(t){return he(this,t).delete(t)}function pi(t){return he(this,t).get(t)}function mi(t){return he(this,t).has(t)}function hi(t,e){return he(this,t).set(t,e),this}B.prototype.clear=ui;B.prototype.delete=fi;B.prototype.get=pi;B.prototype.has=mi;B.prototype.set=hi;function gi(t,e,r){var n=t[e];(!(pe.call(t,e)&&Ht(n,r))||r===void 0&&!(e in t))&&(t[e]=r)}function me(t,e){for(var r=t.length;r--;)if(Ht(t[r][0],e))return r;return-1}function bi(t){if(!fe(t)||_i(t))return!1;var e=Ti(t)||Xn(t)?Yn:qn;return e.test(Ci(t))}function ji(t,e,r,n){if(!fe(t))return t;e=Ei(e,t)?[e]:vi(e);for(var o=-1,i=e.length,a=i-1,p=t;p!=null&&++o<i;){var u=Ai(e[o]),f=r;if(o!=a){var c=p[u];f=n?n(c,u,p):void 0,f===void 0&&(f=fe(c)?c:xi(e[o+1])?[]:{})}gi(p,u,f),p=p[u]}return t}function yi(t){if(typeof t=="string")return t;if(Be(t))return $t?$t.call(t):"";var e=t+"";return e=="0"&&1/t==-It?"-0":e}function vi(t){return Ot(t)?t:ki(t)}function he(t,e){var r=t.__data__;return wi(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Rt(t,e){var r=Jn(t,e);return bi(r)?r:void 0}function xi(t,e){return e=e??Mn,!!e&&(typeof t=="number"||zn.test(t))&&t>-1&&t%1==0&&t<e}function Ei(t,e){if(Ot(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||Be(t)?!0:On.test(t)||!Hn.test(t)||e!=null&&t in Object(e)}function wi(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function _i(t){return!!Tt&&Tt in t}var ki=Oe(function(t){t=Li(t);var e=[];return Bn.test(t)&&e.push(""),t.replace(Nn,function(r,n,o,i){e.push(o?i.replace(Gn,"$1"):n||r)}),e});function Ai(t){if(typeof t=="string"||Be(t))return t;var e=t+"";return e=="0"&&1/t==-It?"-0":e}function Ci(t){if(t!=null){try{return Pt.call(t)}catch{}try{return t+""}catch{}}return""}function Oe(t,e){if(typeof t!="function"||e&&typeof e!="function")throw new TypeError(In);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a),a};return r.cache=new(Oe.Cache||B),r}Oe.Cache=B;function Ht(t,e){return t===e||t!==t&&e!==e}var Ot=Array.isArray;function Ti(t){var e=fe(t)?Dt.call(t):"";return e==Pn||e==Dn}function fe(t){var e=typeof t;return!!t&&(e=="object"||e=="function")}function Fi(t){return!!t&&typeof t=="object"}function Be(t){return typeof t=="symbol"||Fi(t)&&Dt.call(t)==Rn}function Li(t){return t==null?"":yi(t)}function $i(t,e,r){return t==null?t:ji(t,e,r)}Bt.exports=$i});var Er=$e((ie,J)=>{var Si=200,We="__lodash_hash_undefined__",we=1,Qt=2,er=9007199254740991,ge="[object Arguments]",qe="[object Array]",Ii="[object AsyncFunction]",tr="[object Boolean]",rr="[object Date]",nr="[object Error]",ir="[object Function]",Mi="[object GeneratorFunction]",be="[object Map]",or="[object Number]",Pi="[object Null]",K="[object Object]",Vt="[object Promise]",Di="[object Proxy]",sr="[object RegExp]",je="[object Set]",ar="[object String]",Ri="[object Symbol]",Hi="[object Undefined]",ze="[object WeakMap]",lr="[object ArrayBuffer]",ye="[object DataView]",Oi="[object Float32Array]",Bi="[object Float64Array]",Ni="[object Int8Array]",Vi="[object Int16Array]",Gi="[object Int32Array]",qi="[object Uint8Array]",zi="[object Uint8ClampedArray]",Ui="[object Uint16Array]",Ki="[object Uint32Array]",Ji=/[\\^$.*+?()[\]{}|]/g,Xi=/^\[object .+?Constructor\]$/,Zi=/^(?:0|[1-9]\d*)$/,v={};v[Oi]=v[Bi]=v[Ni]=v[Vi]=v[Gi]=v[qi]=v[zi]=v[Ui]=v[Ki]=!0;v[ge]=v[qe]=v[lr]=v[tr]=v[ye]=v[rr]=v[nr]=v[ir]=v[be]=v[or]=v[K]=v[sr]=v[je]=v[ar]=v[ze]=!1;var dr=typeof global=="object"&&global&&global.Object===Object&&global,Wi=typeof self=="object"&&self&&self.Object===Object&&self,$=dr||Wi||Function("return this")(),cr=typeof ie=="object"&&ie&&!ie.nodeType&&ie,Gt=cr&&typeof J=="object"&&J&&!J.nodeType&&J,ur=Gt&&Gt.exports===cr,Ne=ur&&dr.process,qt=function(){try{return Ne&&Ne.binding&&Ne.binding("util")}catch{}}(),zt=qt&&qt.isTypedArray;function Yi(t,e){for(var r=-1,n=t==null?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}function Qi(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function eo(t,e){for(var r=-1,n=t==null?0:t.length;++r<n;)if(e(t[r],r,t))return!0;return!1}function to(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function ro(t){return function(e){return t(e)}}function no(t,e){return t.has(e)}function io(t,e){return t==null?void 0:t[e]}function oo(t){var e=-1,r=Array(t.size);return t.forEach(function(n,o){r[++e]=[o,n]}),r}function so(t,e){return function(r){return t(e(r))}}function ao(t){var e=-1,r=Array(t.size);return t.forEach(function(n){r[++e]=n}),r}var lo=Array.prototype,co=Function.prototype,_e=Object.prototype,Ve=$["__core-js_shared__"],fr=co.toString,F=_e.hasOwnProperty,Ut=function(){var t=/[^.]+$/.exec(Ve&&Ve.keys&&Ve.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),pr=_e.toString,uo=RegExp("^"+fr.call(F).replace(Ji,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Kt=ur?$.Buffer:void 0,ve=$.Symbol,Jt=$.Uint8Array,mr=_e.propertyIsEnumerable,fo=lo.splice,N=ve?ve.toStringTag:void 0,Xt=Object.getOwnPropertySymbols,po=Kt?Kt.isBuffer:void 0,mo=so(Object.keys,Object),Ue=X($,"DataView"),oe=X($,"Map"),Ke=X($,"Promise"),Je=X($,"Set"),Xe=X($,"WeakMap"),se=X(Object,"create"),ho=q(Ue),go=q(oe),bo=q(Ke),jo=q(Je),yo=q(Xe),Zt=ve?ve.prototype:void 0,Ge=Zt?Zt.valueOf:void 0;function V(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function vo(){this.__data__=se?se(null):{},this.size=0}function xo(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function Eo(t){var e=this.__data__;if(se){var r=e[t];return r===We?void 0:r}return F.call(e,t)?e[t]:void 0}function wo(t){var e=this.__data__;return se?e[t]!==void 0:F.call(e,t)}function _o(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=se&&e===void 0?We:e,this}V.prototype.clear=vo;V.prototype.delete=xo;V.prototype.get=Eo;V.prototype.has=wo;V.prototype.set=_o;function S(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function ko(){this.__data__=[],this.size=0}function Ao(t){var e=this.__data__,r=ke(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():fo.call(e,r,1),--this.size,!0}function Co(t){var e=this.__data__,r=ke(e,t);return r<0?void 0:e[r][1]}function To(t){return ke(this.__data__,t)>-1}function Fo(t,e){var r=this.__data__,n=ke(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}S.prototype.clear=ko;S.prototype.delete=Ao;S.prototype.get=Co;S.prototype.has=To;S.prototype.set=Fo;function G(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function Lo(){this.size=0,this.__data__={hash:new V,map:new(oe||S),string:new V}}function $o(t){var e=Ae(this,t).delete(t);return this.size-=e?1:0,e}function So(t){return Ae(this,t).get(t)}function Io(t){return Ae(this,t).has(t)}function Mo(t,e){var r=Ae(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}G.prototype.clear=Lo;G.prototype.delete=$o;G.prototype.get=So;G.prototype.has=Io;G.prototype.set=Mo;function xe(t){var e=-1,r=t==null?0:t.length;for(this.__data__=new G;++e<r;)this.add(t[e])}function Po(t){return this.__data__.set(t,We),this}function Do(t){return this.__data__.has(t)}xe.prototype.add=xe.prototype.push=Po;xe.prototype.has=Do;function D(t){var e=this.__data__=new S(t);this.size=e.size}function Ro(){this.__data__=new S,this.size=0}function Ho(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function Oo(t){return this.__data__.get(t)}function Bo(t){return this.__data__.has(t)}function No(t,e){var r=this.__data__;if(r instanceof S){var n=r.__data__;if(!oe||n.length<Si-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new G(n)}return r.set(t,e),this.size=r.size,this}D.prototype.clear=Ro;D.prototype.delete=Ho;D.prototype.get=Oo;D.prototype.has=Bo;D.prototype.set=No;function Vo(t,e){var r=Ee(t),n=!r&&ns(t),o=!r&&!n&&Ze(t),i=!r&&!n&&!o&&xr(t),a=r||n||o||i,p=a?to(t.length,String):[],u=p.length;for(var f in t)(e||F.call(t,f))&&!(a&&(f=="length"||o&&(f=="offset"||f=="parent")||i&&(f=="buffer"||f=="byteLength"||f=="byteOffset")||Yo(f,u)))&&p.push(f);return p}function ke(t,e){for(var r=t.length;r--;)if(br(t[r][0],e))return r;return-1}function Go(t,e,r){var n=e(t);return Ee(t)?n:Qi(n,r(t))}function le(t){return t==null?t===void 0?Hi:Pi:N&&N in Object(t)?Zo(t):rs(t)}function Wt(t){return ae(t)&&le(t)==ge}function hr(t,e,r,n,o){return t===e?!0:t==null||e==null||!ae(t)&&!ae(e)?t!==t&&e!==e:qo(t,e,r,n,hr,o)}function qo(t,e,r,n,o,i){var a=Ee(t),p=Ee(e),u=a?qe:P(t),f=p?qe:P(e);u=u==ge?K:u,f=f==ge?K:f;var c=u==K,h=f==K,j=u==f;if(j&&Ze(t)){if(!Ze(e))return!1;a=!0,c=!1}if(j&&!c)return i||(i=new D),a||xr(t)?gr(t,e,r,n,o,i):Jo(t,e,u,r,n,o,i);if(!(r&we)){var x=c&&F.call(t,"__wrapped__"),w=h&&F.call(e,"__wrapped__");if(x||w){var A=x?t.value():t,C=w?e.value():e;return i||(i=new D),o(A,C,r,n,i)}}return j?(i||(i=new D),Xo(t,e,r,n,o,i)):!1}function zo(t){if(!vr(t)||es(t))return!1;var e=jr(t)?uo:Xi;return e.test(q(t))}function Uo(t){return ae(t)&&yr(t.length)&&!!v[le(t)]}function Ko(t){if(!ts(t))return mo(t);var e=[];for(var r in Object(t))F.call(t,r)&&r!="constructor"&&e.push(r);return e}function gr(t,e,r,n,o,i){var a=r&we,p=t.length,u=e.length;if(p!=u&&!(a&&u>p))return!1;var f=i.get(t);if(f&&i.get(e))return f==e;var c=-1,h=!0,j=r&Qt?new xe:void 0;for(i.set(t,e),i.set(e,t);++c<p;){var x=t[c],w=e[c];if(n)var A=a?n(w,x,c,e,t,i):n(x,w,c,t,e,i);if(A!==void 0){if(A)continue;h=!1;break}if(j){if(!eo(e,function(C,M){if(!no(j,M)&&(x===C||o(x,C,r,n,i)))return j.push(M)})){h=!1;break}}else if(!(x===w||o(x,w,r,n,i))){h=!1;break}}return i.delete(t),i.delete(e),h}function Jo(t,e,r,n,o,i,a){switch(r){case ye:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case lr:return!(t.byteLength!=e.byteLength||!i(new Jt(t),new Jt(e)));case tr:case rr:case or:return br(+t,+e);case nr:return t.name==e.name&&t.message==e.message;case sr:case ar:return t==e+"";case be:var p=oo;case je:var u=n&we;if(p||(p=ao),t.size!=e.size&&!u)return!1;var f=a.get(t);if(f)return f==e;n|=Qt,a.set(t,e);var c=gr(p(t),p(e),n,o,i,a);return a.delete(t),c;case Ri:if(Ge)return Ge.call(t)==Ge.call(e)}return!1}function Xo(t,e,r,n,o,i){var a=r&we,p=Yt(t),u=p.length,f=Yt(e),c=f.length;if(u!=c&&!a)return!1;for(var h=u;h--;){var j=p[h];if(!(a?j in e:F.call(e,j)))return!1}var x=i.get(t);if(x&&i.get(e))return x==e;var w=!0;i.set(t,e),i.set(e,t);for(var A=a;++h<u;){j=p[h];var C=t[j],M=e[j];if(n)var Le=a?n(M,C,j,e,t,i):n(C,M,j,t,e,i);if(!(Le===void 0?C===M||o(C,M,r,n,i):Le)){w=!1;break}A||(A=j=="constructor")}if(w&&!A){var m=t.constructor,_=e.constructor;m!=_&&"constructor"in t&&"constructor"in e&&!(typeof m=="function"&&m instanceof m&&typeof _=="function"&&_ instanceof _)&&(w=!1)}return i.delete(t),i.delete(e),w}function Yt(t){return Go(t,ss,Wo)}function Ae(t,e){var r=t.__data__;return Qo(e)?r[typeof e=="string"?"string":"hash"]:r.map}function X(t,e){var r=io(t,e);return zo(r)?r:void 0}function Zo(t){var e=F.call(t,N),r=t[N];try{t[N]=void 0;var n=!0}catch{}var o=pr.call(t);return n&&(e?t[N]=r:delete t[N]),o}var Wo=Xt?function(t){return t==null?[]:(t=Object(t),Yi(Xt(t),function(e){return mr.call(t,e)}))}:as,P=le;(Ue&&P(new Ue(new ArrayBuffer(1)))!=ye||oe&&P(new oe)!=be||Ke&&P(Ke.resolve())!=Vt||Je&&P(new Je)!=je||Xe&&P(new Xe)!=ze)&&(P=function(t){var e=le(t),r=e==K?t.constructor:void 0,n=r?q(r):"";if(n)switch(n){case ho:return ye;case go:return be;case bo:return Vt;case jo:return je;case yo:return ze}return e});function Yo(t,e){return e=e??er,!!e&&(typeof t=="number"||Zi.test(t))&&t>-1&&t%1==0&&t<e}function Qo(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function es(t){return!!Ut&&Ut in t}function ts(t){var e=t&&t.constructor,r=typeof e=="function"&&e.prototype||_e;return t===r}function rs(t){return pr.call(t)}function q(t){if(t!=null){try{return fr.call(t)}catch{}try{return t+""}catch{}}return""}function br(t,e){return t===e||t!==t&&e!==e}var ns=Wt(function(){return arguments}())?Wt:function(t){return ae(t)&&F.call(t,"callee")&&!mr.call(t,"callee")},Ee=Array.isArray;function is(t){return t!=null&&yr(t.length)&&!jr(t)}var Ze=po||ls;function os(t,e){return hr(t,e)}function jr(t){if(!vr(t))return!1;var e=le(t);return e==ir||e==Mi||e==Ii||e==Di}function yr(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=er}function vr(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function ae(t){return t!=null&&typeof t=="object"}var xr=zt?ro(zt):Uo;function ss(t){return is(t)?Vo(t):Ko(t)}function as(){return[]}function ls(){return!1}J.exports=os});var Y=te(Ct()),Fr=te(Nt()),Lr=te(Er()),$r=te(ut());var wr=te(ut()),Ce=class{constructor(e,r){this.progressBar=null;this.fileDrop=e=>{this.swallowEvent(e),e.dataTransfer&&(this.fieldGroup.touch(),this.inputElement.files=e.dataTransfer.files,this.uploadFiles(this.inputElement.files).then(()=>{this.fieldGroup.inputted(),this.fieldGroup.validate()}))};this.fileRemove=()=>{for(this.inputElement.value="",this.uploadedFiles=this.initialData.length>0?[{}]:[];this.dropbox.firstChild;)this.dropbox.removeChild(this.dropbox.firstChild);this.dropbox.appendChild(this.emptyDropboxItem),this.fieldGroup.touch(),this.fieldGroup.inputted(),this.fieldGroup.validate()};this.swallowEvent=e=>{e.stopPropagation(),e.preventDefault()};if(this.fieldGroup=e,this.inputElement=r,this.dropbox=this.fieldGroup.element.querySelector("figure.dj-dropbox"),!this.dropbox)throw new Error('Element <input type="file"> requires sibling element <figure class="dj-dropbox"></figure>');if(this.chooseFileButton=this.fieldGroup.element.querySelector("button.dj-choose-file"),!this.chooseFileButton)throw new Error('Element <input type="file"> requires sibling element <button class="dj-choose-file"></button>');if(this.progressBar=this.fieldGroup.element.querySelector("progress"),this.progressBar&&(this.progressBar.style.visibility="hidden"),this.emptyDropboxItem=this.dropbox.querySelector("div.dj-empty-item"),!this.emptyDropboxItem)throw new Error('Element <input type="file"> requires sibling element <figure><div class="dj-empty-item"></div></figure>');let n=this.fieldGroup.element.querySelector(".dj-dropbox-items");if(!n)throw new Error('Element <input type="file"> requires sibling element <template class="dj-dropbox-items"></template>');this.dropboxItemTemplate=(0,wr.default)(n.innerHTML),this.observer=new MutationObserver(i=>this.attributesChanged(i)),this.observer.observe(this.inputElement,{attributes:!0}),this.chooseFileButton.disabled=r.disabled;let o=document.getElementById(`initial_${r.id}`);o!=null&&o.textContent?(this.uploadedFiles=this.initialData=[JSON.parse(o.textContent)],this.renderDropbox()):this.uploadedFiles=this.initialData=[],this.dropbox.addEventListener("dragenter",this.swallowEvent),this.dropbox.addEventListener("dragover",this.swallowEvent),this.dropbox.addEventListener("drop",this.fileDrop),this.chooseFileButton.addEventListener("click",()=>{r.click()}),r.addEventListener("change",()=>this.uploadFiles(this.inputElement.files).then(()=>{this.fieldGroup.inputted(),this.fieldGroup.validate()}).catch(()=>{this.fieldGroup.reportFailedUpload()}).finally(()=>{this.chooseFileButton.blur(),this.fieldGroup.touch()}))}async uploadFiles(e){return!e||e.length===0?Promise.reject():new Promise((r,n)=>{let o=e.item(0);o?this.uploadFile(o,this.dropbox.clientHeight).then(i=>{this.uploadedFiles=[i],this.renderDropbox(),this.fieldGroup.inputted(),r()}).catch(()=>{n()}):n()})}async uploadFile(e,r){let n=this;function o(a){let p=a.lengthComputable?a.loaded/a.total:0;n.progressBar&&(n.progressBar.style.visibility="visible",n.progressBar.value=.97*p)}let i=new FormData;return i.append("temp_file",e),i.append("image_height",r.toString()),new Promise((a,p)=>{function u(){n.progressBar&&(n.progressBar.value=1,window.setTimeout(()=>n.progressBar.style.visibility="hidden",333)),f.status===200?a(f.response):p(f.response)}let f=new XMLHttpRequest;n.progressBar&&(f.addEventListener("loadstart",o),f.upload.addEventListener("progress",o,!1)),f.addEventListener("loadend",u),f.open("POST",this.fieldGroup.form.formset.endpoint,!0);let c=this.fieldGroup.form.formset.CSRFToken;c&&f.setRequestHeader("X-CSRFToken",c),f.responseType="json",f.send(i)})}renderDropbox(){let e=[];for(let n of this.uploadedFiles)e.push(this.dropboxItemTemplate(n));e.length>0?this.dropbox.innerHTML=e.join(""):this.dropbox.replaceChildren(this.emptyDropboxItem);let r=this.dropbox.querySelector(".dj-delete-file");r&&r.addEventListener("click",this.fileRemove,{once:!0})}attributesChanged(e){for(let r of e)r.type==="attributes"&&r.attributeName==="disabled"&&this.chooseFileButton.disabled!=this.inputElement.disabled&&(this.chooseFileButton.disabled=this.inputElement.disabled)}inProgress(){return!!this.inputElement.files&&this.inputElement.files.length>0&&!this.uploadedFiles.length}resetToInitial(){this.uploadedFiles=this.initialData,this.renderDropbox()}};function Ye(t,e,r){return r=r||" ",t.length>e?t:(e-=t.length,r+=r.repeat(e),t+r.slice(0,e))}var I=class extends Error{constructor(r,n,o,i){super();this.message=r,this.expected=n,this.found=o,this.location=i,this.name="SyntaxError",typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(this,I.prototype):this.__proto__=I.prototype,typeof Error.captureStackTrace=="function"&&Error.captureStackTrace(this,I)}static buildMessage(r,n){function o(c){return c.charCodeAt(0).toString(16).toUpperCase()}function i(c){return c.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,h=>"\\x0"+o(h)).replace(/[\x10-\x1F\x7F-\x9F]/g,h=>"\\x"+o(h))}function a(c){return c.replace(/\\/g,"\\\\").replace(/\]/g,"\\]").replace(/\^/g,"\\^").replace(/-/g,"\\-").replace(/\0/g,"\\0").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\x00-\x0F]/g,h=>"\\x0"+o(h)).replace(/[\x10-\x1F\x7F-\x9F]/g,h=>"\\x"+o(h))}function p(c){switch(c.type){case"literal":return'"'+i(c.text)+'"';case"class":let h=c.parts.map(j=>Array.isArray(j)?a(j[0])+"-"+a(j[1]):a(j));return"["+(c.inverted?"^":"")+h+"]";case"any":return"any character";case"end":return"end of input";case"other":return c.description}}function u(c){let h=c.map(p),j,x;if(h.sort(),h.length>0){for(j=1,x=1;j<h.length;j++)h[j-1]!==h[j]&&(h[x]=h[j],x++);h.length=x}switch(h.length){case 1:return h[0];case 2:return h[0]+" or "+h[1];default:return h.slice(0,-1).join(", ")+", or "+h[h.length-1]}}function f(c){return c?'"'+i(c)+'"':"end of input"}return"Expected "+u(r)+" but "+f(n)+" found."}format(r){let n="Error: "+this.message;if(this.location){let o=null,i;for(i=0;i<r.length;i++)if(r[i].source===this.location.source){o=r[i].text.split(/\r\n|\n|\r/g);break}let a=this.location.start,p=this.location.source+":"+a.line+":"+a.column;if(o){let u=this.location.end,f=Ye("",a.line.toString().length," "),c=o[a.line-1],h=a.line===u.line?u.column:c.length+1;n+=`
 --> `+p+`
`+f+` |
`+a.line+" | "+c+`
`+f+" | "+Ye("",a.column-1," ")+Ye("",h-a.column,"^")}else n+=`
 at `+p}return n}};function ds(t,e){e=e!==void 0?e:{};let r={},n=e.grammarSource,o={Actions:5,Expression:0},i=5,a=[function(d,l){return l.reduce(function(s,E){return s+E[1]+E[3]},d)},function(){return"false"},"===",m("===",!1),"==",m("==",!1),"!==",m("!==",!1),"!=",m("!=",!1),"<=",m("<=",!1),">=",m(">=",!1),"<",m("<",!1),">",m(">",!1),"+",m("+",!1),"-",m("-",!1),"*",m("*",!1),"/",m("/",!1),"&&",m("&&",!1),"&",m("&",!1),"||",m("||",!1),"|",m("|",!1),"!",m("!",!1),"(",m("(",!1),")",m(")",!1),function(d){return"("+d+")"},function(d){return"'"+d+"'"},function(d){return"this.getDataValue(["+d.split(".").map(s=>"'"+s+"'").join(",")+"])"},"!~",m("!~",!1),function(d,l){return{successChain:d,rejectChain:l}},function(d){return{successChain:d,rejectChain:[]}},"->",m("->",!1),function(d,l){return[d].concat(l)},function(d){return[d]},function(d,l){return{funcname:d,args:l}},"()",m("()",!1),function(d){return{funcname:d,args:[]}},",",m(",",!1),function(d){return[d]},/^[ \t\n\r]/,_([" ","	",`
`,"\r"],!1,!1),"[",m("[",!1),"{",m("{",!1),"]",m("]",!1),"}",m("}",!1),":",m(":",!1),function(d,l){return l},function(d,l){var s={};return[d].concat(l).forEach(function(E){s[E.name]=E.value}),s},function(d){return d!==null?d:{}},function(d,l){return{name:d,value:l}},/^[$A-Za-z_]/,_(["$",["A","Z"],["a","z"],"_"],!1,!1),/^[$0-9A-Za-z_]/,_(["$",["0","9"],["A","Z"],["a","z"],"_"],!1,!1),function(d,l){return l},function(d,l){return[d].concat(l)},function(d){return d!==null?d:[]},de("number"),function(){return parseFloat(A())},".",m(".",!1),/^[1-9]/,_([["1","9"]],!1,!1),/^[eE]/,_(["e","E"],!1,!1),"0",m("0",!1),de("string"),'"',m('"',!1),function(d){return d},"'",m("'",!1),/^[^\0-\x1F"\\]/,_([["\0",""],'"',"\\"],!0,!1),'\\"',m('\\"',!1),function(){return'"'},/^[^\0-\x1F'\\]/,_([["\0",""],"'","\\"],!0,!1),"\\'",m("\\'",!1),function(){return"'"},"\\\\",m("\\\\",!1),"\\b",m("\\b",!1),"\\f",m("\\f",!1),"\\n",m("\\n",!1),"\\r",m("\\r",!1),"\\t",m("\\t",!1),"\\u",m("\\u",!1),function(d){return String.fromCharCode(parseInt(d,16))},de("boolean"),function(){return!0},function(){return!1},function(){return null},"false",m("false",!1),"true",m("true",!1),"null",m("null",!1),function(d,l){return l.reduce(function(s,E){return s+"."+E[1]},d)},"...",m("...",!1),"..",m("..",!1),function(d,l){return d+l},function(d,l){return d+l},/^[$a-zA-Z_]/,_(["$",["a","z"],["A","Z"],"_"],!1,!1),/^[$a-zA-Z0-9_]/,_(["$",["a","z"],["A","Z"],["0","9"],"_"],!1,!1),function(d){return d instanceof Array?d.join(""):d},/^[0-9]/,_([["0","9"]],!1,!1),/^[0-9a-f]/i,_([["0","9"],["a","f"]],!1,!0)],p=[g(`%;*/\x9E#;#/\x95$;*/\x8C$$%;*/>#;!/5$;*/,$; /#$+$)($'#(#'#("'#&'#0H*%;*/>#;!/5$;*/,$; /#$+$)($'#(#'#("'#&'#&/2$;*/)$8%: %"#!)(%'#($'#(#'#("'#&'#.. &%;*/& 8!:!! )`),g(`2"""6"7#.\xD1 &2$""6$7%.\xC5 &2&""6&7'.\xB9 &2(""6(7).\xAD &2*""6*7+.\xA1 &2,""6,7-.\x95 &2.""6.7/.\x89 &20""6071.} &22""6273.q &24""6475.e &26""6677.Y &28""6879.M &2:""6:7;.A &2<""6<7=.5 &2>""6>7?.) &2@""6@7A`),g('2B""6B7C'),g(`%2D""6D7E/R#;*/I$; /@$;*/7$2F""6F7G/($8%:H%!")(%'#($'#(#'#("'#&'#.A &;6.; &;D.5 &;$./ &%;@/' 8!:I!! )`),g("%;H/' 8!:J!! )"),g(`%;&/\\#;*/S$2K""6K7L/D$;*/;$;&/2$;*/)$8&:M&"%!)(&'#(%'#($'#(#'#("'#&'#./ &%;&/' 8!:N!! )`),g(`%;'/\\#;*/S$2O""6O7P/D$;*/;$;&/2$;*/)$8&:Q&"%!)(&'#(%'#($'#(#'#("'#&'#./ &%;'/' 8!:R!! )`),g(`%;*/i#%;4/"!&,)/Y$2D""6D7E/J$;(/A$2F""6F7G/2$;*/)$8&:S&"$")(&'#(%'#($'#(#'#("'#&'#.a &%%;4/"!&,)/7#2T""6T7U/($8":V"!!)("'#&'#.6 &%%;4/"!&,)/' 8!:V!! )`),g(`%;)/S#;*/J$2W""6W7X/;$;*/2$;(/)$8%:Q%"$ )(%'#($'#(#'#("'#&'#./ &%;)/' 8!:Y!! )`),g(";6./ &;@.) &;2.# &;5"),g('$4Z""5!7[0)*4Z""5!7[&'),g(`%;*/;#2\\""6\\7]/,$;*/#$+#)(#'#("'#&'#`),g(`%;*/;#2^""6^7_/,$;*/#$+#)(#'#("'#&'#`),g(`%;*/;#2\`""6\`7a/,$;*/#$+#)(#'#("'#&'#`),g(`%;*/;#2b""6b7c/,$;*/#$+#)(#'#("'#&'#`),g(`%;*/;#2d""6d7e/,$;*/#$+#)(#'#("'#&'#`),g(`%;*/;#2W""6W7X/,$;*/#$+#)(#'#("'#&'#`),g(";D.5 &;2./ &;5.) &;6.# &;@"),g(`%;,/\x91#%;3/k#$%;0/2#;3/)$8":f""$ )("'#&'#0<*%;0/2#;3/)$8":f""$ )("'#&'#&/)$8":g""! )("'#&'#." &"/1$;./($8#:h#!!)(#'#("'#&'#`),g(`%;@/;#;//2$;1/)$8#:i#"" )(#'#("'#&'#.L &%%;4/"!&,)/;#;//2$;1/)$8#:i#"" )(#'#("'#&'#`),g(`%4j""5!7k/?#$4l""5!7m0)*4l""5!7m&/#$+")("'#&'#`),g(`%;+/\x91#%;1/k#$%;0/2#;1/)$8":n""$ )("'#&'#0<*%;0/2#;1/)$8":n""$ )("'#&'#&/)$8":o""! )("'#&'#." &"/1$;-/($8#:p#!!)(#'#("'#&'#`),g(`<%;=." &"/L#;</C$;;." &"/5$;:." &"/'$8$:r$ )($'#(#'#("'#&'#=." 7q`),g('2s""6s7t'),g('4u""5!7v'),g('4w""5!7x'),g(`%;9/M#;=.# &;>." &"/9$$;M/&#0#*;M&&&#/#$+#)(#'#("'#&'#`),g(`%;7/9#$;M/&#0#*;M&&&#/#$+")("'#&'#`),g(`;?.= &%;8/3#$;M0#*;M&/#$+")("'#&'#`),g('24""6475'),g('22""6273'),g('2y""6y7z'),g(`<%2|""6|7}/N#%$;A0#*;A&/"!&,)/7$2|""6|7}/($8#:~#!!)(#'#("'#&'#.^ &%2\x7F""6\x7F7\x80/N#%$;B0#*;B&/"!&,)/7$2\x7F""6\x7F7\x80/($8#:~#!!)(#'#("'#&'#=." 7{`),g('4\x81""5!7\x82.: &%2\x83""6\x837\x84/& 8!:\x85! ).# &;C'),g('4\x86""5!7\x87.: &%2\x88""6\x887\x89/& 8!:\x8A! ).# &;C'),g(`2\x8B""6\x8B7\x8C.\xA9 &2\x8D""6\x8D7\x8E.\x9D &2\x8F""6\x8F7\x90.\x91 &2\x91""6\x917\x92.\x85 &2\x93""6\x937\x94.y &2\x95""6\x957\x96.m &%2\x97""6\x977\x98/]#%%;N/>#;N/5$;N/,$;N/#$+$)($'#(#'#("'#&'#/"!&,)/($8":\x99"! )("'#&'#`),g('<%;F/& 8!:\x9B! ).? &%;E/& 8!:\x9C! ).. &%;G/& 8!:\x9D! )=." 7\x9A'),g('2\x9E""6\x9E7\x9F'),g('2\xA0""6\xA07\xA1'),g('2\xA2""6\xA27\xA3'),g(`%;I/\x91#$%2s""6s7t/?#;J.0 &$;M/&#0#*;M&&&#/#$+")("'#&'#0O*%2s""6s7t/?#;J.0 &$;M/&#0#*;M&&&#/#$+")("'#&'#&/)$8":\xA4""! )("'#&'#`),g(`%2\xA5""6\xA57\xA6.5 &2\xA7""6\xA77\xA8.) &2s""6s7t/2#;J/)$8":\xA9""! )("'#&'#.# &;J`),g(`%;K/2#;L/)$8":\xAA""! )("'#&'#`),g('4\xAB""5!7\xAC'),g(`%$4\xAD""5!7\xAE0)*4\xAD""5!7\xAE&/' 8!:\xAF!! )`),g('4\xB0""5!7\xB1'),g('4\xB2""5!7\xB3')],u=0,f=0,c=[{line:1,column:1}],h=0,j=[],x=0,w;if(e.startRule!==void 0){if(!(e.startRule in o))throw new Error(`Can't start parsing from rule "`+e.startRule+'".');i=o[e.startRule]}function A(){return t.substring(f,u)}function C(){return ee(f,u)}function M(d,l){throw l=l!==void 0?l:ee(f,u),lt([de(d)],t.substring(f,u),l)}function Le(d,l){throw l=l!==void 0?l:ee(f,u),Mr(d,l)}function m(d,l){return{type:"literal",text:d,ignoreCase:l}}function _(d,l,s){return{type:"class",parts:d,inverted:l,ignoreCase:s}}function gs(){return{type:"any"}}function Ir(){return{type:"end"}}function de(d){return{type:"other",description:d}}function st(d){let l=c[d],s;if(l)return l;for(s=d-1;!c[s];)s--;for(l=c[s],l={line:l.line,column:l.column};s<d;)t.charCodeAt(s)===10?(l.line++,l.column=1):l.column++,s++;return c[d]=l,l}function ee(d,l){let s=st(d),E=st(l);return{source:n,start:{offset:d,line:s.line,column:s.column},end:{offset:l,line:E.line,column:E.column}}}function at(d){u<h||(u>h&&(h=u,j=[]),j.push(d))}function Mr(d,l){return new I(d,[],"",l)}function lt(d,l,s){return new I(I.buildMessage(d,l),d,l,s)}function g(d){return d.split("").map(l=>l.charCodeAt(0)-32)}function dt(d){let l=p[d],s=0,E=[],y=l.length,T=[],b=[],ct;for(;;){for(;s<y;)switch(l[s]){case 0:b.push(a[l[s+1]]),s+=2;break;case 1:b.push(void 0),s++;break;case 2:b.push(null),s++;break;case 3:b.push(r),s++;break;case 4:b.push([]),s++;break;case 5:b.push(u),s++;break;case 6:b.pop(),s++;break;case 7:u=b.pop(),s++;break;case 8:b.length-=l[s+1],s+=2;break;case 9:b.splice(-2,1),s++;break;case 10:b[b.length-2].push(b.pop()),s++;break;case 11:b.push(b.splice(b.length-l[s+1],l[s+1])),s+=2;break;case 12:b.push(t.substring(b.pop(),u)),s++;break;case 13:T.push(y),E.push(s+3+l[s+1]+l[s+2]),b[b.length-1]?(y=s+3+l[s+1],s+=3):(y=s+3+l[s+1]+l[s+2],s+=3+l[s+1]);break;case 14:T.push(y),E.push(s+3+l[s+1]+l[s+2]),b[b.length-1]===r?(y=s+3+l[s+1],s+=3):(y=s+3+l[s+1]+l[s+2],s+=3+l[s+1]);break;case 15:T.push(y),E.push(s+3+l[s+1]+l[s+2]),b[b.length-1]!==r?(y=s+3+l[s+1],s+=3):(y=s+3+l[s+1]+l[s+2],s+=3+l[s+1]);break;case 16:b[b.length-1]!==r?(T.push(y),E.push(s),y=s+2+l[s+1],s+=2):s+=2+l[s+1];break;case 17:T.push(y),E.push(s+3+l[s+1]+l[s+2]),t.length>u?(y=s+3+l[s+1],s+=3):(y=s+3+l[s+1]+l[s+2],s+=3+l[s+1]);break;case 18:T.push(y),E.push(s+4+l[s+2]+l[s+3]),t.substr(u,a[l[s+1]].length)===a[l[s+1]]?(y=s+4+l[s+2],s+=4):(y=s+4+l[s+2]+l[s+3],s+=4+l[s+2]);break;case 19:T.push(y),E.push(s+4+l[s+2]+l[s+3]),t.substr(u,a[l[s+1]].length).toLowerCase()===a[l[s+1]]?(y=s+4+l[s+2],s+=4):(y=s+4+l[s+2]+l[s+3],s+=4+l[s+2]);break;case 20:T.push(y),E.push(s+4+l[s+2]+l[s+3]),a[l[s+1]].test(t.charAt(u))?(y=s+4+l[s+2],s+=4):(y=s+4+l[s+2]+l[s+3],s+=4+l[s+2]);break;case 21:b.push(t.substr(u,l[s+1])),u+=l[s+1],s+=2;break;case 22:b.push(a[l[s+1]]),u+=a[l[s+1]].length,s+=2;break;case 23:b.push(r),x===0&&at(a[l[s+1]]),s+=2;break;case 24:f=b[b.length-1-l[s+1]],s+=2;break;case 25:f=u,s++;break;case 26:ct=l.slice(s+4,s+4+l[s+3]).map(function(Pr){return b[b.length-1-Pr]}),b.splice(b.length-l[s+2],l[s+2],a[l[s+1]].apply(null,ct)),s+=4+l[s+3];break;case 27:b.push(dt(l[s+1])),s+=2;break;case 28:x++,s++;break;case 29:x--,s++;break;default:throw new Error("Invalid opcode: "+l[s]+".")}if(T.length>0)y=T.pop(),s=E.pop();else break}return b[0]}if(w=dt(i),w!==r&&u===t.length)return w;throw w!==r&&u<t.length&&at(Ir()),lt(j,h<t.length?t.charAt(h):null,h<t.length?ee(h,h+1):ee(h,h))}var Z=ds;var _r=`select::placeholder{color:gray}select.ts-hidden-accessible{display:none}django-formset{--django-formset-color-invalid: rgb(255, 3, 0);--django-formset-shadow-invalid: rgb(255, 3, 0, 0.25);--django-formset-color-valid: rgb(0, 122, 0);--django-formset-icon-invalid: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="rgb(255, 3, 0)"><path fill-rule="evenodd" d="M8 15A7 7 0 1 0 8 1a7 7 0 0 0 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"/><path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"/></svg>');--django-formset-icon-warning: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="rgb(255, 165, 0)"><path fill-rule="evenodd" d="M7.938 2.016a.146.146 0 0 0-.054.057L1.027 13.74a.176.176 0 0 0-.002.183c.016.03.037.05.054.06.015.01.034.017.066.017h13.713a.12.12 0 0 0 .066-.017.163.163 0 0 0 .055-.06.176.176 0 0 0-.003-.183L8.12 2.073a.146.146 0 0 0-.054-.057A.13.13 0 0 0 8.002 2a.13.13 0 0 0-.064.016zm1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767L8.982 1.566z"/><path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 5.995z"/></svg>');--django-formset-icon-valid: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 18 16" fill="rgb(0, 122, 0)"><path fill-rule="evenodd" d="M10.97 4.97a.75.75 0 0 1 1.071 1.05l-3.992 4.99a.75.75 0 0 1-1.08.02L4.324 8.384a.75.75 0 1 1 1.06-1.06l2.094 2.093 3.473-4.425a.236.236 0 0 1 .02-.022z"/></svg>')}django-formset .dj-errorlist{list-style:none;margin-top:0;margin-bottom:0;margin-left:0;padding-left:0;color:var(--django-formset-color-invalid)}django-formset.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted)>input[type=email]:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted)>input[type=text]:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted)>input[type=number]:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted)>input[type=date]:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted)>input[type=url]:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted)>input[type=password]:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted)>select:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-errors django-field-group.dj-touched:not(.dj-submitted)>textarea:not(.dj-exempt-feedback):invalid:not(:focus){border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset.dj-feedback-warnings django-field-group.dj-dirty:not(.dj-submitted)>input[type=email]:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings django-field-group.dj-dirty:not(.dj-submitted)>input[type=text]:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings django-field-group.dj-dirty:not(.dj-submitted)>input[type=number]:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings django-field-group.dj-dirty:not(.dj-submitted)>input[type=date]:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings django-field-group.dj-dirty:not(.dj-submitted)>input[type=url]:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings django-field-group.dj-dirty:not(.dj-submitted)>input[type=password]:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings django-field-group.dj-dirty:not(.dj-submitted)>select:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings django-field-group.dj-dirty:not(.dj-submitted)>textarea:not(.dj-exempt-feedback):invalid:focus{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) django-field-group.dj-dirty:not(.dj-submitted)>input[type=email]:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) django-field-group.dj-dirty:not(.dj-submitted)>input[type=text]:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) django-field-group.dj-dirty:not(.dj-submitted)>input[type=number]:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) django-field-group.dj-dirty:not(.dj-submitted)>input[type=date]:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) django-field-group.dj-dirty:not(.dj-submitted)>input[type=url]:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) django-field-group.dj-dirty:not(.dj-submitted)>input[type=password]:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) django-field-group.dj-dirty:not(.dj-submitted)>select:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-warnings:not(.dj-feedback-errors) django-field-group.dj-dirty:not(.dj-submitted)>textarea:not(.dj-exempt-feedback):invalid{background-image:var(--django-formset-icon-warning)}django-formset.dj-feedback-success django-field-group.dj-dirty>input[type=email]:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success django-field-group.dj-dirty>input[type=text]:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success django-field-group.dj-dirty>input[type=number]:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success django-field-group.dj-dirty>input[type=date]:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success django-field-group.dj-dirty>input[type=url]:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success django-field-group.dj-dirty>input[type=password]:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success django-field-group.dj-dirty>select:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success django-field-group.dj-dirty>textarea:not(.dj-exempt-feedback):valid:not(:focus){border-color:var(--django-formset-color-valid)}django-formset.dj-feedback-success django-field-group.dj-dirty>input[type=email]:not(.dj-exempt-feedback):valid{background-image:var(--django-formset-icon-valid) !important}django-formset.dj-feedback-success django-field-group.dj-dirty>input[type=text]:not(.dj-exempt-feedback):valid{background-image:var(--django-formset-icon-valid) !important}django-formset.dj-feedback-success django-field-group.dj-dirty>input[type=number]:not(.dj-exempt-feedback):valid{background-image:var(--django-formset-icon-valid) !important}django-formset.dj-feedback-success django-field-group.dj-dirty>input[type=date]:not(.dj-exempt-feedback):valid{background-image:var(--django-formset-icon-valid) !important}django-formset.dj-feedback-success django-field-group.dj-dirty>input[type=url]:not(.dj-exempt-feedback):valid{background-image:var(--django-formset-icon-valid) !important}django-formset.dj-feedback-success django-field-group.dj-dirty>input[type=password]:not(.dj-exempt-feedback):valid{background-image:var(--django-formset-icon-valid) !important}django-formset django-field-group{display:block}django-formset django-field-group[hidden]{display:none}django-formset django-field-group.dj-required>label,django-formset django-field-group.dj-required-any>label{font-weight:bolder}django-formset django-field-group.dj-submitted>input[type=email]:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset django-field-group.dj-submitted>input[type=email]:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset django-field-group.dj-submitted>input[type=text]:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset django-field-group.dj-submitted>input[type=text]:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset django-field-group.dj-submitted>input[type=number]:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset django-field-group.dj-submitted>input[type=number]:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset django-field-group.dj-submitted>input[type=date]:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset django-field-group.dj-submitted>input[type=date]:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset django-field-group.dj-submitted>input[type=url]:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset django-field-group.dj-submitted>input[type=url]:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset django-field-group.dj-submitted>input[type=password]:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset django-field-group.dj-submitted>input[type=password]:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset django-field-group.dj-submitted>select:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset django-field-group.dj-submitted>select:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset django-field-group.dj-submitted>textarea:not(.dj-exempt-feedback):invalid{border-color:var(--django-formset-color-invalid);background-image:var(--django-formset-icon-invalid)}django-formset django-field-group.dj-submitted>textarea:not(.dj-exempt-feedback):invalid:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset django-field-group input{background-repeat:no-repeat !important;background-position:center right !important;background-origin:content-box !important}django-formset django-field-group input[type=date]{position:relative}django-formset django-field-group input[type=date]::-webkit-datetime-edit-fields-wrapper{margin-left:2em}django-formset django-field-group input[type=date]::-webkit-calendar-picker-indicator{position:absolute;left:.75em}django-formset django-field-group input[type=date]:hover::-webkit-calendar-picker-indicator{cursor:pointer}django-formset django-field-group select,django-formset django-field-group textarea{background-image:none !important}django-formset django-field-group select.dj-concealed,django-formset django-field-group textarea.dj-concealed{display:block !important;height:1px !important;min-height:initial !important;max-height:initial !important;padding:0 !important;margin:-1px 0 0 0 !important;border:none !important;opacity:0 !important;resize:none}django-formset django-field-group .dj-help-text{font-style:oblique}django-formset django-field-group .dj-form-optgroup{margin-bottom:.5rem}django-formset django-field-group .dj-form-optgroup>em{margin-left:.75rem}django-formset django-field-group .dj-form-inlined{display:inline-block}django-formset django-field-group input[type=file]{width:0 !important;height:0 !important}django-formset django-field-group .dj-control-panel{display:flex}django-formset django-field-group .dj-control-panel>div{height:fit-content;margin-left:.5rem}django-formset django-field-group .dj-control-panel>div progress{width:100%;margin-top:.25rem}django-formset django-field-group figure.dj-dropbox{all:unset;display:inline-flex;align-items:center;justify-content:space-between;background-color:#f5f5f5;margin:0 0 .25rem .25rem;padding:0;list-style:none;height:8rem;min-width:8rem;outline:gray thin dotted}django-formset django-field-group figure.dj-dropbox>div.dj-empty-item{flex-grow:1;text-align:center;height:auto}django-formset django-field-group figure.dj-dropbox>div.dj-empty-item p{padding-left:.5rem;padding-right:.5rem}django-formset django-field-group figure.dj-dropbox>img{all:unset;flex-grow:1;display:block;height:inherit;max-width:calc(100% - 12rem)}django-formset django-field-group figure.dj-dropbox>figcaption{all:unset;padding:.25rem .5rem;background-color:#fff;overflow-x:hidden;min-width:12rem}django-formset django-field-group figure.dj-dropbox>figcaption dl{font-size:small;margin:0 0 .25rem 0}django-formset django-field-group figure.dj-dropbox>figcaption dl dd{margin:0}django-formset django-field-group figure.dj-dropbox>figcaption .dj-delete-file,django-formset django-field-group figure.dj-dropbox>figcaption .dj-download-file{font-weight:bold;display:inline-block;cursor:pointer;text-decoration:none}django-formset django-field-group figure.dj-dropbox>figcaption .dj-delete-file:hover,django-formset django-field-group figure.dj-dropbox>figcaption .dj-download-file:hover{text-decoration:underline}django-formset django-field-group figure.dj-dropbox>figcaption .dj-download-file{margin-left:1rem;float:right}django-formset django-field-group .dj-dual-selector{display:flex}django-formset django-field-group .dj-dual-selector .left-column,django-formset django-field-group .dj-dual-selector .right-column,django-formset django-field-group .dj-dual-selector .control-column,django-formset django-field-group .dj-dual-selector .control-panel{display:flex;flex-direction:column}django-formset django-field-group .dj-dual-selector .control-column{justify-content:center;align-items:center}django-formset django-field-group .dj-dual-selector .control-panel{padding:1rem .5rem}django-formset django-field-group .dj-dual-selector select,django-formset django-field-group .dj-dual-selector django-sortable-select{min-width:10rem}django-formset django-field-group .dj-dual-selector select{height:auto}django-formset django-field-group .dj-dual-selector input{z-index:1}django-formset django-field-group .dj-dual-selector button svg{vertical-align:middle;width:16px;height:16px}django-formset django-field-group .dj-dual-selector.invalid .right-column input{border-color:var(--django-formset-color-invalid)}django-formset django-field-group .dj-dual-selector.invalid .right-column input:focus{box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}django-formset django-field-group .dj-dual-selector.invalid .right-column select,django-formset django-field-group .dj-dual-selector.invalid .right-column django-sortable-select{border-left-color:var(--django-formset-color-invalid);border-right-color:var(--django-formset-color-invalid);border-bottom-color:var(--django-formset-color-invalid)}django-formset django-field-group .dj-dual-selector.invalid .right-column select:focus,django-formset django-field-group .dj-dual-selector.invalid .right-column django-sortable-select.focus{border-top-color:var(--django-formset-color-invalid);box-shadow:0 0 0 .2rem var(--django-formset-shadow-invalid)}.dj-button-decorator{line-height:initial}.dj-button-decorator svg{vertical-align:baseline;width:1rem;height:1rem}.dj-button-decorator svg .path{stroke-dasharray:1000;stroke-dashoffset:0}.dj-button-decorator svg .path.circle{animation:dash .9s ease-in-out}.dj-button-decorator svg .path.line{stroke-dashoffset:1000;animation:dash .9s .35s ease-in-out forwards}.dj-button-decorator svg .path.check{stroke-dashoffset:-100;animation:dash-check .9s .35s ease-in-out forwards}.dj-button-decorator svg .spinner{transform-origin:center;animation:rotate 1.5s infinite linear}@keyframes dash{0%{stroke-dashoffset:1000}100%{stroke-dashoffset:0}}@keyframes dash-check{0%{stroke-dashoffset:-100}100%{stroke-dashoffset:900}}@keyframes rotate{from{transform:rotate(0deg)}to{transform:rotate(360deg)}}.dj-button-decorator .dj-icon{display:inline-block;width:1em;height:1em}`;var kr=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
	<g class="spinner">
		<path style="stroke-width:0.729" d="m 12.73285,23.212276 -10e-7,-4.393157 A 0.27932072,0.27932072 0 0 0 12.27476,18.604602 l -2.6367848,2.196577 a 0.27932072,0.27932072 0 0 0 -10e-8,0.429037 l 2.6367859,2.196577 a 0.27932072,0.27932072 0 0 0 0.458089,-0.214517 z" />
		<path style="stroke-width:0.729" d="m 11.298326,5.191792 -10e-7,-4.39315704 a 0.27932072,0.27932072 0 0 1 0.458086,-0.214519 L 14.393193,2.780699 a 0.27932072,0.27932072 0 0 1 2e-6,0.429033 l -2.636785,2.19658 a 0.27932072,0.27932072 0 0 1 -0.458084,-0.21452 z" />
		<path style="fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;stroke-dashoffset:89.339;stroke-dasharray:none" d="M 12.5,2.9179688 C 12.333705,2.9010187 12.166975,2.8886442 12,2.8808594 6.9635919,2.8807514 2.8807499,6.9635934 2.8808594,12 c 0.00661,2.530252 1.064217,4.944009 2.9199218,6.664062" />
		<path style="fill:none;stroke:currentColor;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;stroke-dashoffset:89.339;stroke-dasharray:none" d="m 11.458261,21.082031 c 0.166295,0.01695 0.333025,0.02933 0.5,0.03711 C 16.994669,21.119249 21.077511,17.036407 21.077402,12 21.070802,9.469748 20.013185,7.055991 18.15748,5.335938" />
	</g>
</svg>
`;var Ar=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
	<circle class="path circle" fill="none" stroke="currentColor" stroke-width="1.93833" stroke-miterlimit="10" cx="12.000002" cy="12.000002" r="10.030837" />
	<polyline class="path check" fill="none" stroke="currentColor" stroke-width="12" stroke-linecap="round" stroke-miterlimit="10" points="100.2,40.2 51.5,88.8 29.8,67.5 " transform="matrix(0.18,0,0,0.18,-0.284,0.544)" />
</svg>
`;var Cr=`<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
	<circle class="path circle" fill="none" stroke="currentColor" stroke-width="1.93833" stroke-miterlimit="10" cx="12.000002" cy="12.000002" r="10.030837" />
	<line class="path line" fill="none" stroke="currentColor" stroke-width="2.12533" stroke-linecap="round" stroke-miterlimit="10" x1="6.562665" y1="7.1626649" x2="17.437328" y2="16.79755" />
	<line class="path line" fill="none" stroke="currentColor" stroke-width="2.12534" stroke-linecap="round" stroke-miterlimit="10" x1="17.437338" y1="7.1626701" x2="6.5626698" y2="16.762127" />
</svg>
`;var ms="__all__",hs="_collection_errors_",Tr="_marked_for_removal_",Sr=document.createElement("style");Sr.innerText=_r;document.head.appendChild(Sr);var Qe=class{constructor(e){this.value=e}},et=class extends Map{constructor(e){super();let r=e.element.querySelector("django-error-messages");if(!r)throw new Error(`<django-field-group> for '${e.name}' requires one <django-error-messages> tag.`);for(let n of r.getAttributeNames()){let o=n.replace(/([_][a-z])/g,a=>a.toUpperCase().replace("_","")),i=r.getAttribute(n);i&&this.set(o,i)}}},tt=class{constructor(e,r){this.form=e,this.element=r,this.errorPlaceholder=r.querySelector(".dj-errorlist > .dj-placeholder"),this.errorMessages=new et(this);let n=r.classList.contains("dj-required-any"),o=c=>c instanceof HTMLInputElement&&c.name&&c.form===e.element&&c.type!=="hidden",i=Array.from(r.getElementsByTagName("INPUT")).filter(o);for(let c of i)switch(c.type){case"checkbox":case"radio":c.addEventListener("input",()=>{this.touch(),this.inputted()}),c.addEventListener("change",()=>{n?this.validateCheckboxSelectMultiple():this.validate()});break;case"file":this.fileUploader=new Ce(this,c);break;default:c.addEventListener("focus",()=>this.touch()),c.addEventListener("input",()=>this.inputted()),c.addEventListener("blur",()=>this.validate());break}this.fieldElements=Array(0).concat(i);let a=c=>c instanceof HTMLSelectElement&&c.name&&c.form===e.element,p=Array.from(r.getElementsByTagName("SELECT")).filter(a).at(0);p instanceof HTMLSelectElement&&(p.addEventListener("focus",()=>this.touch()),p.addEventListener("change",()=>{this.setDirty(),this.clearCustomError(),this.validate()}),this.fieldElements.push(p));let u=c=>c instanceof HTMLTextAreaElement&&c.name&&c.form===e.element,f=Array.from(r.getElementsByTagName("TEXTAREA")).filter(u).at(0);f instanceof HTMLTextAreaElement&&(f.addEventListener("focus",()=>this.touch()),f.addEventListener("input",()=>this.inputted()),f.addEventListener("blur",()=>this.validate()),this.fieldElements.push(f)),this.name=this.assertUniqueName(),this.initialDisabled=this.fieldElements.map(c=>c.disabled),n?this.validateCheckboxSelectMultiple():this.validateBoundField(),this.pristineValue=new Qe(this.aggregateValue()),this.updateVisibility=this.evalVisibility("show-if",!0)??this.evalVisibility("hide-if",!1)??function(){},this.updateDisabled=this.evalDisable(),this.untouch(),this.setPristine()}aggregateValue(){if(this.fieldElements.length===1){let e=this.fieldElements[0];if(e.type==="checkbox")return e.checked?e.value:"";if(e.type==="select-multiple"){let r=[],n=e;for(let o in n.options)n.options[o].selected&&r.push(n.options[o].value);return r}return e.type==="file"?this.fileUploader.uploadedFiles:e.value}else{let e=[];for(let r of this.fieldElements)if(r.type==="checkbox")r.checked&&e.push(r.value);else if(r.type==="radio"&&r.checked)return r.value;return e}}updateOperability(){this.updateVisibility(),this.updateDisabled()}assertUniqueName(){let e="__undefined__";for(let r of this.fieldElements)if(e==="__undefined__")e=r.name;else if(e!==r.name)throw new Error(`Duplicate name '${e}' on multiple input fields on '${r.name}'`);return e}evalVisibility(e,r){var o;let n=(o=this.fieldElements[0])==null?void 0:o.getAttribute(e);if(typeof n!="string")return null;try{let i=new Function("return "+Z(n,{startRule:"Expression"}));return()=>{let a=r!=Boolean(i.call(this));this.element.hasAttribute("hidden")!==a&&(this.fieldElements.forEach((p,u)=>p.disabled=a||this.initialDisabled[u]),this.element.toggleAttribute("hidden",a))}}catch(i){throw new Error(`Error while parsing <... show-if/hide-if="${n}">: ${i}.`)}}evalDisable(){var r;let e=(r=this.fieldElements[0])==null?void 0:r.getAttribute("disable-if");if(typeof e!="string")return()=>{};try{let n=new Function("return "+Z(e,{startRule:"Expression"}));return()=>{let o=n.call(this);this.fieldElements.forEach((i,a)=>i.disabled=o||this.initialDisabled[a])}}catch(n){throw new Error(`Error while parsing <... disable-if="${e}">: ${n}.`)}}getDataValue(e){return this.form.getDataValue(e)}inputted(){(0,Lr.default)(this.pristineValue,this.aggregateValue())?this.setPristine():this.setDirty(),this.clearCustomError()}clearCustomError(){this.form.clearCustomErrors(),this.errorPlaceholder&&(this.errorPlaceholder.innerHTML="");for(let e of this.fieldElements)e.validity.customError&&e.setCustomValidity("")}resetToInitial(){var e;(e=this.fileUploader)==null||e.resetToInitial(),this.untouch(),this.setPristine(),this.clearCustomError()}disableAllFields(){this.fieldElements.forEach(e=>e.disabled=!0)}reenableAllFields(){this.fieldElements.forEach((e,r)=>e.disabled=this.initialDisabled[r])}touch(){this.element.classList.remove("dj-untouched"),this.element.classList.remove("dj-validated"),this.element.classList.add("dj-touched")}untouch(){this.element.classList.remove("dj-submitted"),this.element.classList.remove("dj-touched"),this.element.classList.add("dj-untouched")}setDirty(){this.element.classList.remove("dj-submitted"),this.element.classList.remove("dj-pristine"),this.element.classList.add("dj-dirty")}setPristine(){this.element.classList.remove("dj-dirty"),this.element.classList.add("dj-pristine")}setSubmitted(){this.element.classList.add("dj-submitted")}validate(){let e=null;for(e of this.fieldElements)if(!e.validity.valid)break;if(e&&!e.validity.valid){for(let[r,n]of this.errorMessages)if(e.validity[r]){this.form.formset.showFeedbackMessages&&this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=n),e=null;break}this.form.formset.showFeedbackMessages&&e instanceof HTMLInputElement&&this.validateInput(e)}this.form.validate()}validateCheckboxSelectMultiple(){let e=!1;for(let r of this.fieldElements){if(r.type!=="checkbox")throw new Error("Expected input element of type 'checkbox'.");r.checked?e=!0:r.setCustomValidity(this.errorMessages.get("customError")??"")}if(e)for(let r of this.fieldElements)r.setCustomValidity("");else this.pristineValue!==void 0&&this.errorPlaceholder&&this.form.formset.showFeedbackMessages&&(this.errorPlaceholder.innerHTML=this.errorMessages.get("customError")??"");return this.form.validate(),e}validateInput(e){if(e.type==="text"&&e.value){if(e.minLength>0&&e.value.length<e.minLength)return this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=this.errorMessages.get("tooShort")??""),!1;if(e.maxLength>0&&e.value.length>e.maxLength)return this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=this.errorMessages.get("tooLong")??""),!1}return e.type==="file"&&this.fileUploader.inProgress()?(this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=this.errorMessages.get("typeMismatch")??""),!1):!0}validateBoundField(){if(this.fieldElements.length!==1||!(this.fieldElements[0]instanceof HTMLInputElement))return;let e=this.fieldElements[0];if(!!e.value&&e.type==="text"){if(e.minLength>0&&e.value.length<e.minLength)return e.setCustomValidity(this.errorMessages.get("tooShort")??"");if(e.maxLength>0&&e.value.length>e.maxLength)return e.setCustomValidity(this.errorMessages.get("tooLong")??"")}}setValidationError(){let e;for(e of this.fieldElements)if(!e.validity.valid)break;for(let[r,n]of this.errorMessages)if(e&&e.validity[r])return this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=n,e.setCustomValidity(n)),!1;return e instanceof HTMLInputElement?this.validateInput(e):!0}reportCustomError(e){this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=e),this.fieldElements[0].setCustomValidity(e)}reportFailedUpload(){this.errorPlaceholder&&(this.errorPlaceholder.innerHTML=this.errorMessages.get("badInput")??"File upload failed")}},Te=class{constructor(e,r){this.func=e,this.args=r}},rt=class{constructor(e,r){this.successActions=Array(0);this.rejectActions=Array(0);this.clicked=()=>{let e;for(let[r,n]of this.successActions.entries())e?e=e.then(n.func.apply(this,n.args)):e=n.func.apply(this,n.args)();if(e){for(let[r,n]of this.rejectActions.entries())r===0?e=e.catch(n.func.apply(this,n.args)):e=e.then(n.func.apply(this,n.args));e.finally(this.restore.apply(this))}};var n;this.formset=e,this.element=r,this.initialClass=r.getAttribute("class")??"",this.isAutoDisabled=!!JSON.parse((r.getAttribute("auto-disable")??"false").toLowerCase()),this.decoratorElement=r.querySelector(".dj-button-decorator"),this.originalDecorator=(n=this.decoratorElement)==null?void 0:n.cloneNode(!0),this.spinnerElement=document.createElement("i"),this.spinnerElement.classList.add("dj-icon","dj-spinner"),this.spinnerElement.innerHTML=kr,this.okayElement=document.createElement("i"),this.okayElement.classList.add("dj-icon","dj-okay"),this.okayElement.innerHTML=Ar,this.bummerElement=document.createElement("i"),this.bummerElement.classList.add("dj-icon","dj-bummer"),this.bummerElement.innerHTML=Cr,this.parseActionsQueue(r.getAttribute("click")),r.addEventListener("click",this.clicked)}autoDisable(e){this.isAutoDisabled&&(this.element.disabled=!e)}disable(){return e=>(this.element.disabled=!0,Promise.resolve(e))}enable(){return e=>(this.element.disabled=!1,Promise.resolve(e))}submit(e){return()=>new Promise((r,n)=>{this.formset.submit(e).then(o=>o instanceof Response&&o.status===200?r(o):n(o))})}reset(){return e=>(this.formset.resetToInitial(),Promise.resolve(e))}reload(e){return r=>(e?location.reload():location.replace(window.location.pathname),Promise.resolve(r))}proceed(e){return r=>(typeof e=="string"&&e.length>0?location.href=e:r instanceof Response&&r.status===200&&r.json().then(n=>{n.success_url?location.href=n.success_url:console.warn("Neither a success-, nor a proceed-URL are given.")}),Promise.resolve(r))}delay(e){return r=>new Promise(n=>this.timeoutHandler=window.setTimeout(()=>{this.timeoutHandler=void 0,n(r)},e))}spinner(){return e=>{var r;return(r=this.decoratorElement)==null||r.replaceChildren(this.spinnerElement),Promise.resolve(e)}}okay(e){return this.decorate(this.okayElement,e)}bummer(e){return this.decorate(this.bummerElement,e)}addClass(e){return r=>(this.element.classList.add(e),Promise.resolve(r))}removeClass(e){return r=>(this.element.classList.remove(e),Promise.resolve(r))}toggleClass(e){return r=>(this.element.classList.toggle(e),Promise.resolve(r))}emit(e,r){return n=>{let o={bubbles:!0,cancelable:!0};return r!==void 0?(Object.assign(o,{detail:r}),this.element.dispatchEvent(new CustomEvent(e,o))):this.element.dispatchEvent(new Event(e,o)),Promise.resolve(n)}}intercept(){return e=>(console.info(e),Promise.resolve(e))}clearErrors(){return e=>(this.formset.clearErrors(),Promise.resolve(e))}scrollToError(){return e=>{let r=this.formset.findFirstErrorReport();return r&&r.scrollIntoView({behavior:"smooth"}),Promise.resolve(e)}}confirm(e){if(typeof e!="string")throw new Error("The confirm() action requires a message.");return r=>window.confirm(e)?Promise.resolve(r):Promise.reject({})}alertOnError(){return e=>(e.status!==422&&window.alert(e.statusText),Promise.resolve(e))}noop(){return e=>Promise.resolve(e)}restore(){return()=>window.setTimeout(()=>this.restoreToInitial())}decorate(e,r){return n=>{var o;return(o=this.decoratorElement)==null||o.replaceChildren(e),typeof r!="number"?Promise.resolve(n):new Promise(i=>this.timeoutHandler=window.setTimeout(()=>{this.timeoutHandler=void 0,i(n)},r))}}parseActionsQueue(e){if(!e)return;let r=(n,o)=>{for(let i of o){let a=this[i.funcname];if(typeof a!="function")throw new Error(`Unknown function '${i.funcname}'.`);n.push(new Te(a,i.args))}n.length===0&&n.push(new Te(this.noop,[]))};try{let n=Z(e,{startRule:"Actions"});r(this.successActions,n.successChain),r(this.rejectActions,n.rejectChain)}catch(n){throw new Error(`Error while parsing <button click="${e}">: ${n}.`)}}restoreToInitial(){var e;this.element.disabled=!1,this.element.setAttribute("class",this.initialClass),this.originalDecorator&&((e=this.decoratorElement)==null||e.replaceChildren(...this.originalDecorator.cloneNode(!0).childNodes))}abortAction(){this.timeoutHandler&&(clearTimeout(this.timeoutHandler),this.timeoutHandler=void 0)}},nt=class{constructor(e,r){this.form=e,this.element=r,this.updateVisibility=this.evalVisibility("show-if",!0)??this.evalVisibility("hide-if",!1)??function(){},this.updateDisabled=this.evalDisable()}evalVisibility(e,r){let n=this.element.getAttribute(e);if(n===null)return null;try{let o=new Function("return "+Z(n,{startRule:"Expression"}));return()=>{let i=r!=Boolean(o.call(this));this.element.hasAttribute("hidden")!==i&&this.element.toggleAttribute("hidden",i)}}catch(o){throw new Error(`Error while parsing <fieldset show-if/hide-if="${n}">: ${o}.`)}}evalDisable(){let e=this.element.getAttribute("disable-if");if(typeof e!="string")return()=>{};try{let r=new Function("return "+Z(e,{startRule:"Expression"}));return()=>this.element.disabled=r.call(this)}catch(r){throw new Error(`Error while parsing <fieldset disable-if="${e}">: ${r}.`)}}getDataValue(e){return this.form.getDataValue(e)}updateOperability(){this.updateVisibility(),this.updateDisabled()}},it=class{constructor(e,r){this.errorList=null;this.errorPlaceholder=null;this.fieldGroups=Array(0);this.hiddenInputFields=Array(0);this.markedForRemoval=!1;this.resetted=()=>{for(let e of this.fieldGroups)e.resetToInitial()};var i,a;this.formset=e,this.element=r,this.path=((i=this.name)==null?void 0:i.split("."))??[];let n=r.nextSibling;this.fieldset=n instanceof HTMLFieldSetElement&&n.form===r?new nt(this,n):null;let o=(a=r.nextElementSibling)==null?void 0:a.querySelector(".dj-form-errors > .dj-errorlist > .dj-placeholder");o&&(this.errorList=o.parentElement,this.errorPlaceholder=this.errorList.removeChild(o)),this.element.addEventListener("reset",this.resetted)}aggregateValues(){let e=new Map;for(let r of this.fieldGroups)e.set(r.name,r.aggregateValue());for(let r of this.hiddenInputFields.filter(n=>n.type==="hidden"))e.set(r.name,r.value);return e}get name(){return this.element.getAttribute("name")}get formId(){return this.element.getAttribute("id")}get provideData(){return this.element.method!=="dialog"}getAbsPath(){return["formset_data",...this.path]}getDataValue(e){if(e[0]!=="")return this.formset.getDataValue(e);let r=[...this.path],n=e.filter(i=>i!==""),o=e.length-n.length;return r.splice(r.length-o+1),r.push(...n),this.formset.getDataValue(r)}updateOperability(){var e;(e=this.fieldset)==null||e.updateOperability(),this.fieldGroups.forEach(r=>r.updateOperability())}setSubmitted(){this.fieldGroups.forEach(e=>e.setSubmitted())}validate(){this.formset.validate()}isValid(){if(this.element.noValidate||!this.provideData)return!0;let e=!0;for(let r of this.fieldGroups)e=r.setValidationError()&&e;return e}checkValidity(){return this.element.noValidate||!this.provideData?!0:this.element.checkValidity()}reportValidity(){this.element.noValidate||!this.provideData||this.element.reportValidity()}clearCustomErrors(){for(;this.errorList&&this.errorList.lastChild;)this.errorList.removeChild(this.errorList.lastChild)}resetToInitial(){this.element.reset()}toggleForRemoval(e){this.markedForRemoval=e;for(let r of this.fieldGroups)e?(r.resetToInitial(),r.disableAllFields()):r.reenableAllFields()}reportCustomErrors(e){this.clearCustomErrors();let r=e.get(ms);if(this.errorList&&r instanceof Array&&this.errorPlaceholder)for(let n of r){let o=this.errorPlaceholder.cloneNode();o.innerHTML=n,this.errorList.appendChild(o)}for(let n of this.fieldGroups){let o=e.get(n.name);o instanceof Array&&o.length>0&&n.reportCustomError(o[0])}}findFirstErrorReport(){var e,r;if((e=this.errorList)!=null&&e.textContent)return this.element;for(let n of this.fieldGroups)if((r=n.errorPlaceholder)!=null&&r.textContent)return n.element;return null}},L=class{constructor(e,r,n,o){this.forms=Array(0);this.children=Array(0);this.markedForRemoval=!1;this.formset=e,this.element=r,this.parent=n,this.findFormCollections()}findFormCollections(){for(let e of L.getChildCollections(this.element))this.children.push(e.hasAttribute("sibling-position")?new k(this.formset,e,this):new L(this.formset,e,this));for(let e of this.children)e.updateRemoveButtonAttrs();this.formCollectionTemplate=Q.findFormCollectionTemplate(this.formset,this.element,this)}assignForms(e){this.forms=e.filter(r=>{var n;return(n=r.element.parentElement)==null?void 0:n.isEqualNode(this.element)});for(let r of this.children)r.assignForms(e)}updateRemoveButtonAttrs(){}disconnect(){var e;this.forms.forEach(r=>this.formset.removeForm(r)),this.children.forEach(r=>r.disconnect()),(e=this.formCollectionTemplate)==null||e.disconnect(),this.element.remove()}toggleForRemoval(e){this.markedForRemoval=e;for(let r of this.forms)r.toggleForRemoval(e);for(let r of this.children)r.toggleForRemoval(e);this.formCollectionTemplate&&(this.formCollectionTemplate.markedForRemoval=e,this.formCollectionTemplate.updateAddButtonAttrs()),this.element.classList.toggle("dj-marked-for-removal",this.markedForRemoval)}resetToInitial(){if(this.toggleForRemoval(!1),L.resetCollectionsToInitial(this.children),this.formCollectionTemplate){let e=this.formCollectionTemplate.prefix,r=e==="0"?0:e.split(".").length;this.children.forEach((n,o)=>n.repositionForms(r,o)),this.formCollectionTemplate.updateAddButtonAttrs()}return!1}repositionSiblings(){}repositionForms(e,r){this.forms.forEach(n=>{n.path[e]=String(r),n.element.setAttribute("name",n.path.join("."))}),this.children.forEach(n=>n.repositionForms(e,r))}static getChildCollections(e){var n;let r=(n=e.querySelector("django-form-collection"))==null?void 0:n.parentElement;return r?r.querySelectorAll(":scope > django-form-collection"):[]}static resetCollectionsToInitial(e){var o;let r=Array(0);for(let i of e)i.resetToInitial()&&r.push(i);r.forEach(i=>e.splice(e.indexOf(i),1)),e.sort((i,a)=>i instanceof k&&a instanceof k?i.initialPosition-a.initialPosition:0);let n=null;for(let i of e)i instanceof k&&(i.initialPosition===0?(o=i.element.parentElement)==null||o.insertAdjacentElement("afterbegin",i.element):n==null||n.insertAdjacentElement("afterend",i.element),n=i.element);e.forEach(i=>i.repositionSiblings())}},k=class extends L{constructor(r,n,o,i){super(r,n,o);this.minSiblings=0;this.maxSiblings=null;this.justAdded=!1;this.removeCollection=()=>{var o,i;let r=((o=this.parent)==null?void 0:o.children)??this.formset.formCollections;this.justAdded?(this.disconnect(),r.splice(r.indexOf(this),1),this.repositionSiblings()):(this.toggleForRemoval(!this.markedForRemoval),this.removeButton.disabled=!this.markedForRemoval),r.forEach(a=>a.updateRemoveButtonAttrs()),(((i=this.parent)==null?void 0:i.formCollectionTemplate)??this.formset.formCollectionTemplate).updateAddButtonAttrs()};this.justAdded=i??!1;let a=n.getAttribute("sibling-position");if(!a)throw new Error("Missing argument 'sibling-position' in <django-form-collection>");this.position=this.initialPosition=parseInt(a);let p=n.getAttribute("min-siblings");if(!p)throw new Error("Missing argument 'min-siblings' in <django-form-collection>");this.minSiblings=parseInt(p);let u=n.getAttribute("max-siblings");u&&(this.maxSiblings=parseInt(u));let f=n.querySelector(":scope > button.remove-collection");if(!f)throw new Error('<django-form-collection> with siblings requires child element <button class="remove-collection">');this.removeButton=f,this.removeButton.addEventListener("click",this.removeCollection)}disconnect(){this.removeButton.removeEventListener("click",this.removeCollection),super.disconnect()}repositionSiblings(){var n;(((n=this.parent)==null?void 0:n.children)??this.formset.formCollections).forEach((o,i)=>{o instanceof k&&(o.position=i,o.element.setAttribute("sibling-position",String(i)))})}updateRemoveButtonAttrs(){var o;if(!this.removeButton)return;let n=(((o=this.parent)==null?void 0:o.children)??this.formset.formCollections).filter(i=>!i.markedForRemoval).length;this.markedForRemoval?this.maxSiblings?this.removeButton.disabled=n>=this.maxSiblings:this.removeButton.disabled=!1:this.removeButton.disabled=n<=this.minSiblings}resetToInitial(){return this.justAdded?(this.disconnect(),!0):(super.resetToInitial(),!1)}},Q=class{constructor(e,r,n){this.maxSiblings=null;this.baseContext=new Map;this.markedForRemoval=!1;this.resortSiblings=e=>{var i;let r=e.oldDraggableIndex??NaN,n=e.newDraggableIndex??NaN;if(!isFinite(r)||!isFinite(n)||r===n)return;let o=((i=this.parent)==null?void 0:i.children)??this.formset.formCollections;if(o.at(r)instanceof k){let a=o.splice(r,1);o.splice(n,0,...a),a.at(0).repositionSiblings();let p=this.prefix==="0"?0:this.prefix.split(".").length;o.forEach((u,f)=>u.repositionForms(p,f)),this.formset.validate()}};this.appendFormCollectionSibling=()=>{var i;let e=Object.fromEntries(this.baseContext);e.position=(this.getHighestPosition()+1).toString(),e.position_1="${position}";for(let a=1;a<10;++a)e[`position_${a+1}`]=`\${position_${a}}`;let r=this.renderEmptyCollection(e);this.element.insertAdjacentHTML("beforebegin",r);let n=this.element.previousElementSibling;if(!(n instanceof HTMLElement))throw new Error("Unable to insert empty <django-form-collection> element.");let o=((i=this.parent)==null?void 0:i.children)??this.formset.formCollections;o.push(new k(this.formset,n,this.parent,!0)),this.formset.findForms(n),this.formset.assignFieldsToForms(n),this.formset.assignFormsToCollections(),this.formset.validate(),o.forEach(a=>a.updateRemoveButtonAttrs()),this.updateAddButtonAttrs()};var u;this.formset=e,this.element=r,this.parent=n;let o=r.innerHTML.matchAll(/\$\{([^} ]+)\}/g);for(let f of o)this.baseContext.set(f[1],f[0]);let i=r.getAttribute("prefix");if(!i)throw new Error('<template class="empty-collection" ...> requires attribute "prefix"');this.prefix=i,e.pushTemplatePrefix(this.prefix),this.renderEmptyCollection=(0,$r.default)(r.innerHTML),(u=r.nextElementSibling)!=null&&u.matches("button.add-collection")&&(this.addButton=r.nextElementSibling,this.addButton.addEventListener("click",this.appendFormCollectionSibling));let a=this.element.content.querySelector("django-form-collection"),p=a==null?void 0:a.getAttribute("max-siblings");p&&(this.maxSiblings=parseInt(p)),r.hasAttribute("sortable")&&new ft(r.parentElement,{animation:150,handle:"django-form-collection[sibling-position]:not(.dj-marked-for-removal) > .collection-drag-handle",draggable:"django-form-collection[sibling-position]",selectedClass:"selected",ghostClass:"dj-ghost-collection",onEnd:this.resortSiblings})}getHighestPosition(){let e=-1,r=this.parent?this.parent.children:this.formset.formCollections;for(let n of r.filter(o=>o instanceof k))e=Math.max(e,n.position);return e}disconnect(){var e;this.formset.popTemplatePrefix(this.prefix),(e=this.addButton)==null||e.removeEventListener("click",this.appendFormCollectionSibling)}updateAddButtonAttrs(){var n;if(!this.addButton)return;if(this.markedForRemoval){this.addButton.disabled=!0;return}let r=(((n=this.parent)==null?void 0:n.children)??this.formset.formCollections).filter(o=>!o.markedForRemoval).length;this.addButton.disabled=this.maxSiblings===null?!1:r>=this.maxSiblings}static findFormCollectionTemplate(e,r,n){let o=r.querySelector(":scope > .collection-siblings > template.empty-collection");if(o){let i=new Q(e,o,n);return i.updateAddButtonAttrs(),i}}},ot=class{constructor(e){this.buttons=Array(0);this.forms=Array(0);this.formCollections=Array(0);this.collectionErrorsList=new Map;this.abortController=new AbortController;this.emptyCollectionPrefixes=Array(0);this.data={};this.element=e,this.showFeedbackMessages=this.parseWithholdFeedback(),this.CSRFToken=this.element.getAttribute("csrf-token")}connectedCallback(){this.findButtons(),this.findForms(),this.findFormCollections(),this.findCollectionErrorsList(),this.assignFieldsToForms(),this.assignFormsToCollections(),window.setTimeout(()=>this.validate(),0)}get endpoint(){return this.element.getAttribute("endpoint")??""}get forceSubmission(){return this.element.hasAttribute("force-submission")}parseWithholdFeedback(){var o;let e=!0,r=((o=this.element.getAttribute("withhold-feedback"))==null?void 0:o.split(" "))??[],n=new Set(["dj-feedback-errors","dj-feedback-warnings","dj-feedback-success"]);for(let i of r)switch(i.toLowerCase()){case"messages":e=!1;break;case"errors":n.delete("dj-feedback-errors");break;case"warnings":n.delete("dj-feedback-warnings");break;case"success":n.delete("dj-feedback-success");break;default:throw new Error(`Unknown value in <django-formset withhold-feedback="${i}">.`)}return n.forEach(i=>this.element.classList.add(i)),e}pushTemplatePrefix(e){this.emptyCollectionPrefixes.push(e)}popTemplatePrefix(e){let r=this.emptyCollectionPrefixes.indexOf(e);r>=0&&this.emptyCollectionPrefixes.splice(r,1)}assignFieldsToForms(e){e=e??this.element;for(let r of e.querySelectorAll("INPUT, SELECT, TEXTAREA")){let n=r.getAttribute("form");if(!n)continue;let o=this.forms.filter(p=>p.formId&&p.formId===n);if(o.length<1)continue;if(o.length>1)throw new Error(`More than one form has id="${n}"`);let i=o[0],a=r.closest("django-field-group");a?i.fieldGroups.filter(p=>p.element===a).length===0&&i.fieldGroups.push(new tt(i,a)):r instanceof HTMLInputElement&&r.type==="hidden"&&(i.hiddenInputFields.includes(r)||i.hiddenInputFields.push(r))}}findForms(e){e=e??this.element;for(let r of e.getElementsByTagName("FORM")){let n=new it(this,r);this.forms.push(n)}this.checkForUniqueness()}checkForUniqueness(){let e=this.forms.filter(n=>n.provideData);if(e.length===1)return;let r=Array();e.forEach(n=>{if(!n.name)throw new Error("Multiple <form>-elements in a <django-formset> require a unique name each.");if(n.name in r)throw new Error(`Duplicate name "${n.name}" used in multiple forms of same <django-formset>.`);r.push(n.name)})}findFormCollections(){for(let e of L.getChildCollections(this.element))this.formCollections.push(e.hasAttribute("sibling-position")?new k(this,e):new L(this,e));this.formCollections.forEach(e=>e.updateRemoveButtonAttrs()),this.formCollectionTemplate=Q.findFormCollectionTemplate(this,this.element)}findCollectionErrorsList(){for(let e of this.element.getElementsByClassName("dj-collection-errors")){let r=e.getAttribute("prefix")??"",n=e.querySelector("ul.dj-errorlist");this.collectionErrorsList.set(r,n)}}findButtons(){this.buttons.length=0;for(let e of this.element.getElementsByTagName("BUTTON"))e.hasAttribute("click")&&this.buttons.push(new rt(this,e))}assignFormsToCollections(){for(let e of this.formCollections)e.assignForms(this.forms)}removeForm(e){this.forms.splice(this.forms.indexOf(e),1)}aggregateValues(){this.data={};for(let e of this.forms)e.provideData&&(0,Fr.default)(this.data,e.getAbsPath(),Object.fromEntries(e.aggregateValues()));for(let e of this.forms)e.markedForRemoval||e.updateOperability()}validate(){let e=!0;for(let r of this.forms)e=(r.markedForRemoval||r.checkValidity())&&e;for(let r of this.buttons)r.autoDisable(e);return this.aggregateValues(),e}buildBody(e){let r;function n(i,a){if(a.length===1){Array.isArray(i)?i.indexOf(r)<0&&i.push(r):i[a[0]]=r;return}if(isNaN(parseInt(a[1]))){let p=i[a[0]]??{};n(p,a.slice(1));let u=parseInt(a[0]);isNaN(u)?i[a[0]]=p:i[u]={...i[u],...p}}else{if(Array.isArray(i))throw new Error("Invalid form structure: Contains nested arrays.");let p=i[a[0]]??[];if(!Array.isArray(p))throw new Error("Invalid form structure: Inner array is missing.");n(p,a.slice(1)),i[a[0]]=p}}let o={};for(let i of this.emptyCollectionPrefixes){let a=["formset_data",...i.split(".")];r=(0,Y.default)(o,a)??[],n(o,a)}for(let i of this.forms){if(!i.name)return Object.assign({},this.data,{_extra:e});let a=i.getAbsPath();r=(0,Y.default)(this.data,a),i.markedForRemoval&&(r[Tr]=Tr),n(o,a)}return Object.assign({},o,{_extra:e})}async submit(e){let r=!0;if(this.setSubmitted(),!this.forceSubmission)for(let n of this.forms)r=(n.markedForRemoval||n.isValid())&&r;if(r){if(!this.endpoint)throw new Error(`<django-formset> requires attribute 'endpoint="server endpoint"' for submission`);try{let n=new Headers;n.append("Accept","application/json"),n.append("Content-Type","application/json"),this.CSRFToken&&n.append("X-CSRFToken",this.CSRFToken);let o=await fetch(this.endpoint,{method:"POST",headers:n,body:JSON.stringify(this.buildBody(e)),signal:this.abortController.signal});switch(o.status){case 200:this.clearErrors();for(let a of this.forms)a.element.dispatchEvent(new Event("submitted"));return o;case 422:this.clearErrors();let i=await o.json();return this.reportErrors(i),o;default:return console.warn(`Unknown response status: ${o.status}`),this.clearErrors(),this.buttons.forEach(a=>a.restoreToInitial()),o}}catch(n){this.clearErrors(),this.buttons.forEach(o=>o.restoreToInitial()),alert(n)}}else{this.clearErrors();for(let n of this.forms)n.reportValidity()}}reportErrors(e){for(let r of this.forms){let n=r.name?(0,Y.default)(e,r.name.split("."),null):e;n?(r.reportCustomErrors(new Map(Object.entries(n))),r.reportValidity()):r.clearCustomErrors()}for(let[r,n]of this.collectionErrorsList){let o=r?r.split("."):[];o=[...o,"0",hs];for(let i of(0,Y.default)(e,o,[])){let a=document.createElement("li");a.classList.add("dj-placeholder"),a.innerText=i,n.appendChild(a)}}}resetToInitial(){var e;L.resetCollectionsToInitial(this.formCollections),(e=this.formCollectionTemplate)==null||e.updateAddButtonAttrs(),this.forms.forEach(r=>r.resetToInitial())}abort(){for(let e of this.buttons)e.abortAction();this.abortController.abort()}setSubmitted(){for(let e of this.forms)e.setSubmitted()}getDataValue(e){let r=["formset_data",...e];return(0,Y.default)(this.data,r,null)}findFirstErrorReport(){for(let e of this.forms){let r=e.findFirstErrorReport();if(r)return r}return null}clearErrors(){for(let e of this.forms)e.clearCustomErrors();for(let e of this.collectionErrorsList.values())for(;e.firstElementChild;)e.removeChild(e.firstElementChild)}},W=Symbol("DjangoFormset"),Fe=class extends HTMLElement{constructor(){super();this[W]=new ot(this)}static get observedAttributes(){return["endpoint","withhold-messages","force-submission"]}connectedCallback(){this[W].connectedCallback()}async submit(r){return this[W].submit(r)}async abort(){return this[W].abort()}async reset(){return this[W].resetToInitial()}};W;window.addEventListener("DOMContentLoaded",t=>{let e=pt.convertPseudoClasses(),r=Array();document.querySelector('select[is="django-selectize"]')&&r.push(new Promise((n,o)=>{import("./DjangoSelectize-YPADGLM3.js").then(({DjangoSelectizeElement:i})=>{window.customElements.define("django-selectize",i,{extends:"select"}),window.customElements.whenDefined("django-selectize").then(()=>n())}).catch(i=>o(i))})),document.querySelector("django-sortable-select")?r.push(new Promise((n,o)=>{import("./SortableSelect-7BSN3ELN.js").then(({SortableSelectElement:i})=>{window.customElements.define("django-sortable-select",i),import("./DualSelector-UFI7QTDL.js").then(({DualSelectorElement:a})=>{window.customElements.define("django-dual-selector",a,{extends:"select"}),Promise.all([window.customElements.whenDefined("django-sortable-select"),window.customElements.whenDefined("django-dual-selector")]).then(()=>n())}).catch(a=>o(a))}).catch(i=>o(i))})):document.querySelector('select[is="django-dual-selector"]')&&r.push(new Promise((n,o)=>{import("./DualSelector-UFI7QTDL.js").then(({DualSelectorElement:i})=>{window.customElements.define("django-dual-selector",i,{extends:"select"}),window.customElements.whenDefined("django-dual-selector").then(()=>n())}).catch(i=>o(i))})),document.querySelector('textarea[is="django-richtext"]')&&r.push(new Promise((n,o)=>{import("./RichtextArea-BMLDNNFX.js").then(({RichTextAreaElement:i})=>{window.customElements.define("django-richtext",i,{extends:"textarea"}),window.customElements.whenDefined("django-richtext").then(()=>n())}).catch(i=>o(i))})),document.querySelector('input[is="django-slug"]')&&r.push(new Promise((n,o)=>{import("./DjangoSlug-J3GKZI4Z.js").then(({DjangoSlugElement:i})=>{window.customElements.define("django-slug",i,{extends:"input"}),window.customElements.whenDefined("django-slug").then(()=>n())}).catch(i=>o(i))})),Promise.all(r).then(()=>{window.customElements.define("django-formset",Fe),e.remove()}).catch(n=>console.error(`Failed to initialize django-formset: ${n}`))});
//# sourceMappingURL=django-formset.js.map

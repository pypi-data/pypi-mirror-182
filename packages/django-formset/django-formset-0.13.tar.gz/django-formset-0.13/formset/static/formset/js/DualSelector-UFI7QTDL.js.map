{
  "version": 3,
  "sources": ["../../../../client/django-formset/DualSelector.ts"],
  "sourcesContent": ["import { IncompleteSelect } from './IncompleteSelect';\nimport { SortableSelectElement } from './SortableSelect';\nimport { StyleHelpers } from \"./helpers\";\nimport template from 'lodash.template';\nimport styles from \"./SortableSelect.scss\";\n\n\nexport class DualSelector extends IncompleteSelect {\n\tprivate readonly selectorElement: HTMLSelectElement;\n\tprivate readonly declaredStyles: HTMLStyleElement;\n\tprivate readonly containerElement: HTMLElement | null;\n\tprivate readonly searchLeftInput?: HTMLInputElement;\n\tprivate readonly searchRightInput?: HTMLInputElement;\n\tprivate readonly selectLeftElement: HTMLSelectElement;\n\tprivate readonly selectRightElement: HTMLSelectElement | SortableSelectElement;\n\tprivate readonly moveAllRightButton: HTMLButtonElement;\n\tprivate readonly moveSelectedRightButton: HTMLButtonElement;\n\tprivate readonly moveAllLeftButton: HTMLButtonElement;\n\tprivate readonly moveSelectedLeftButton: HTMLButtonElement;\n\tprivate readonly undoButton?: HTMLButtonElement;\n\tprivate readonly redoButton?: HTMLButtonElement;\n\tprivate historicalValues: string[][] = [];\n\tprivate historyCursor: number = 0;\n\tprivate lastRemoteQuery?: string;\n\tprivate readonly renderNoResults: Function;\n\n\tconstructor(selectorElement: HTMLSelectElement, name: string) {\n\t\tsuper(selectorElement);\n\t\tthis.declaredStyles = document.createElement('style');\n\t\tthis.declaredStyles.innerText = styles;\n\t\tdocument.head.appendChild(this.declaredStyles);\n\n\t\tthis.selectorElement = selectorElement;\n\t\tthis.containerElement = this.fieldGroup.querySelector('.dj-dual-selector');\n\t\tselectorElement.setAttribute('multiple', 'multiple');\n\t\tconst inputs = this.fieldGroup.querySelectorAll('input[type=\"text\"]');\n\t\tif (inputs.length === 2) {\n\t\t\tthis.searchLeftInput = inputs[0] as HTMLInputElement;\n\t\t\tthis.searchRightInput = inputs[1] as HTMLInputElement;\n\t\t\tthis.searchLeftInput.addEventListener('input', evt => this.leftLookup());\n\t\t\tthis.searchRightInput.addEventListener('input', evt => this.rightLookup());\n\t\t}\n\t\tconst selectors = this.fieldGroup.querySelectorAll(`select:not([is=\"${name}\"])`);\n\t\tif (selectors.length >= 1) {\n\t\t\tthis.selectLeftElement = selectors.item(0) as HTMLSelectElement;\n\t\t\tif (selectors.length === 2) {\n\t\t\t\tthis.selectRightElement = selectors.item(1) as HTMLSelectElement;\n\t\t\t} else {\n\t\t\t\tconst selector = this.fieldGroup.querySelector('django-sortable-select');\n\t\t\t\tthis.selectRightElement = selector as SortableSelectElement;\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new Error(`<select is=\"${name}\"> requires two <select>-elements`);\n\t\t}\n\t\tthis.moveAllRightButton = this.fieldGroup.querySelector('button.dj-move-all-right') as HTMLButtonElement;\n\t\tthis.moveSelectedRightButton = this.fieldGroup.querySelector('button.dj-move-selected-right') as HTMLButtonElement;\n\t\tthis.moveSelectedLeftButton = this.fieldGroup.querySelector('button.dj-move-selected-left') as HTMLButtonElement;\n\t\tthis.moveAllLeftButton = this.fieldGroup.querySelector('button.dj-move-all-left') as HTMLButtonElement;\n\t\tthis.undoButton = this.fieldGroup.querySelector('button.dj-undo-selected') as HTMLButtonElement;\n\t\tthis.redoButton = this.fieldGroup.querySelector('button.dj-redo-selected') as HTMLButtonElement;\n\t\tthis.selectorElement.classList.add('dj-concealed');\n\t\tconst templ = selectorElement.parentElement?.querySelector('template.select-no-results');\n\t\tthis.renderNoResults = (data: any) => templ ? template(templ.innerHTML)(data) : \"No results\";\n\t\tthis.installEventHandlers();\n\t\tthis.initialize();\n\t\tthis.transferStyles();\n\t\tthis.setButtonsState();\n\t}\n\n\tprivate installEventHandlers() {\n\t\tthis.selectLeftElement.addEventListener('focus', this.touch);\n\t\tthis.selectLeftElement.addEventListener('dblclick', evt => this.moveOptionRight(evt.target));\n\t\tthis.selectLeftElement.addEventListener('scroll', evt => this.selectLeftScrolled());\n\t\tthis.selectRightElement.addEventListener('focus', this.touch);\n\t\tthis.selectRightElement.addEventListener('dblclick', evt => this.moveOptionLeft(evt.target));\n\t\tthis.selectRightElement.addEventListener('options-sorted', evt => this.optionsSorted());\n\t\tthis.moveAllRightButton?.addEventListener('click', evt => this.moveAllOptionsRight());\n\t\tthis.moveSelectedRightButton?.addEventListener('click', evt => this.moveSelectedOptionsRight());\n\t\tthis.moveSelectedLeftButton?.addEventListener('click', evt => this.moveSelectedOptionsLeft());\n\t\tthis.moveAllLeftButton?.addEventListener('click', evt => this.moveAllOptionsLeft());\n\t\tthis.undoButton?.addEventListener('click', evt => this.unOrRedo(-1));\n\t\tthis.redoButton?.addEventListener('click', evt => this.unOrRedo(+1));\n\t}\n\n\tprivate initialize() {\n\t\tconst initialValues: string[] = [];\n\t\tconst optionElemens = this.selectorElement.querySelectorAll(':scope > option') as NodeListOf<HTMLOptionElement>;\n\t\toptionElemens.forEach(option => {\n\t\t\tconst clone = option.cloneNode() as HTMLOptionElement;\n\t\t\tif (option.selected) {\n\t\t\t\toption.selected = false;\n\t\t\t\tthis.selectRightElement.add(option);\n\t\t\t\tinitialValues.push(option.value);\n\t\t\t} else {\n\t\t\t\tthis.selectLeftElement.add(option);\n\t\t\t}\n\t\t\tthis.selectorElement.add(clone);  // add clone without inner text\n\t\t});\n\t\tconst optionGroupElements = this.selectorElement.querySelectorAll(':scope > optgroup') as NodeListOf<HTMLOptGroupElement>;\n\t\toptionGroupElements.forEach(optGroupElement => {\n\t\t\tconst selectedOptions = optGroupElement.querySelectorAll('option:checked') as NodeListOf<HTMLOptionElement>;\n\t\t\tif (selectedOptions.length > 0) {\n\t\t\t\tconst newOptGroup = document.createElement('optgroup');\n\t\t\t\tnewOptGroup.label = optGroupElement.label;\n\t\t\t\tthis.selectRightElement.add(newOptGroup);\n\t\t\t\tselectedOptions.forEach(option => {\n\t\t\t\t\tconst clone = option.cloneNode() as HTMLOptionElement;\n\t\t\t\t\toption.selected = false;\n\t\t\t\t\tnewOptGroup.appendChild(option);\n\t\t\t\t\tinitialValues.push(option.value);\n\t\t\t\t\tthis.selectorElement.add(clone);  // add clone without inner text\n\t\t\t\t});\n\t\t\t}\n\t\t\tconst unselectedOptions = optGroupElement.querySelectorAll('option:not(:checked)');\n\t\t\tif (unselectedOptions.length > 0) {\n\t\t\t\tconst newOptGroup = document.createElement('optgroup');\n\t\t\t\tnewOptGroup.label = optGroupElement.label;\n\t\t\t\tthis.selectLeftElement.add(newOptGroup);\n\t\t\t\tunselectedOptions.forEach(option => {\n\t\t\t\t\tconst clone = option.cloneNode() as HTMLOptionElement;\n\t\t\t\t\tnewOptGroup.appendChild(option);\n\t\t\t\t\tthis.selectorElement.add(clone);  // add clone without inner text\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.selectorElement.removeChild(optGroupElement);\n\t\t});\n\t\tthis.historicalValues.push(initialValues);\n\t\tthis.setHistoryCursor(0);\n\t\tif (this.selectRightElement instanceof SortableSelectElement) {\n\t\t\tthis.selectRightElement.initialize(this.selectLeftElement);\n\t\t}\n\t}\n\n\tprivate addNoResultsOption(selectElement: HTMLSelectElement | SortableSelectElement, query: string) {\n\t\tconst option = new Option(this.renderNoResults({input: query}));\n\t\toption.disabled = true;\n\t\tselectElement.add(option);\n\t}\n\n\tprivate addOptionToSelectElement(option: OptionData, target: HTMLSelectElement | SortableSelectElement) {\n\t\tif (this.selectorElement.querySelector(`option[value=\"${option.id}\"]`))\n\t\t\treturn;\n\t\tconst newOptionElement = new Option(option.label, option.id);\n\t\tif (typeof option.optgroup === 'string') {\n\t\t\tconst optGroupElement = target.querySelector(`optgroup[label=\"${option.optgroup}\"]`);\n\t\t\tif (optGroupElement instanceof HTMLOptGroupElement) {\n\t\t\t\toptGroupElement.appendChild(newOptionElement);\n\t\t\t} else {\n\t\t\t\tconst newOptGroupElement = document.createElement('optgroup');\n\t\t\t\tnewOptGroupElement.label = option.optgroup;\n\t\t\t\tnewOptGroupElement.appendChild(newOptionElement);\n\t\t\t\ttarget.add(newOptGroupElement);\n\t\t\t}\n\t\t} else {\n\t\t\ttarget.add(newOptionElement);\n\t\t}\n\t\tthis.selectorElement.add(newOptionElement.cloneNode() as HTMLOptionElement);\n\t}\n\n\tprivate async selectLeftScrolled() {\n\t\tif (!this.isIncomplete)\n\t\t\treturn;\n\t\tconst selectLeftScroll = this.selectLeftElement.scrollHeight - this.selectLeftElement.scrollTop;\n\t\tif (selectLeftScroll <= this.selectLeftElement.offsetHeight) {\n\t\t\t// triggers whenever the last <option>-element becomes visible inside its parent <select>\n\t\t\tawait this.remoteLookup();\n\t\t}\n\t}\n\n\tprivate async remoteLookup() {\n\t\tlet query: string;\n\t\tconst searchString = this.searchLeftInput?.value;\n\t\tif (searchString) {\n\t\t\tconst offset = this.selectLeftElement.querySelectorAll('option:not([hidden])').length;\n\t\t\tquery = `query=${searchString}&offset=${offset}`;\n\t\t} else {\n\t\t\tquery = `offset=${this.selectorElement.childElementCount}`;\n\t\t}\n\t\tif (this.lastRemoteQuery === query)\n\t\t\treturn;\n\t\tthis.lastRemoteQuery = query;\n\t\tawait this.loadOptions(query, (options: Array<OptionData>) => options.forEach(option => {\n\t\t\tthis.addOptionToSelectElement(option, this.selectLeftElement);\n\t\t}));\n\t}\n\n\tprivate selectorChanged() {\n\t\tthis.selectorElement.querySelectorAll('option').forEach(option => {\n\t\t\toption.selected = !!this.selectRightElement.querySelector(`option[value=\"${option.value}\"]`);\n\t\t});\n\t\tthis.setButtonsState();\n\t\tthis.containerElement?.classList.toggle('invalid', !this.selectorElement.checkValidity());\n\t\tthis.selectorElement.dispatchEvent(new Event('change'));\n\t}\n\n\tprivate setButtonsState() {\n\t\tlet disabled = !this.selectLeftElement.querySelector('option:not([hidden])');\n\t\tthis.moveAllRightButton.disabled = disabled;\n\t\tthis.moveSelectedRightButton.disabled = disabled;\n\t\tdisabled = !this.selectRightElement.querySelector('option:not([hidden])');\n\t\tthis.moveAllLeftButton.disabled = disabled;\n\t\tthis.moveSelectedLeftButton.disabled = disabled;\n\t}\n\n\tprivate clearSearchFields() {\n\t\tif (this.searchLeftInput) {\n\t\t\tthis.searchLeftInput.value = '';\n\t\t}\n\t\tif (this.searchRightInput) {\n\t\t\tthis.searchRightInput.value = '';\n\t\t}\n\t\tthis.selectLeftElement.querySelector('option[disabled]')?.remove();\n\t\tthis.selectRightElement.querySelector('option[disabled]')?.remove();\n\t\tthis.selectLeftElement.querySelectorAll('option').forEach(o => o.hidden = false);\n\t\tthis.selectRightElement.querySelectorAll('option').forEach(o => o.hidden = false);\n\t}\n\n\tprivate optionsMoved() {\n\t\tconst rightOptions = Array.from(this.selectRightElement.querySelectorAll('option'));\n\t\tthis.historicalValues.splice(this.historyCursor + 1);\n\t\tthis.historicalValues.push(rightOptions.map(o => o.value));\n\t\tthis.setHistoryCursor(this.historicalValues.length - 1);\n\t\tthis.selectorChanged();\n\t}\n\n\tprivate optionsSorted() {\n\t\tthis.selectorElement.querySelectorAll('option:checked').forEach(o => o.remove());\n\t\tthis.selectRightElement.querySelectorAll('option').forEach(optionElement => {\n\t\t\tconst clone = optionElement.cloneNode() as HTMLOptionElement;\n\t\t\tclone.selected = true;\n\t\t\tthis.selectorElement.add(clone);\n\t\t});\n\t\tthis.optionsMoved();\n\t}\n\n\tprivate moveOptionToSelectElement(optionElement: HTMLOptionElement, selectElement: HTMLSelectElement | SortableSelectElement) {\n\t\tconst sourceOptGroupElement = optionElement.parentElement;\n\t\tif (sourceOptGroupElement instanceof HTMLOptGroupElement) {\n\t\t\tconst targetOptGroupElement = selectElement.querySelector(`optgroup[label=\"${sourceOptGroupElement.label}\"]`);\n\t\t\tif (targetOptGroupElement instanceof HTMLOptGroupElement) {\n\t\t\t\ttargetOptGroupElement.appendChild(optionElement);\n\t\t\t\ttargetOptGroupElement.hidden = false;\n\t\t\t} else {\n\t\t\t\tconst newOptGroupElement = document.createElement('optgroup');\n\t\t\t\tnewOptGroupElement.label = sourceOptGroupElement.label;\n\t\t\t\tnewOptGroupElement.appendChild(optionElement)\n\t\t\t\tselectElement.add(newOptGroupElement);\n\t\t\t}\n\t\t\tif (!sourceOptGroupElement.querySelector('option')) {\n\t\t\t\t// remove empty <optgroup>-element\n\t\t\t\tsourceOptGroupElement.remove();\n\t\t\t}\n\t\t} else {\n\t\t\tselectElement.add(optionElement);\n\t\t}\n\t}\n\n\tprivate async moveOptionRight(target: EventTarget | null) {\n\t\tif (target instanceof HTMLOptionElement) {\n\t\t\tthis.moveOptionToSelectElement(target, this.selectRightElement);\n\t\t\tawait this.selectLeftScrolled();\n\t\t\tthis.hideOptionGroups(this.selectLeftElement);\n\t\t\tthis.optionsMoved();\n\t\t}\n\t}\n\n\tprivate async moveAllOptionsRight() {\n\t\tthis.selectLeftElement.querySelectorAll('option:not([hidden])').forEach(option => {\n\t\t\tthis.moveOptionToSelectElement(option as HTMLOptionElement, this.selectRightElement);\n\t\t});\n\t\tthis.clearSearchFields();\n\t\tawait this.selectLeftScrolled();\n\t\tthis.optionsMoved();\n\t}\n\n\tprivate moveSelectedOptionsRight() {\n\t\tthis.selectLeftElement.querySelectorAll('option:checked').forEach(option => {\n\t\t\tthis.moveOptionToSelectElement(option as HTMLOptionElement, this.selectRightElement);\n\t\t});\n\t\tthis.hideOptionGroups(this.selectLeftElement);\n\t\tthis.optionsMoved();\n\t}\n\n\tprivate moveSelectedOptionsLeft() {\n\t\tthis.selectRightElement.querySelectorAll('option:checked').forEach(option => {\n\t\t\tthis.moveOptionToSelectElement(option as HTMLOptionElement, this.selectLeftElement);\n\t\t});\n\t\tthis.hideOptionGroups(this.selectRightElement);\n\t\tthis.optionsMoved();\n\t}\n\n\tprivate moveAllOptionsLeft() {\n\t\tthis.selectRightElement.querySelectorAll('option:not([hidden])').forEach(option => {\n\t\t\tthis.moveOptionToSelectElement(option as HTMLOptionElement, this.selectLeftElement);\n\t\t});\n\t\tthis.clearSearchFields();\n\t\tthis.optionsMoved();\n\t}\n\n\tprivate moveOptionLeft(target: EventTarget | null) {\n\t\tif (target instanceof HTMLOptionElement) {\n\t\t\tthis.moveOptionToSelectElement(target, this.selectLeftElement);\n\t\t\tthis.hideOptionGroups(this.selectRightElement);\n\t\t\tthis.optionsMoved();\n\t\t}\n\t}\n\n\tprivate hideOptionGroups(selectElement: HTMLSelectElement | SortableSelectElement) {\n\t\tselectElement.querySelectorAll('optgroup').forEach(optGroup => {\n\t\t\toptGroup.hidden = !optGroup.querySelector('option:not([hidden])');\n\t\t});\n\t}\n\n\tprivate async leftLookup() {\n\t\tconst query = this.searchLeftInput?.value ?? '';\n\t\tlet numFoundOptions = this.lookup(this.selectLeftElement, query);\n\t\t// first we look up for matching options ...\n\t\tif (this.isIncomplete && numFoundOptions < this.selectLeftElement.size) {\n\t\t\t// if we find less options than the <select> element can depict,\n\t\t\t// query for additional matching options from the server.\n\t\t\tawait this.remoteLookup();\n\t\t\tnumFoundOptions = this.lookup(this.selectLeftElement, query);\n\t\t}\n\t\tthis.setButtonsState();\n\t\tif (numFoundOptions === 0) {\n\t\t\tthis.addNoResultsOption(this.selectLeftElement, query);\n\t\t}\n\t}\n\n\tprivate rightLookup() {\n\t\tconst query = this.searchRightInput?.value ?? '';\n\t\tif (this.lookup(this.selectRightElement, query) === 0) {\n\t\t\tthis.addNoResultsOption(this.selectRightElement, query);\n\t\t}\n\t}\n\n\tprivate lookup(selectElement: HTMLSelectElement | SortableSelectElement, query: string) : number {\n\t\tselectElement.querySelector('option[disabled]')?.remove();\n\t\tconst optionElements = selectElement.querySelectorAll('option');\n\t\tif (query) {\n\t\t\tquery = query.toLowerCase();\n\t\t\tlet hiddenOptions = 0;\n\t\t\toptionElements.forEach(option => {\n\t\t\t\tif (option.hidden = (option.text.toLowerCase().indexOf(query) === -1)) {\n\t\t\t\t\thiddenOptions++;\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.hideOptionGroups(selectElement);\n\t\t\treturn optionElements.length - hiddenOptions;\n\t\t}\n\t\toptionElements.forEach(option => option.hidden = false);\n\t\tselectElement.querySelectorAll('optgroup').forEach(optgroup => optgroup.hidden = false);\n\t\treturn optionElements.length;\n\t}\n\n\tprivate unOrRedo(direction: number) {\n\t\tthis.clearSearchFields();\n\t\tconst nextCursor = this.historyCursor + direction;\n\t\tif (nextCursor < 0 || nextCursor >= this.historicalValues.length)\n\t\t\treturn;\n\t\tconst nextValues = this.historicalValues[nextCursor];\n\n\t\tconst rightOptions = Array.from(this.selectRightElement.querySelectorAll('option'));\n\t\trightOptions.filter(o => nextValues.indexOf(o.value) === -1).forEach(optionElement => {\n\t\t\tthis.moveOptionToSelectElement(optionElement, this.selectLeftElement)\n\t\t});\n\t\tconst leftOptions = Array.from(this.selectLeftElement.querySelectorAll('option'));\n\t\tleftOptions.filter(o => nextValues.indexOf(o.value) !== -1).forEach(optionElement => {\n\t\t\tthis.moveOptionToSelectElement(optionElement, this.selectRightElement)\n\t\t});\n\n\t\tif (this.selectRightElement.tagName === 'DJANGO-SORTABLE-SELECT') {\n\t\t\tnextValues.forEach(val => {\n\t\t\t\tconst optionElem = this.selectRightElement.querySelector(`:scope > option[value=\"${val}\"]`);\n\t\t\t\tif (optionElem) {\n\t\t\t\t\tthis.selectRightElement.insertAdjacentElement('beforeend', optionElem);\n\t\t\t\t} else {\n\t\t\t\t\tconst optionElem = this.selectRightElement.querySelector(`:scope > optgroup > option[value=\"${val}\"]`);\n\t\t\t\t\tif (optionElem) {\n\t\t\t\t\t\toptionElem.parentElement?.insertAdjacentElement('beforeend', optionElem);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tthis.optionsSorted();\n\t\t}\n\t\tthis.setHistoryCursor(nextCursor);\n\t\tthis.selectorChanged();\n\t}\n\n\tprivate setHistoryCursor(historyCursor: number) {\n\t\tthis.historyCursor = historyCursor;\n\t\tif (this.undoButton) {\n\t\t\tthis.undoButton.disabled = historyCursor === 0;\n\t\t}\n\t\tif (this.redoButton) {\n\t\t\tthis.redoButton.disabled = historyCursor === this.historicalValues.length - 1;\n\t\t}\n\t}\n\n\tprivate transferStyles() {\n\t\tconst sheet = this.declaredStyles.sheet!;\n\n\t\t// set background-color to transparent, so that the shadow on a focused input/select field is not cropped\n\t\tlet extraStyles = StyleHelpers.extractStyles(this.selectLeftElement, ['background-color']);\n\t\tsheet.insertRule(`django-formset django-field-group .dj-dual-selector .left-column{${extraStyles}}`, 0);\n\t\textraStyles = StyleHelpers.extractStyles(this.selectRightElement, ['background-color']);\n\t\tsheet.insertRule(`django-formset django-field-group .dj-dual-selector .right-column{${extraStyles}}`, 1);\n\t\tsheet.insertRule('.dj-dual-selector select, .dj-dual-selector input{background-color: transparent;}', 2);\n\n\t\t// prevent <select multiple> to have different heights depending on the having at least one <option>\n\t\textraStyles = StyleHelpers.extractStyles(this.selectLeftElement, ['height']);\n\t\tsheet.insertRule(`django-formset django-field-group .dj-dual-selector select{${extraStyles}}`, 3);\n\t}\n\n\tprotected formResetted(event: Event) {\n\t\tthis.clearSearchFields();\n\t\tconst initialValues = this.historicalValues[0];\n\t\tthis.historicalValues.splice(1);\n\t\tthis.setHistoryCursor(0);\n\t\tconst rightOptions = Array.from(this.selectRightElement.querySelectorAll('option'));\n\t\trightOptions.filter(o => initialValues.indexOf(o.value) === -1).forEach(optionElement => {\n\t\t\tthis.moveOptionToSelectElement(optionElement, this.selectLeftElement)\n\t\t});\n\t\tconst leftOptions = Array.from(this.selectLeftElement.querySelectorAll('option'))\n\t\tleftOptions.filter(o => initialValues.indexOf(o.value) !== -1).forEach(optionElement => {\n\t\t\tthis.moveOptionToSelectElement(optionElement, this.selectRightElement)\n\t\t});\n\t\tthis.selectorChanged();\n\t\tthis.containerElement?.classList.remove('invalid');\n\t}\n\n\tprotected formSubmitted(event: Event) {\n\t\tthis.clearSearchFields();\n\t\tthis.historicalValues.splice(0, this.historicalValues.length - 1);\n\t\tthis.setHistoryCursor(0);\n\t}\n\n\tpublic getValue() : string[] {\n\t\tconst optionElements = Array.from(this.selectorElement.querySelectorAll('option:checked'));\n\t\treturn (optionElements as Array<HTMLOptionElement>).map(o => o.value);\n\t}\n}\n\nconst DS = Symbol('DualSelectorElement');\n\nexport class DualSelectorElement extends HTMLSelectElement {\n\tprivate [DS]?: DualSelector;  // hides internal implementation\n\n\tconnectedCallback() {\n\t\tthis[DS] = new DualSelector(this, 'django-dual-selector');\n\t}\n\n\tpublic get value() : any {\n\t\treturn this[DS]?.getValue();\n\t}\n}\n"],
  "mappings": "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",
  "names": ["import_lodash", "DualSelector", "IncompleteSelect", "selectorElement", "name", "_a", "SortableSelect_default", "inputs", "evt", "selectors", "selector", "templ", "data", "template", "_b", "_c", "_d", "_e", "_f", "initialValues", "option", "clone", "optGroupElement", "selectedOptions", "newOptGroup", "unselectedOptions", "SortableSelectElement", "selectElement", "query", "target", "newOptionElement", "newOptGroupElement", "searchString", "offset", "options", "disabled", "o", "rightOptions", "optionElement", "sourceOptGroupElement", "targetOptGroupElement", "optGroup", "numFoundOptions", "optionElements", "hiddenOptions", "optgroup", "direction", "nextCursor", "nextValues", "val", "optionElem", "historyCursor", "sheet", "extraStyles", "StyleHelpers", "event", "DS", "DualSelectorElement"]
}

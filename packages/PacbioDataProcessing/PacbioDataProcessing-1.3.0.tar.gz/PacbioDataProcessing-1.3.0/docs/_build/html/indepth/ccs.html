
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>CCS &#8212; PacBio Data Processing 1.2.3 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="kineticsTools" href="kinetics_tools.html" />
    <link rel="prev" title="Aligners" href="aligners.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="ccs">
<span id="about-ccs"></span><h1>CCS<a class="headerlink" href="#ccs" title="Permalink to this headline">¶</a></h1>
<p>The <a class="reference internal" href="../usage/sm_analysis.html#sm-analysis"><span class="std std-ref">sm-analysis program</span></a> uses the <code class="docutils literal notranslate"><span class="pre">ccs</span></code> program to
obtain highly accurate reads from the input BAM that are taken as the
true sequences and positions within the reference for each molecule in
the analysis done by the <a class="reference internal" href="../usage/sm_analysis.html#sm-analysis"><span class="std std-ref">sm-analysis program</span></a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">ccs</span></code> is a <em>runtime</em> dependency: it must be accessible at <em>latest</em> at
runtime and it is called on demand: if its output is already there, it will
not be computed again.</p>
<p>By default, <code class="docutils literal notranslate"><span class="pre">ccs</span></code> is searched for in the <a class="reference internal" href="glossary.html#term-PATH"><span class="xref std std-term">PATH</span></a>. If it is
not found in the <a class="reference internal" href="glossary.html#term-PATH"><span class="xref std std-term">PATH</span></a>, you will receive a common runtime
error message:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="o">[</span>CRITICAL<span class="o">]</span> <span class="o">[</span>Errno <span class="m">2</span><span class="o">]</span> No such file or directory: <span class="s1">&#39;ccs&#39;</span>
</pre></div>
</div>
<p>and the <a class="reference internal" href="../usage/sm_analysis.html#sm-analysis"><span class="std std-ref">sm-analysis program</span></a> itself will terminate.</p>
<p>In that case, the instructions in the following sections can help you.</p>
<section id="installing-ccs">
<h2>Installing CCS<a class="headerlink" href="#installing-ccs" title="Permalink to this headline">¶</a></h2>
<p>An easy way to install the <code class="docutils literal notranslate"><span class="pre">ccs</span></code> program is with <code class="docutils literal notranslate"><span class="pre">conda</span></code>.
Have a look at <a class="reference internal" href="bioconda.html#setting-up-bioconda"><span class="std std-ref">Setting up Bioconda</span></a>, and follow the instructions, if
you haOnce those steps are followed,
and the resulting <code class="docutils literal notranslate"><span class="pre">conda</span></code> environment is <em>active</em>, install <code class="docutils literal notranslate"><span class="pre">pbccs</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>conda install pbccs
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Notice that, contrary to the suggestion given in <a class="reference external" href="https://github.com/PacificBiosciences/pbbioconda">PacBio &amp; Bioconda</a>,
the explicit selection of the <code class="docutils literal notranslate"><span class="pre">bioconda</span></code> channel by means of the <code class="docutils literal notranslate"><span class="pre">-c</span></code>
option of <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span></code> (e.g., <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">-c</span> <span class="pre">bioconda</span> <span class="pre">...</span></code>)
triggers a dependency error. DO NOT USE the <code class="docutils literal notranslate"><span class="pre">-c</span> <span class="pre">bioconda</span></code> option,
just run <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">install</span> <span class="pre">...</span></code> instead, as explained in the main text.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>An alternative way to install <code class="docutils literal notranslate"><span class="pre">pbindex</span></code> is through <a class="reference internal" href="pacbio_tools.html#smrt-link"><span class="std std-ref">SMRT-link software server tool</span></a>.</p>
</div>
<p>Upon success, you will be able to pass the path to the <code class="docutils literal notranslate"><span class="pre">ccs</span></code>
executable to <a class="reference internal" href="../usage/sm_analysis.html#sm-analysis"><span class="std std-ref">sm-analysis</span></a> if needed (see
below for details).</p>
</section>
<section id="using-ccs-from-sm-analysis">
<h2>Using ccs from <cite>sm-analysis</cite><a class="headerlink" href="#using-ccs-from-sm-analysis" title="Permalink to this headline">¶</a></h2>
<p>Let us assume that <strong>PacBio Data Processing</strong> was installed inside a virtual environment
located in:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>/home/dave/.venvs/pdp
</pre></div>
</div>
<p>and let us assume that <code class="docutils literal notranslate"><span class="pre">pbbioconda</span></code> was installed in:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>/home/dave/miniconda3
</pre></div>
</div>
<p>then, after activating the <strong>PacBio Data Processing</strong>’s virtual environment:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span><span class="nb">source</span> /home/dave/.venvs/pdp/bin/activate
</pre></div>
</div>
<p>you can tell <code class="docutils literal notranslate"><span class="pre">sm-analysis</span></code> about <code class="docutils literal notranslate"><span class="pre">ccs</span></code> by using a command
line option (<a class="reference internal" href="../usage/sm_analysis.html#cmdoption-sm-analysis-c"><code class="xref std std-option docutils literal notranslate"><span class="pre">sm-analysis</span> <span class="pre">-c</span></code></a>) as follows:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sm-analysis --ccs-path /home/dave/miniconda3/bin/ccs
</pre></div>
</div>
</section>
<section id="issues">
<h2>Issues<a class="headerlink" href="#issues" title="Permalink to this headline">¶</a></h2>
<section id="multimapping">
<h3>Multimapping<a class="headerlink" href="#multimapping" title="Permalink to this headline">¶</a></h3>
<p>In some cases an aligned CCS file presents multimapping. Two examples take from the
<code class="docutils literal notranslate"><span class="pre">st1A09</span></code> file:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>m54099_200720_153206/4194505/ccs        <span class="m">0</span>       U00096.3        <span class="m">392180</span>  <span class="m">0</span>       <span class="nv">150</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       ATCTGTACGTAAGTACGTGATGTCTCCTGCCCACTTCT...
m54099_200720_153206/4194505/ccs        <span class="m">256</span>     U00096.3        <span class="m">1094716</span> <span class="m">0</span>       <span class="nv">150</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       ATCTGTACGTAAGTACGTGATGTCTCCTGCCCACTTCT...
m54099_200720_153206/4194505/ccs        <span class="m">272</span>     U00096.3        <span class="m">2170808</span> <span class="m">0</span>       <span class="nv">150</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       GGACTGAGGGCAAAGGCCTCCCGGAAGTTCAGCCCGGT...
m54099_200720_153206/4194505/ccs        <span class="m">272</span>     U00096.3        <span class="m">567414</span>  <span class="m">0</span>       <span class="nv">150</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       GGACTGAGGGCAAAGGCCTCCCGGAAGTTCAGCCCGGT...
m54099_200720_153206/4194505/ccs        <span class="m">272</span>     U00096.3        <span class="m">315863</span>  <span class="m">0</span>       <span class="nv">150</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       GGACTGAGGGCAAAGGCCTCCCGGAAGTTCAGCCCGGT...
...
m54099_200720_153206/4194627/ccs        <span class="m">0</span>       U00096.3        <span class="m">274198</span>  <span class="m">0</span>       <span class="nv">295</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       CCCTTGTATCTGGCTTTCACGAAGCCGAACTGTCGCTT...
m54099_200720_153206/4194627/ccs        <span class="m">256</span>     U00096.3        <span class="m">574834</span>  <span class="m">0</span>       <span class="nv">295</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       CCCTTGTATCTGGCTTTCACGAAGCCGAACTGTCGCTT...
m54099_200720_153206/4194627/ccs        <span class="m">256</span>     U00096.3        <span class="m">688094</span>  <span class="m">0</span>       <span class="nv">295</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       CCCTTGTATCTGGCTTTCACGAAGCCGAACTGTCGCTT...
m54099_200720_153206/4194627/ccs        <span class="m">272</span>     U00096.3        <span class="m">3130803</span> <span class="m">0</span>       <span class="nv">295</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       CGGCCAACGAGCATGACCTCAATCAGCTGGGTAATCTG...
m54099_200720_153206/4194627/ccs        <span class="m">256</span>     U00096.3        <span class="m">2101992</span> <span class="m">0</span>       <span class="nv">295</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       CCCTTGTATCTGGCTTTCACGAAGCCGAACTGTCGCTT...
m54099_200720_153206/4194627/ccs        <span class="m">256</span>     U00096.3        <span class="m">2289162</span> <span class="m">0</span>       <span class="nv">295</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       CCCTTGTATCTGGCTTTCACGAAGCCGAACTGTCGCTT...
m54099_200720_153206/4194627/ccs        <span class="m">272</span>     U00096.3        <span class="m">1396701</span> <span class="m">0</span>       <span class="nv">295</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       CGGCCAACGAGCATGACCTCAATCAGCTGGGTAATCTG...
m54099_200720_153206/4194627/ccs        <span class="m">272</span>     U00096.3        <span class="m">1300156</span> <span class="m">0</span>       <span class="nv">295</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       CGGCCAACGAGCATGACCTCAATCAGCTGGGTAATCTG...
m54099_200720_153206/4194627/ccs        <span class="m">256</span>     U00096.3        <span class="m">3365799</span> <span class="m">0</span>       <span class="nv">295</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       CCCTTGTATCTGGCTTTCACGAAGCCGAACTGTCGCTT...
m54099_200720_153206/4194627/ccs        <span class="m">256</span>     U00096.3        <span class="m">3652279</span> <span class="m">0</span>       <span class="nv">295</span><span class="o">=</span>    *       <span class="m">0</span>       <span class="m">0</span>       CCCTTGTATCTGGCTTTCACGAAGCCGAACTGTCGCTT...
</pre></div>
</div>
<p>How do we decide the position? In the current implementation, the first
subread of each molecule is taken (for details, see
<a class="reference internal" href="../devel/pacbio_data_processing.html#pacbio_data_processing.sm_analysis.map_molecules_with_highest_sim_ratio" title="pacbio_data_processing.sm_analysis.map_molecules_with_highest_sim_ratio"><code class="xref py py-func docutils literal notranslate"><span class="pre">pacbio_data_processing.sm_analysis.map_molecules_with_highest_sim_ratio()</span></code></a>),
because all the subreads are <em>perfect</em>. But notice that the positions (4th
column) differ.</p>
</section>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">PacBio Data Processing</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../readme.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart.html">Quickstart for the impatient</a></li>
<li class="toctree-l1"><a class="reference internal" href="../quickstart_9steps.html">Quickstart on a cluster</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usage/index.html">Usage</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../devel/index.html">Developer’s documentation</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Guides</a><ul>
      <li>Previous: <a href="aligners.html" title="previous chapter">Aligners</a></li>
      <li>Next: <a href="kinetics_tools.html" title="next chapter">kineticsTools</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021-2022, David Palao and David Velázquez.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.2.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/indepth/ccs.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>
(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4623],{16488:function(e,t,n){"use strict";n.d(t,{s:function(){return u}});var r=n(75568),i=n(43894),o=n(1396),a=n(12156),s=n(67294),c=n(58477),l=n(85893),u=function(e){var t=e.allColumns,n=e.selectedColumns,u=e.onChange,d=(0,s.useMemo)((function(){var e=new Map;return t.forEach((function(t){return e.set(t.name,!!n.find((function(e){return e.name===t.name})))})),e}),[t,n]),f=function(){d.forEach((function(e,t){return d.set(t,!1)})),u([])},p=function(e){var n,r=null!==(n=d.get(e.name))&&void 0!==n&&n;d.set(e.name,!r),u(t.filter((function(e){return d.get(e.name)})))};return(0,l.jsx)(r.v2,{children:function(e){var s=e.onClose;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(r.j2,{as:i.zx,rightIcon:(0,l.jsx)(c.mC,{}),variant:"outline",fontWeight:"normal","data-testid":"column-dropdown",children:"Columns"}),(0,l.jsx)(r.qy,{children:(0,l.jsxs)(o.xu,{px:2,children:[(0,l.jsxs)(o.xu,{display:"flex",justifyContent:"space-between",mb:2,children:[(0,l.jsx)(i.zx,{variant:"outline",size:"xs",onClick:f,"data-testid":"column-clear-btn",children:"Clear"}),(0,l.jsx)(i.zx,{size:"xs",colorScheme:"primary",onClick:s,"data-testid":"column-done-btn",children:"Done"})]}),(0,l.jsx)(a.cO,{colorScheme:"complimentary",children:(0,l.jsx)(o.Kq,{children:t.map((function(e){var t=n.filter((function(t){return t.name===e.name})).length>0;return(0,l.jsx)(a.XZ,{id:e.name,_hover:{bg:"gray.100"},isChecked:t,onChange:function(){return p(e)},"data-testid":"checkbox-".concat(e.name),children:e.name},e.name)}))})})]})})]})}})}},80649:function(e,t,n){"use strict";n.d(t,{Gn:function(){return l},zR:function(){return c}});var r=n(23296),i=n(1396),o=n(43894),a=n(58477),s=n(85893),c=function(e){var t=e.title,n=e.onDelete;return(0,s.jsxs)(r.OX,{py:2,display:"flex",alignItems:"center",children:[(0,s.jsx)(i.xv,{mr:"2",children:t}),n?(0,s.jsx)(o.hU,{"aria-label":"delete",icon:(0,s.jsx)(a.lr,{}),size:"xs",onClick:n,"data-testid":"delete-btn"}):null]})},l=function(e){var t=e.onClose,n=e.formId,i=e.isSaving;return(0,s.jsxs)(r.ze,{justifyContent:"flex-start",children:[(0,s.jsx)(o.zx,{onClick:t,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,s.jsx)(o.zx,{type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",form:n,isLoading:i,children:"Save"})]})};t.ZP=function(e){var t=e.header,n=e.description,c=e.isOpen,l=e.onClose,u=e.children,d=e.footer;return(0,s.jsxs)(r.dy,{placement:"right",isOpen:c,onClose:l,size:"lg",children:[(0,s.jsx)(r.P1,{}),(0,s.jsxs)(r.sc,{"data-testid":"edit-drawer-content",py:2,children:[(0,s.jsx)(i.xu,{display:"flex",justifyContent:"flex-end",mr:2,children:(0,s.jsx)(o.zx,{variant:"ghost",onClick:l,"data-testid":"close-drawer-btn",children:(0,s.jsx)(a.LG,{})})}),t,(0,s.jsxs)(r.Ng,{children:[n?(0,s.jsx)(i.xv,{fontSize:"sm",mb:4,children:n}):null,u]}),d]})]})}},99429:function(e,t,n){"use strict";n.d(t,{Y:function(){return a}});var r=n(18975),i=n(41086);r.registerLocale(i);var o=r.getNames("en",{select:"official"}),a=Object.keys(o).map((function(e){return{value:r.alpha2ToAlpha3(e),label:o[e]}}))},10846:function(e,t,n){"use strict";n.d(t,{V:function(){return f},t:function(){return d}});var r=n(59499),i=n(1396),o=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var c=function(e){var t=e.message;return(0,o.jsxs)(i.xv,{"data-testid":"toast-success-msg",children:[(0,o.jsx)("strong",{children:"Success:"})," ",t]})},l=function(e){var t=e.message;return(0,o.jsxs)(i.xv,{"data-testid":"toast-error-msg",children:[(0,o.jsx)("strong",{children:"Error:"})," ",t]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,o.jsx)(c,{message:e});return s(s({},u),{description:t})},f=function(e){var t=(0,o.jsx)(l,{message:e});return s(s({},u),{description:t,status:"error"})}},97589:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var r=function(e){var t=e.dataCategories,n=e.mostLikelyCategories;return null!==t&&void 0!==t&&t.length?t:null!==n&&void 0!==n&&n.length?[n.reduce((function(e,t){var n,r;return(null!==(n=t.confidence)&&void 0!==n?n:0)>(null!==(r=e.confidence)&&void 0!==r?r:0)?t:e})).fides_key]:[]}},77046:function(e,t,n){"use strict";var r=n(59499),i=n(4730),o=n(59252),a=n(85893),s=["name","onClose"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.name,n=e.onClose,r=(0,i.Z)(e,s),c=l({backgroundColor:"primary.400",color:"white","data-testid":"taxonomy-entity-".concat(t),width:"fit-content",size:"sm"},r);return n?(0,a.jsxs)(o.Vp,l(l({display:"flex",justifyContent:"space-between"},c),{},{children:[(0,a.jsx)(o.Sn,{children:t}),(0,a.jsx)(o.SD,{onClick:n,color:"white"})]})):(0,a.jsx)(o.Vp,l(l({},c),{},{children:t}))}},45009:function(e,t,n){"use strict";n.d(t,{C:function(){return r},P:function(){return i}});var r=function e(t,n){var r;if(null==n&&t.every((function(e){return void 0===e.parent_key})))r=t;else{var i=null!==n&&void 0!==n?n:null;r=t.filter((function(e){return e.parent_key===i}))}return r.map((function(n){var r,i=n.fides_key;return{value:n.fides_key,label:""===n.name||null==n.name?n.fides_key:n.name,description:n.description,children:e(t,i),is_default:null!==(r=n.is_default)&&void 0!==r&&r}}))},i=function(e){var t=e.split(".");return 1===t.length?"":t.slice(0,t.length-1).join(".")}},81586:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return ot}});var r=n(1396),i=n(77336),o=n(41664),a=n.n(o),s=n(11163),c=n(84247),l=n(38351),u=n(23597),d=n(67294),f=n(14416),p=n(16488),h=n(65028),j=n(41438),y=n(58183),b=n(50029),m=n(16835),x=n(87794),v=n.n(x),g=n(9555),O=n(52565),C=n(43894),k=n(65698),w=n(10846),P=n(23720),D=n(29112),S=n(59499),_=n(12902);function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Z=function(e,t,n){var r=e.collections.map((function(e,r){return r===n?t:e}));return z(z({},e),{collections:r})},A=function(e,t,n,r){var i=function(e,t,n){var r=e.fields.map((function(e,r){return r===n?t:e}));return z(z({},e),{fields:r})}(e.collections[n],t,r);return Z(e,i,n)},I=function(e,t){return(0,_.ZP)(e,(function(e){var n=new Map(t.collections.map((function(e){return[e.name,e]})));e.collections.forEach((function(e){var t,r=n.get(e.name),i=new Map(null===r||void 0===r||null===(t=r.fields)||void 0===t?void 0:t.map((function(e){return[e.name,e]})));e.fields.forEach((function(e){if(!(e.data_categories&&e.data_categories.length>0)){var t=i.get(e.name);if(t&&t.classifications.length>0){var n=t.classifications.reduce((function(e,t){var n,r;return(null!==(n=e.aggregated_score)&&void 0!==n?n:0)<(null!==(r=t.aggregated_score)&&void 0!==r?r:0)?t:e}));e.data_categories=[n.label]}}}))}))}))},F=function(e,t){var n=e.collections.filter((function(e,n){return n!==t}));return z(z({},e),{collections:n})},T=n(85893),L=function(){var e=(0,f.useSelector)(D.n0),t=(0,f.useSelector)(j.Bt),n=(0,f.useSelector)(j.lG),i=(0,D.TG)(),o=(0,m.Z)(i,2),a=o[0],s=o[1].isLoading,c=(0,j.MD)(),l=(0,m.Z)(c,2),u=l[0],p=l[1].isLoading,h=s||p,y=(0,g.pm)(),x=(0,d.useMemo)((function(){var e,t;return null!==(e=null===n||void 0===n||null===(t=n.fields)||void 0===t?void 0:t.reduce((function(e,t){return t.classifications.length>0?e+1:e}),0))&&void 0!==e?e:0}),[n]),S=function(){var n=(0,b.Z)(v().mark((function n(){var r,i,o;return v().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!h&&e&&t){n.next=2;break}return n.abrupt("return");case 2:return r=I(e,t),n.prev=3,n.next=6,a(r);case 6:if(i=n.sent,!(0,k.D4)(i)){n.next=10;break}return y((0,w.V)((0,k.e$)(i.error))),n.abrupt("return");case 10:return n.next=12,u({dataset_fides_key:e.fides_key,status:P.Wg.REVIEWED});case 12:if(o=n.sent,!(0,k.D4)(o)){n.next=16;break}return y((0,w.V)((0,k.e$)(o.error))),n.abrupt("return");case 16:y((0,w.t)("Dataset classified and approved")),n.next=22;break;case 19:n.prev=19,n.t0=n.catch(3),y((0,w.V)("".concat(n.t0)));case 22:case"end":return n.stop()}}),n,null,[[3,19]])})));return function(){return n.apply(this,arguments)}}();return t&&n&&t.status===P.Wg.COMPLETE?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(O.m$.p,{flexGrow:1,textAlign:"center",fontSize:"sm",color:"gray.600",children:[(0,T.jsx)(O.m$.span,{fontWeight:"bold",children:x})," ",1===x?"field has":"fields have"," been identified within this"," ",(0,T.jsx)(O.m$.span,{fontWeight:"bold",children:n.name})," ","table that are likely to contain personal data."]}),(0,T.jsx)(C.zx,{size:"sm",variant:"primary",flexShrink:0,onClick:S,isLoading:h,isDisabled:h,"data-testid":"approve-classification-btn",children:"Approve dataset classification"})]}):(0,T.jsx)(r.LZ,{})},q=n(35922),N=n(35839),M=n(59252),V=[{key:"aggregated",label:"Aggregated",styles:{backgroundColor:"green.500",color:"white"}},{key:"anonymized",label:"Anonymized",styles:{backgroundColor:"yellow.400",color:"gray.700"}},{key:"aggregated.anonymized",label:"Unlinked Pseudonymized",styles:{backgroundColor:"orange.300",color:"gray.700"}},{key:"aggregated.anonymized.unlinked_pseudonymized",label:"Pseudonymized",styles:{backgroundColor:"orange.500",color:"white"}},{key:"aggregated.anonymized.unlinked_pseudonymized.pseudonymized.identified",label:"Identified",styles:{backgroundColor:"red.600",color:"white"}}],W={tooltip:"A UI-friendly label for the Dataset."},Y={tooltip:"A human-readable description of the Dataset."},R={tooltip:"An optional string to describe the retention policy for a dataset. This field can also be applied more granularly at either the Collection or field level of a Dataset"},G={tooltip:"Arrays of Data Qualifier resources, identified by fides_key, that apply to all collections in the Dataset."},J={tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to all collections in the Dataset."},$={tooltip:"An optional array to identify any third countries where data is transited to. For consistency purposes, these fields are required to follow the Alpha-3 code set in ISO 3166-1"},Q={tooltip:"A human-readable description of the collection."},K={tooltip:"Arrays of Data Qualifier resources, identified by fides_key, that apply to all fields in the collection."},U={tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to all fields in the collection."},X={tooltip:"A human-readable description of the field."},B={tooltip:"A Data Qualifier that applies to this field. Note that this field holds a single value, therefore, the property name is singular."},H={tooltip:"Arrays of Data Category resources, identified by fides_key, that apply to this field."};function ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function te(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ee(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ne=function(e){var t=e.dataQualifierName,n=V.filter((function(e){return e.key===t}));if(0===n.length)return(0,T.jsx)(M.Vp,{children:t});var r=n[0],i=r.styles,o=r.label,a=r.key;return(0,T.jsx)(M.Vp,te(te({"data-testid":"identifiability-tag-".concat(a)},i),{},{children:o}))},re=n(77046),ie=function(e){var t=e.attribute,n=e.field,i=e.classifyField;if("data_qualifier"===t){var o=n.data_qualifier;return(0,T.jsx)(T.Fragment,{children:o?(0,T.jsx)(ne,{dataQualifierName:o}):null})}if("data_categories"===t){var a,s,c=(null!==(a=null===i||void 0===i?void 0:i.classifications)&&void 0!==a?a:[]).map((function(e){return e.label})),l=null!==(s=n.data_categories)&&void 0!==s?s:[],u=l.length>0?l:c;return(0,T.jsx)(N.u,{placement:"right",label:u===c?"Fides has generated these data categories for you. You can override them by modifying the field.":"",children:(0,T.jsx)(r.xu,{display:"inline-block",children:u.map((function(e){return(0,T.jsx)(r.xu,{mr:2,mb:2,children:(0,T.jsx)(re.Z,{name:e})},"".concat(n.name,"-").concat(e))}))})})}return(0,T.jsx)(T.Fragment,{children:n[t]})},oe=n(33578),ae=n(20650),se=n(80649),ce=n(82175),le=n(96016),ue=n(97589),de=n(64598),fe=n(13230),pe=n(75568),he=n(27812),je=n(12156),ye=n(58477),be=function(e){var t=e.split("."),n=[];return t.forEach((function(e){var t=n.length>0?n[n.length-1]:null;t?n.push("".concat(t,".").concat(e)):n.push(e)})),n},me=function(e,t){return e===t||!!e.startsWith("".concat(t,"."))},xe=function e(t,n,r){var i=null!==r&&void 0!==r?r:[];return t.forEach((function(t){t.children&&e(t.children,n,i),me(t.value,n)&&i.push(t)})),i},ve=function(e){var t=e.node,n=e.isChecked,i=e.onChecked,o=e.isExpanded,a=e.onExpanded,s=e.isIndeterminate,c=e.isDisabled,l=e.children,u=t.value,d=t.label,f=!!t.children&&t.children.length>0;return(0,T.jsxs)(r.xu,{children:[(0,T.jsxs)(r.xu,{display:"flex",justifyContent:"space-between",_hover:{backgroundColor:"gray.100",cursor:"pointer"},onClick:function(){return a(t)},children:[(0,T.jsx)(je.XZ,{colorScheme:"complimentary",value:u,isChecked:!s&&n,isIndeterminate:s,isDisabled:c,onChange:function(){return i(t)},mx:2,"data-testid":"checkbox-".concat(d),children:d}),f?(0,T.jsx)(C.hU,{"data-testid":"expand-".concat(d),"aria-label":o?"collapse":"expand",icon:o?(0,T.jsx)(ye.O1,{}):(0,T.jsx)(ye.mC,{}),variant:"ghost",onClick:function(){return a(t)},size:"sm"}):null]}),l&&(0,T.jsx)(r.xu,{ml:5,children:l})]})},ge=function(e){var t=e.nodes,n=e.selected,i=e.onSelected,o=(0,d.useState)([]),a=o[0],s=o[1],c=(0,d.useState)([]),l=c[0],u=c[1];(0,d.useEffect)((function(){var e=n.map((function(e){return be(e)})).reduce((function(e,t){return e.concat(t)}),[]),r=n.map((function(e){return xe(t,e)})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return e.value})),i=Array.from(new Set([].concat((0,he.Z)(e),(0,he.Z)(r))));u(i),s(i)}),[n,t]);var f=function(e){var r=[],o=[];if(a.indexOf(e.value)>=0)r=a.filter((function(t){return!me(t,e.value)})),o=n.filter((function(t){return!me(t,e.value)}));else{var c=xe(t,e.value).map((function(e){return e.value}));r=[].concat((0,he.Z)(a),(0,he.Z)(c)),o=[].concat((0,he.Z)(n),[e.value])}s(r),i(o)},p=function(e){l.indexOf(e.value)>=0?u(l.filter((function(t){return!me(t,e.value)}))):u([].concat((0,he.Z)(l),[e.value]))},h=function e(r){if(r.children){var i=a.indexOf(r.value)>=0,o=l.indexOf(r.value)>=0,s=xe(t,r.value),c=i&&r.children.length>0&&a.filter((function(e){return e.startsWith("".concat(r.value,"."))})).length+1!==s.length,u=function(e,t){var n=be(t).filter((function(e){return e!==t}));return e.filter((function(e){return n.includes(e)})).length>0}(n,r.value);return(0,T.jsx)(ve,{node:r,isChecked:i,onChecked:f,isExpanded:o,onExpanded:p,isDisabled:u,isIndeterminate:c,children:o&&r.children.map((function(t){return(0,T.jsx)(d.Fragment,{children:e(t)},t.value)}))})}return null};return(0,T.jsx)(r.xu,{children:t.map((function(e){return(0,T.jsx)(r.xu,{children:h(e)},e.value)}))})},Oe=n(45009);function Ce(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ce(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ce(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var we=function(e){var t=e.dataCategories,n=e.checked,i=e.onChecked,o=e.buttonProps,a=e.buttonLabel,s=(0,d.useMemo)((function(){return(0,Oe.C)(t)}),[t]),c={variant:"outline",fontWeight:"normal",size:"sm",borderRadius:"sm",textAlign:"left",_hover:{backgroundColor:"transparent"},_active:{backgroundColor:"transparent"},rightIcon:(0,T.jsx)(ye.mC,{}),width:"100%"},l=null!==o&&void 0!==o?o:c,u=null!==a&&void 0!==a?a:"Select data categories";return(0,T.jsxs)(pe.v2,{closeOnSelect:!0,children:[(0,T.jsx)(pe.j2,ke(ke({as:C.zx},l),{},{"data-testid":"data-category-dropdown",children:u})),(0,T.jsx)(pe.qy,{children:(0,T.jsxs)(r.xu,{maxHeight:"50vh",minWidth:"300px",overflowY:"scroll",children:[(0,T.jsxs)(r.xu,{position:"sticky",top:0,zIndex:1,backgroundColor:"white",pt:1,children:[(0,T.jsx)(pe.__,{children:(0,T.jsxs)(r.xu,{display:"flex",justifyContent:"space-between",px:2,mb:2,children:[(0,T.jsx)(pe.sN,{as:C.zx,variant:"outline",size:"xs",onClick:function(){return i([])},mr:2,width:"auto",closeOnSelect:!1,"data-testid":"data-category-clear-btn",children:"Clear"}),(0,T.jsx)(r.xv,{mr:2,children:"Data Categories"}),(0,T.jsx)(pe.sN,{as:C.zx,size:"xs",colorScheme:"primary",color:"white",_hover:{backgroundColor:"primary.600"},width:"auto","data-testid":"data-category-done-btn",children:"Done"})]})}),(0,T.jsx)(pe.R,{})]}),(0,T.jsx)(r.xu,{px:2,"data-testid":"data-category-checkbox-tree",children:(0,T.jsx)(ge,{nodes:s,selected:n,onSelected:i})})]})})]})},Pe=function(e){var t=e.dataCategories,n=e.mostLikelyCategories,i=e.checked,o=e.onChecked,a=e.tooltip,s=i.slice().sort((function(e,t){return e.localeCompare(t)}));return(0,T.jsxs)(r.rj,{templateColumns:"1fr 3fr",children:[(0,T.jsx)(de.lX,{children:"Data Categories"}),n?(0,T.jsxs)(r.xu,{display:"flex",alignItems:"center",children:[(0,T.jsx)(r.xu,{mr:"2",width:"100%",children:(0,T.jsx)(oe.P$,{dataCategories:t,mostLikelyCategories:n,checked:i,onChecked:o})}),(0,T.jsx)(fe.Z,{label:a})]}):(0,T.jsxs)(r.Kq,{children:[(0,T.jsxs)(r.xu,{display:"flex",alignItems:"center",children:[(0,T.jsx)(r.xu,{mr:"2",width:"100%",children:(0,T.jsx)(we,{dataCategories:t,checked:i,onChecked:o})}),(0,T.jsx)(fe.Z,{label:a})]}),(0,T.jsx)(r.Kq,{"data-testid":"selected-categories",children:s.map((function(e){return(0,T.jsx)(re.Z,{name:e,onClose:function(){var t;t=e,o(i.filter((function(e){return e!==t})))}},e)}))})]})]})};function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Se(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _e="edit-collection-or-field-form",Ee=V.map((function(e){return{value:e.key,label:e.label}})),ze=function(e){var t,n=e.values,i=e.onSubmit,o=e.dataType,a={description:null!==(t=n.description)&&void 0!==t?t:"",data_qualifier:n.data_qualifier,data_categories:n.data_categories},s=(0,f.useSelector)(y.qb),c=(0,f.useSelector)(j.t6),l=(0,d.useMemo)((function(){if(s&&c){var e=new Map(s.map((function(e){return[e.fides_key,e]})));return c.classifications.map((function(t){var n=t.label;return Se({fides_key:n,confidence:t.aggregated_score},e.get(n))}))}}),[s,c]),u=(0,d.useState)((function(){return(0,ue.I)({dataCategories:a.data_categories,mostLikelyCategories:l})})),p=u[0],h=u[1],b="collection"===o?Q.tooltip:X.tooltip,m="collection"===o?K.tooltip:B.tooltip,x="collection"===o?U.tooltip:H.tooltip;return(0,T.jsx)(ce.J9,{initialValues:a,onSubmit:function(e){var t=Se(Se({},e),{data_categories:p});i(t)},children:(0,T.jsx)(ce.l0,{id:_e,children:(0,T.jsxs)(r.Kq,{children:[(0,T.jsx)(le.j0,{name:"description",label:"Description",tooltip:b,"data-testid":"description-input"}),(0,T.jsx)(le.AP,{name:"data_qualifier",label:"Identifiability",options:Ee,tooltip:m,isSearchable:!1,"data-testid":"identifiability-input"}),(0,T.jsx)(Pe,{dataCategories:s,mostLikelyCategories:l,checked:p,onChecked:h,tooltip:x})]})})})};function Ze(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ze(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ze(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ie,Fe=function(e){var t=e.field,n=e.isOpen,i=e.onClose,o=(0,f.useSelector)(D.n0),a=(0,f.useSelector)(D.gR),s=(0,f.useSelector)(D.mZ),c=(0,D.TG)(),l=(0,m.Z)(c,1)[0],u=(0,ae.qY)(),d=u.isOpen,p=u.onOpen,h=u.onClose;return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(se.ZP,{isOpen:n,onClose:i,description:"Fields are an array of objects that describe the collection's fields. Provide additional context to this field by filling out the fields below.",header:(0,T.jsx)(se.zR,{title:"Field Name: ".concat(t.name),onDelete:p}),footer:(0,T.jsx)(se.Gn,{onClose:i,formId:_e}),children:(0,T.jsx)(ze,{values:t,onSubmit:function(e){if(o&&void 0!==a&&void 0!==s){var n=Ae(Ae({},t),e),r=A(o,n,a,s);l(r),i()}},dataType:"field"})}),(0,T.jsx)(oe.cV,{isOpen:d,onClose:h,onConfirm:function(){if(o&&void 0!==a&&void 0!==s){var e=function(e,t,n){var r=e.collections[t],i=r.fields.filter((function(e,t){return t!==n})),o=z(z({},r),{fields:i});return Z(e,o,t)}(o,a,s);l(e),i()}},title:"Delete Field",message:(0,T.jsxs)(r.xv,{children:["You are about to permanently delete the field named"," ",(0,T.jsx)(r.xv,{color:"complimentary.500",as:"span",fontWeight:"bold",children:t.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})};!function(e){e.DATASET="dataset",e.COLLECTION="collection",e.FIELD="field"}(Ie||(Ie={}));var Te=function(e){var t=e.columns,n=(0,f.useDispatch)(),i=(0,f.useSelector)(D.pD),o=(0,f.useSelector)(D.FJ),a=(0,f.useSelector)(D.U3),s=(0,f.useSelector)(j.a$),c=function(e){n((0,D.EQ)(e)),n((0,D.JY)(Ie.FIELD))};return(0,T.jsxs)(r.xu,{children:[(0,T.jsxs)(q.iA,{size:"sm","data-testid":"dataset-fields-table",children:[(0,T.jsx)(q.hr,{children:(0,T.jsx)(q.Tr,{children:t.map((function(e){return(0,T.jsx)(q.Th,{pl:0,"data-testid":"column-".concat(e.name),children:e.name},e.name)}))})}),(0,T.jsx)(q.p3,{children:(null!==i&&void 0!==i?i:[]).map((function(e,n){return(0,T.jsx)(q.Tr,{_hover:{bg:"gray.50"},cursor:"pointer",onClick:function(){return c(n)},tabIndex:0,onKeyPress:function(e){"Enter"===e.key&&c(n)},"data-testid":"field-row-".concat(e.name),children:t.map((function(t){return(0,T.jsx)(q.Td,{pl:0,children:(0,T.jsx)(ie,{field:e,classifyField:s.get(e.name),attribute:t.attribute})},"".concat(t.name,"-").concat(e.name))}))},e.name)}))})]}),o?(0,T.jsx)(Fe,{isOpen:a===Ie.FIELD,onClose:function(){n((0,D.EQ)(void 0)),n((0,D.JY)(void 0))},field:o}):null]})},Le=function(){var e,t=(0,f.useSelector)(j.Bt),n=null!==(e=null===t||void 0===t?void 0:t.status)&&void 0!==e?e:P.Wg.REVIEWED,i=(0,d.useMemo)((function(){var e,n;return null!==(e=null===t||void 0===t||null===(n=t.collections)||void 0===n?void 0:n.reduce((function(e,t){return e+t.fields.reduce((function(e,t){return t.classifications.length>0?e+1:e}),0)}),0))&&void 0!==e?e:0}),[t]),o=0===i?"Fides did not identify any fields that are likely to contain personal data, but there may be some.":1===i?"Fides identified a field that is likely to contain personal data.":"Fides identified ".concat(i," fields that are likely to contain personal data.");return(0,T.jsx)(r.gC,{align:"left",mb:6,children:n===P.Wg.COMPLETE?(0,T.jsxs)(T.Fragment,{children:[(0,T.jsxs)(r.Ug,{children:[(0,T.jsx)(r.X6,{fontSize:"2xl",children:"Dataset classification ready for review"}),(0,T.jsx)(ye.sc,{fontSize:"2xl"})]}),(0,T.jsxs)(r.xv,{fontSize:"sm",color:"gray.600",maxW:"720px",children:[o," Please confirm all dataset fields to finish annotating this system. For each table, please review the recommended data categories. You can accept the automated suggestions, or update any field as appropriate before approving."]})]}):(0,T.jsx)(r.X6,{fontSize:"2xl",children:"Dataset"})})};function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Me=function(e){var t=e.collection,n=e.isOpen,i=e.onClose,o=(0,f.useSelector)(D.n0),a=(0,f.useSelector)(D.gR),s=(0,D.TG)(),c=(0,m.Z)(s,1)[0],l=(0,g.pm)(),u=(0,ae.qY)(),d=u.isOpen,p=u.onOpen,h=u.onClose,j=function(){var e=(0,b.Z)(v().mark((function e(n){var r,s;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||void 0===a){e.next=13;break}return r=Ne(Ne({},t),n),s=Z(o,r,a),e.prev=3,e.next=6,c(s);case 6:l((0,w.t)("Successfully modified collection")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(3),l((0,w.V)(e.t0));case 12:i();case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=(0,b.Z)(v().mark((function e(){var t,n;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o||void 0===a){e.next=14;break}return t=F(o,a),e.prev=2,e.next=5,c(t);case 5:l((0,w.t)("Successfully deleted collection")),n=o.collections.length>0?0:void 0,(0,D.Fy)(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),l((0,w.V)(e.t0));case 13:i();case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(){return e.apply(this,arguments)}}();return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(se.ZP,{isOpen:n,onClose:i,description:"Collections are an array of objects that describe the Dataset's collections. Provide additional context to this collection by filling out the fields below.",header:(0,T.jsx)(se.zR,{title:"Collection Name: ".concat(t.name),onDelete:p}),footer:(0,T.jsx)(se.Gn,{onClose:i,formId:_e}),children:(0,T.jsx)(ze,{values:t,onSubmit:j,dataType:"collection"})}),(0,T.jsx)(oe.cV,{isOpen:d,onClose:h,onConfirm:y,title:"Delete Collection",message:(0,T.jsxs)(r.xv,{children:["You are about to permanently delete the collection named"," ",(0,T.jsx)(r.xv,{color:"complimentary.500",as:"span",fontWeight:"bold",children:t.name})," ","from this dataset. Are you sure you would like to continue?"]})})]})},Ve=n(99429);function We(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?We(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):We(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re="edit-field-drawer",Ge=V.map((function(e){return{label:e.label,value:e.key}})),Je=function(e){var t,n,i,o,a,s=e.values,c=e.onSubmit,l={name:null!==(t=s.name)&&void 0!==t?t:"",description:null!==(n=s.description)&&void 0!==n?n:"",retention:null!==(i=s.retention)&&void 0!==i?i:"",data_qualifier:s.data_qualifier,third_country_transfers:null!==(o=s.third_country_transfers)&&void 0!==o?o:[],data_categories:s.data_categories},u=(0,f.useSelector)(y.qb),p=(0,d.useState)(null!==(a=l.data_categories)&&void 0!==a?a:[]),h=p[0],j=p[1];return(0,T.jsx)(ce.J9,{initialValues:l,onSubmit:function(e){var t=Ye(Ye({},e),{data_categories:h});c(t)},children:(0,T.jsx)(ce.l0,{id:Re,children:(0,T.jsxs)(r.Kq,{spacing:"3",children:[(0,T.jsx)(le.j0,{name:"name",label:"Name",tooltip:W.tooltip,"data-testid":"name-input"}),(0,T.jsx)(le.j0,{name:"description",label:"Description",tooltip:Y.tooltip,"data-testid":"description-input"}),(0,T.jsx)(le.j0,{name:"retention",label:"Retention period",tooltip:R.tooltip,"data-testid":"retention-input"}),(0,T.jsx)(le.AP,{name:"data_qualifier",label:"Identifiability",options:Ge,tooltip:G.tooltip,"data-testid":"identifiability-input"}),(0,T.jsx)(le.Fs,{name:"third_country_transfers",label:"Geographic location",tooltip:$.tooltip,isSearchable:!0,options:Ve.Y,"data-testid":"geography-input"}),(0,T.jsx)(Pe,{dataCategories:u,checked:h,onChecked:j,tooltip:J.tooltip})]})})})};function $e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$e(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ke=function(e){var t=e.dataset,n=e.isOpen,i=e.onClose,o=(0,D.TG)(),a=(0,m.Z)(o,1)[0],c=(0,D.QY)(),l=(0,m.Z)(c,1)[0],u=(0,s.useRouter)(),d=(0,g.pm)(),f=(0,ae.qY)(),p=f.isOpen,h=f.onOpen,j=f.onClose,y=function(){var e=(0,b.Z)(v().mark((function e(n){var r,o;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Qe(Qe({},t),n),e.prev=1,e.next=4,a(r);case 4:o=e.sent,(0,k.D4)(o)?d((0,w.V)((0,k.e$)(o.error))):d((0,w.t)("Successfully modified dataset")),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),d((0,w.V)(e.t0));case 11:i();case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,b.Z)(v().mark((function e(){var n,r;return v().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fides_key,e.next=3,l(n);case 3:r=e.sent,(0,k.D4)(r)?d((0,w.V)((0,k.e$)(r.error))):d((0,w.t)("Successfully deleted dataset")),(0,D.Zl)(void 0),u.push("/dataset"),i();case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return(0,T.jsxs)(T.Fragment,{children:[(0,T.jsx)(se.ZP,{isOpen:n,onClose:i,description:"A Dataset takes a database schema (tables and columns) and adds Fides privacy categorizations. Provide additional context to this dataset by filling out the fields below.",header:(0,T.jsx)(se.zR,{title:"Dataset Name: ".concat(t.name),onDelete:h}),footer:(0,T.jsx)(se.Gn,{onClose:i,formId:Re}),children:(0,T.jsx)(Je,{values:t,onSubmit:y})}),(0,T.jsx)(oe.cV,{isOpen:p,onClose:j,onConfirm:x,title:"Delete Dataset",message:(0,T.jsxs)(r.xv,{children:["You are about to permanently delete the dataset named"," ",(0,T.jsx)(r.xv,{color:"complimentary.500",as:"span",fontWeight:"bold",children:t.name}),". Are you sure you would like to continue?"]})})]})},Ue=n(4730),Xe=n(81555),Be=["children","isDisabled","onClick"];function He(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function et(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?He(Object(n),!0).forEach((function(t){(0,S.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):He(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var tt=function(e){var t=e.children,n=e.isDisabled,r=e.onClick,i=(0,Ue.Z)(e,Be);return(0,T.jsx)(pe.sN,et(et({isDisabled:n,_hover:{backgroundColor:"gray.100"},fontSize:"sm",onClick:r},i),{},{children:t}))},nt=function(e){var t=e.onModifyCollection,n=e.onModifyDataset;return(0,T.jsxs)(pe.v2,{size:"sm",children:[(0,T.jsx)(pe.j2,{as:C.zx,variant:"outline","data-testid":"more-actions-btn",children:(0,T.jsx)(Xe.Z,{})}),(0,T.jsxs)(pe.qy,{children:[(0,T.jsxs)(pe.kS,{title:"Collections",color:"gray.500",textTransform:"uppercase",mx:3,children:[(0,T.jsx)(pe.R,{}),(0,T.jsx)(tt,{isDisabled:!0,children:"Add a collection"}),(0,T.jsx)(tt,{onClick:t,"data-testid":"modify-collection",children:"Modify collection"})]}),(0,T.jsxs)(pe.kS,{title:"Datasets",color:"gray.500",textTransform:"uppercase",mx:3,children:[(0,T.jsx)(pe.R,{}),(0,T.jsx)(tt,{children:(0,T.jsx)(a(),{href:"/dataset",children:"Select new dataset"})}),(0,T.jsx)(tt,{isDisabled:!0,children:"Classify this dataset"}),(0,T.jsx)(tt,{onClick:n,"data-testid":"modify-dataset",children:"Modify dataset"})]})]})]})},rt=[{name:"Field Name",attribute:"name"},{name:"Description",attribute:"description"},{name:"Identifiability",attribute:"data_qualifier"},{name:"Personal Data Categories",attribute:"data_categories"}],it=function(e){var t=e.fidesKey,n=(0,f.useDispatch)(),i=function(e){var t=(0,D.oM)(e),n=t.data,r=t.isLoading,i=(0,h.h)(),o=(0,j.Tc)(e,{skip:!i.plus}).isLoading;return(0,y.MO)(),{isLoading:r||o,dataset:n}}(t),o=i.dataset,a=i.isLoading,s=(0,f.useSelector)(D.fQ),c=(0,f.useSelector)(D.Jb),b=(0,f.useSelector)(D.U3),m=(0,d.useState)(rt),x=m[0],v=m[1];(0,y.MO)(),(0,d.useEffect)((function(){o&&n((0,D.Zl)(o.fides_key))}),[n,o]),(0,d.useEffect)((function(){return function(){n((0,D.Zl)(void 0))}}),[]);return a?(0,T.jsx)(l.$,{}):o?(0,T.jsxs)(r.xu,{children:[(0,T.jsx)(Le,{}),(0,T.jsxs)(r.Ug,{mb:4,children:[(0,T.jsx)(u.Ph,{onChange:function(e){n((0,D.Fy)(e.target.selectedIndex))},width:"fit-content",flexShrink:0,"data-testid":"collection-select",children:(null!==s&&void 0!==s?s:[]).map((function(e){return(0,T.jsx)("option",{value:e.name,children:e.name},e.name)}))}),(0,T.jsx)(L,{}),(0,T.jsx)(r.xu,{children:(0,T.jsx)(p.s,{allColumns:rt,selectedColumns:x,onChange:v})}),(0,T.jsx)(nt,{onModifyCollection:function(){return n((0,D.JY)(Ie.COLLECTION))},onModifyDataset:function(){return n((0,D.JY)(Ie.DATASET))}})]}),(0,T.jsx)(Te,{columns:x}),c?(0,T.jsx)(Me,{collection:c,isOpen:b===Ie.COLLECTION,onClose:function(){return n((0,D.JY)(void 0))}}):null,o?(0,T.jsx)(Ke,{dataset:o,isOpen:b===Ie.DATASET,onClose:function(){return n((0,D.JY)(void 0))}}):null]}):(0,T.jsx)("div",{children:"Dataset not found"})},ot=function(){var e=(0,s.useRouter)().query.id;if(!e)return(0,T.jsx)(c.Z,{title:"Dataset",children:"Dataset not found"});var t=Array.isArray(e)?e[0]:e;return(0,T.jsxs)(c.Z,{title:"Dataset - ".concat(e),children:[(0,T.jsx)(r.xu,{mb:6,children:(0,T.jsxs)(i.aG,{fontWeight:"medium",fontSize:"sm",color:"gray.600",children:[(0,T.jsx)(i.gN,{children:(0,T.jsx)(a(),{href:"/dataset",children:"Datasets"})}),(0,T.jsx)(i.gN,{children:(0,T.jsx)(a(),{href:"#",children:e})})]})}),(0,T.jsx)(it,{fidesKey:t})]})}},88794:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/dataset/[id]",function(){return n(81586)}])}},function(e){e.O(0,[5472,8271,3512,5070,4247,7080,9774,2888,179],(function(){return t=88794,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
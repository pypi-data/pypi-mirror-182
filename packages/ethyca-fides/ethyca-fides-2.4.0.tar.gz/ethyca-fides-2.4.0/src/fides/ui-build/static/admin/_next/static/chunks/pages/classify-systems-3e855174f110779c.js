(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[738],{35922:function(e,t,n){"use strict";n.d(t,{$R:function(){return g},Td:function(){return b},Th:function(){return j},Tr:function(){return x},hr:function(){return m},iA:function(){return y},p3:function(){return v},xJ:function(){return h}});var r=n(52565),s=n(89816),i=n(67294);function a(){return a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a.apply(this,arguments)}function c(e,t){if(null==e)return{};var n,r,s={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}var o=["overflow","overflowX","className"],l=["className"],u=["placement"],d=["isNumeric"],f=["isNumeric"],h=(0,r.Gp)((function(e,t){var n,l=e.overflow,u=e.overflowX,d=e.className,f=c(e,o);return i.createElement(r.m$.div,a({ref:t,className:(0,s.cx)("chakra-table__container",d)},f,{__css:{display:"block",whiteSpace:"nowrap",WebkitOverflowScrolling:"touch",overflowX:null!=(n=null!=l?l:u)?n:"auto",overflowY:"hidden",maxWidth:"100%"}}))})),y=(0,r.Gp)((function(e,t){var n=(0,r.jC)("Table",e),o=(0,r.Lr)(e),u=o.className,d=c(o,l);return i.createElement(r.Fo,{value:n},i.createElement(r.m$.table,a({role:"table",ref:t,__css:n.table,className:(0,s.cx)("chakra-table",u)},d)))}));s.Ts&&(y.displayName="Table");var p=(0,r.Gp)((function(e,t){var n=e.placement,s=void 0===n?"bottom":n,o=c(e,u),l=(0,r.yK)();return i.createElement(r.m$.caption,a({},o,{ref:t,__css:a({},l.caption,{captionSide:s})}))}));s.Ts&&(p.displayName="TableCaption");var m=(0,r.Gp)((function(e,t){var n=(0,r.yK)();return i.createElement(r.m$.thead,a({},e,{ref:t,__css:n.thead}))})),v=(0,r.Gp)((function(e,t){var n=(0,r.yK)();return i.createElement(r.m$.tbody,a({},e,{ref:t,__css:n.tbody}))})),g=(0,r.Gp)((function(e,t){var n=(0,r.yK)();return i.createElement(r.m$.tfoot,a({},e,{ref:t,__css:n.tfoot}))})),j=(0,r.Gp)((function(e,t){var n=e.isNumeric,s=c(e,d),o=(0,r.yK)();return i.createElement(r.m$.th,a({},s,{ref:t,__css:o.th,"data-is-numeric":n}))})),x=(0,r.Gp)((function(e,t){var n=(0,r.yK)();return i.createElement(r.m$.tr,a({role:"row"},e,{ref:t,__css:n.tr}))})),b=(0,r.Gp)((function(e,t){var n=e.isNumeric,s=c(e,f),o=(0,r.yK)();return i.createElement(r.m$.td,a({role:"gridcell"},s,{ref:t,__css:o.td,"data-is-numeric":n}))}))},80649:function(e,t,n){"use strict";n.d(t,{Gn:function(){return l},zR:function(){return o}});var r=n(23296),s=n(1396),i=n(43894),a=n(58477),c=n(85893),o=function(e){var t=e.title,n=e.onDelete;return(0,c.jsxs)(r.OX,{py:2,display:"flex",alignItems:"center",children:[(0,c.jsx)(s.xv,{mr:"2",children:t}),n?(0,c.jsx)(i.hU,{"aria-label":"delete",icon:(0,c.jsx)(a.lr,{}),size:"xs",onClick:n,"data-testid":"delete-btn"}):null]})},l=function(e){var t=e.onClose,n=e.formId,s=e.isSaving;return(0,c.jsxs)(r.ze,{justifyContent:"flex-start",children:[(0,c.jsx)(i.zx,{onClick:t,mr:2,size:"sm",variant:"outline",children:"Cancel"}),(0,c.jsx)(i.zx,{type:"submit",colorScheme:"primary",size:"sm","data-testid":"save-btn",form:n,isLoading:s,children:"Save"})]})};t.ZP=function(e){var t=e.header,n=e.description,o=e.isOpen,l=e.onClose,u=e.children,d=e.footer;return(0,c.jsxs)(r.dy,{placement:"right",isOpen:o,onClose:l,size:"lg",children:[(0,c.jsx)(r.P1,{}),(0,c.jsxs)(r.sc,{"data-testid":"edit-drawer-content",py:2,children:[(0,c.jsx)(s.xu,{display:"flex",justifyContent:"flex-end",mr:2,children:(0,c.jsx)(i.zx,{variant:"ghost",onClick:l,"data-testid":"close-drawer-btn",children:(0,c.jsx)(a.LG,{})})}),t,(0,c.jsxs)(r.Ng,{children:[n?(0,c.jsx)(s.xv,{fontSize:"sm",mb:4,children:n}):null,u]}),d]})]})}},37903:function(e,t,n){"use strict";n.d(t,{Rt:function(){return d},cK:function(){return f}});var r=n(59499),s=n(27812),i=n(1396),a=n(35922),c=n(12156),o=n(85893);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){var t,n,r,s,a=e.system,c=e.attribute;return"name"===c?(0,o.jsx)("label",{htmlFor:"checkbox-".concat(a.fides_key),children:a.name}):"fidesctl_meta.resource_id"===c?(0,o.jsx)(i.xu,{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis",title:null===(t=a.fidesctl_meta)||void 0===t?void 0:t.resource_id,children:null===(n=a.fidesctl_meta)||void 0===n?void 0:n.resource_id}):(0,o.jsx)(o.Fragment,{children:(r=a,s=c,s.split(".").reduce((function(e,t){return e?e[t]:void 0}),r))})},f=function(e){var t=e.allSystems,n=e.checked,r=e.onChange,l=e.columns,f=e.tableHeadProps,h=function(e){var t=n.indexOf(e)>=0;r(t?n.filter((function(t){return t.fides_key!==e.fides_key})):[].concat((0,s.Z)(n),[e]))},y=t.length===n.length;return 0===l.length?(0,o.jsx)(i.xv,{children:"No columns selected to display"}):(0,o.jsxs)(a.iA,{size:"sm",sx:{tableLayout:"fixed"},children:[(0,o.jsx)(a.hr,u(u({},f),{},{children:(0,o.jsxs)(a.Tr,{children:[(0,o.jsx)(a.Th,{width:"15px",children:(0,o.jsx)(c.XZ,{colorScheme:"complimentary",title:"Select All",isChecked:y,onChange:function(e){e.target.checked?r(t):r([])}})}),l.map((function(e){return(0,o.jsx)(a.Th,{children:e.name},e.attribute)}))]})})),(0,o.jsx)(a.p3,{children:t.map((function(e){return(0,o.jsxs)(a.Tr,{children:[(0,o.jsx)(a.Td,{children:(0,o.jsx)(c.XZ,{colorScheme:"complimentary",value:e.fides_key,isChecked:n.indexOf(e)>=0,onChange:function(){return h(e)},"data-testid":"checkbox-".concat(e.fides_key)})}),l.map((function(t){return(0,o.jsx)(a.Td,{children:(0,o.jsx)(d,{system:e,attribute:t.attribute})},t.attribute)}))]},e.fides_key)}))})]})}},65698:function(e,t,n){"use strict";n.d(t,{D4:function(){return s.D4},FM:function(){return c},MM:function(){return d},Ot:function(){return o},e$:function(){return a},nU:function(){return u},tB:function(){return l}});var r=n(56661),s=n(27396),i="An unexpected error occurred. Please try again.",a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i;if((0,s.Bw)(e)){if((0,s.hE)(e.data))return e.data.detail;if((0,s.cz)(e.data)){var n,r=null===(n=e.data.detail)||void 0===n?void 0:n[0];return"".concat(null===r||void 0===r?void 0:r.msg,": ").concat(null===r||void 0===r?void 0:r.loc)}if(409===e.status&&(0,s.Dy)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")");if(404===e.status&&(0,s.XD)(e.data))return"".concat(e.data.detail.error," (").concat(e.data.detail.fides_key,")")}return t},c=function(e){return(0,r.Ln)({name:"string"},e)&&"YAMLException"===e.name};function o(e){return"object"===typeof e&&null!=e&&"data"in e&&"string"===typeof e.data.detail}function l(e){return"object"===typeof e&&null!=e&&"data"in e&&Array.isArray(e.data.detail)}var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{status:500,message:i};if((0,s.oK)(e))return{status:e.originalStatus,message:e.data};if((0,s.Bw)(e)){var n=e.status;return{status:n,message:a(e,t.message)}}return t},d=function(e){return Object.entries(e).map((function(e){return{value:e[1],label:e[1]}}))}},63908:function(e,t,n){"use strict";n.d(t,{d:function(){return i}});var r=n(65028),s=n(28026),i=function(){var e=(0,r.h)(),t=(0,s.mg)({href:"/datamap",basePath:"/"});return{systemOrDatamapRoute:e.plus?t.href:"/system"}}},10846:function(e,t,n){"use strict";n.d(t,{V:function(){return f},t:function(){return d}});var r=n(59499),s=n(1396),i=n(85893);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){(0,r.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var o=function(e){var t=e.message;return(0,i.jsxs)(s.xv,{"data-testid":"toast-success-msg",children:[(0,i.jsx)("strong",{children:"Success:"})," ",t]})},l=function(e){var t=e.message;return(0,i.jsxs)(s.xv,{"data-testid":"toast-error-msg",children:[(0,i.jsx)("strong",{children:"Error:"})," ",t]})},u={variant:"subtle",position:"top",description:"",duration:5e3,status:"success",isClosable:!0},d=function(e){var t=(0,i.jsx)(o,{message:e});return c(c({},u),{description:t})},f=function(e){var t=(0,i.jsx)(l,{message:e});return c(c({},u),{description:t,status:"error"})}},64330:function(e,t,n){"use strict";var r=n(4730),s=n(59499),i=n(35839),a=n(1396),c=n(23720),o=n(85893),l=["status","resource"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,s.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t.Z=function(e){var t=e.status,n=e.resource,u=(0,r.Z)(e,l),f=function(e){var t,n=e===c.j.DATASETS?"dataset":"system";return t={},(0,s.Z)(t,c.Wg.PROCESSING,{title:"Processing",tooltip:"This ".concat(n," is currently being ").concat("dataset"===n?"generated and":""," classified. You will be notified when this process is complete"),color:"orange"}),(0,s.Z)(t,c.Wg.CREATED,{title:"Processing",tooltip:"This ".concat(n," is currently being ").concat("dataset"===n&&"generated and"," and classified. You will be notified when this process is complete"),color:"orange"}),(0,s.Z)(t,c.Wg.COMPLETE,{title:"Awaiting Review",tooltip:"This ".concat(n," has been automatically classified. Review the results and update the ").concat(n,"."),color:"orange"}),(0,s.Z)(t,c.Wg.REVIEWED,{title:"Classified",tooltip:"This ".concat(n," has been classified."),color:"green"}),(0,s.Z)(t,c.Wg.FAILED,{title:"Failed",tooltip:"This ".concat(n," must be manually updated."),color:"red"}),(0,s.Z)(t,"unknown",{title:"Unknown",tooltip:"This ".concat(n," must be manually updated."),color:"gray"}),t}(n)[null!==t&&void 0!==t?t:"unknown"];return(0,o.jsx)(i.u,{"data-testid":"classification-status-badge",label:f.tooltip,children:(0,o.jsx)(a.Ct,d(d({variant:"solid",colorScheme:f.color,w:"100%",textAlign:"center"},u),{},{"data-testid":"classification-status-badge",children:f.title}))})}},97589:function(e,t,n){"use strict";n.d(t,{I:function(){return r}});var r=function(e){var t=e.dataCategories,n=e.mostLikelyCategories;return null!==t&&void 0!==t&&t.length?t:null!==n&&void 0!==n&&n.length?[n.reduce((function(e,t){var n,r;return(null!==(n=t.confidence)&&void 0!==n?n:0)>(null!==(r=e.confidence)&&void 0!==r?r:0)?t:e})).fides_key]:[]}},16621:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return H}});var r=n(1396),s=n(38351),i=n(43894),a=n(41664),c=n.n(a),o=n(11163),l=n(67294),u=n(14416),d=n(97142),f=n(63908),h=n(84247),y=n(41438),p=n(67087),m=n(35922),v=n(37903),g=n(64330),j=n(23720),x=n(59499),b=n(50029),O=n(16835),w=n(87794),_=n.n(w),k=n(9555),S=n(82175),P=n(56661),E=n(80649),C=n(65698),D=n(10846),T=n(24256),N=n(28633),L=n(33578),F=n(97589),Z=n(85893);function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){(0,x.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var W=function(e){var t=e.headingLevel,n=e.title,s=e.children;return(0,Z.jsxs)(Z.Fragment,{children:[(0,Z.jsx)(r.X6,{as:t,children:(0,Z.jsxs)(N.KF,{_expanded:{color:"complimentary.500"},_hover:{bg:"gray.50"},pl:0,children:[(0,Z.jsx)(r.xu,{flex:"1",textAlign:"left",children:n}),(0,Z.jsx)(N.XE,{})]})}),(0,Z.jsx)(N.Hk,{py:2,px:0,children:s})]})},A=function(e){var t=e.flow,n=e.index,s=e.classifyDataFlows,i=e.type,a=(0,S.u6)().setFieldValue,c=(0,d.C)(T.qb),o=(0,d.C)(T.L5),l=null===s||void 0===s?void 0:s.find((function(e){return e.fides_key===t.fides_key})),u=null===l||void 0===l?void 0:l.classifications.map((function(e){var t=e.label,n=e.aggregated_score;return I(I({},o.get(t)),{},{fides_key:t,confidence:n})})),f=(0,F.I)({dataCategories:t.data_categories,mostLikelyCategories:u});return(0,Z.jsx)(N.Qd,{pl:4,borderBottom:"none","data-testid":"accordion-item-".concat(t.fides_key),children:(0,Z.jsx)(W,{headingLevel:"h3",title:t.fides_key,children:c?(0,Z.jsx)(r.xu,{pr:2,children:(0,Z.jsx)(L.P$,{mostLikelyCategories:u||[],dataCategories:c,checked:f,onChecked:function(e){a("".concat(i,"[").concat(n,"].data_categories"),e)}})}):null})})},R=function(e){var t=e.classifyDataFlows,n=e.type,s=(0,S.u6)().values[n],i={ingress:"source",egress:"destination"}[n];return 0===s.length?(0,Z.jsxs)(r.xv,{p:4,children:["No ",n,"es found."]}):(0,Z.jsx)(N.Qd,{p:0,"data-testid":"accordion-item-".concat(n),children:(0,Z.jsx)(W,{headingLevel:"h2",title:"Connected ".concat(i[0].toLocaleUpperCase()+i.slice(1)," Systems"),children:s.map((function(e,r){return(0,Z.jsx)(A,{flow:e,index:r,classifyDataFlows:t,type:n},e.fides_key)}))})})},G=function(e){var t=e.system,n=e.classificationInstance;return(null==t.ingress||0===t.ingress.length)&&(null==t.egress||0===t.egress.length)?(0,Z.jsx)(r.xv,{children:"No data flows found on this system."}):(0,Z.jsxs)(r.Kq,{children:[(0,Z.jsx)(r.xv,{fontWeight:"semibold",children:t.name}),(0,Z.jsxs)(N.UQ,{allowMultiple:!0,pl:2,children:[(0,Z.jsx)(R,{classifyDataFlows:null===n||void 0===n?void 0:n.ingress,type:"ingress"}),(0,Z.jsx)(R,{classifyDataFlows:null===n||void 0===n?void 0:n.egress,type:"egress"})]})]})},$=n(32523);function K(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function M(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?K(Object(n),!0).forEach((function(t){(0,x.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var X="data-flow-form",Y=function(e){var t=e.label,n=e.value;return(0,Z.jsxs)(r.P4,{children:[(0,Z.jsxs)(r.xv,{as:"span",fontWeight:"semibold",children:[t,":"]})," ",n]})},V=function(e){return(0,P.Ln)({fides_key:"string"},e)},q=function(e){var t,n,i=e.system,a=e.isOpen,c=e.onClose,o=function(e){var t=e.system,n=e.onClose,s=(0,k.pm)();(0,T.MO)();var i,a=(0,y.$b)(t.fides_key),c=a.data,o=a.isLoading;if(null==c||V(c)){var l,u=t.ingress||[],d=t.egress||[],f=(null===c||void 0===c?void 0:c.ingress.filter((function(e){return u.find((function(t){return t.fides_key===e.fides_key}))})))||[],h=(null===c||void 0===c?void 0:c.egress.filter((function(e){return d.find((function(t){return t.fides_key===e.fides_key}))})))||[],p=f.length>0,m=h.length>0,v=!p&&!m,g=u.length>0,x=d.length>0,w=!g&&!x;l=g&&x?"which send or receive data from your selected system":g?"from which your selected system receives data":"to which your selected system sends data",i=(null===c||void 0===c?void 0:c.status)===j.Wg.PROCESSING?(0,Z.jsx)(r.xv,{fontSize:"sm","data-testid":"processing",children:"Fides classify is still classifying, please check back later."}):w?(0,Z.jsx)(r.xv,{fontSize:"sm","data-testid":"no-data-flows",children:"Fides classify did not detect any additional systems sending or receiving data from your selected system."}):v?(0,Z.jsx)(r.xv,{fontSize:"sm","data-testid":"no-classification",children:"Fides classify has detected additional systems which send or receive data from your selected system, but was unable to classify these data flows. You may classify these data flows manually below."}):(0,Z.jsxs)(r.xv,{fontSize:"sm","data-testid":"data-flow-with-classification",children:["Fides classify has detected additional systems ",l,". Each system has been automatically assigned data categories. Choose to keep the assigned data category selection or review more classification recommendations."]})}else i=(0,Z.jsx)(r.xv,{fontSize:"sm","data-testid":"no-classification-instance",children:"No classification instance found but you may still manually classify the data flows."});var S=(0,$.qQ)(),P=(0,O.Z)(S,1)[0],E=(0,y.MD)(),N=(0,O.Z)(E,1)[0],L=function(){var e=(0,b.Z)(_().mark((function e(t){var r,i;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!o&&c){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,P(t);case 5:if(r=e.sent,!(0,C.D4)(r)){e.next=9;break}return s((0,D.V)((0,C.e$)(r.error))),e.abrupt("return");case 9:return e.next=11,N({dataset_fides_key:t.fides_key,status:j.Wg.REVIEWED,resource_type:j.j.SYSTEMS});case 11:if(i=e.sent,!(0,C.D4)(i)){e.next=15;break}return s((0,D.V)((0,C.e$)(i.error))),e.abrupt("return");case 15:s((0,D.t)("System data flows classified and approved")),n(),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),s((0,D.V)("".concat(e.t0)));case 22:case"end":return e.stop()}}),e,null,[[2,19]])})));return function(t){return e.apply(this,arguments)}}();return{description:i,classificationInstance:c,isLoadingClassificationInstance:o,handleSave:L}}({system:i,onClose:c}),l=o.description,u=o.isLoadingClassificationInstance,d=o.classificationInstance,f=o.handleSave,h=function(){var e=(0,b.Z)(_().mark((function e(t){var n,r;return _().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.ingress,r=t.egress,e.next=3,f(M(M({},i),{},{ingress:n,egress:r}));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p={egress:null!==(t=i.egress)&&void 0!==t?t:[],ingress:null!==(n=i.ingress)&&void 0!==n?n:[]},m=V(d)?d.status:void 0,v=m!==j.Wg.PROCESSING;return(0,Z.jsx)(S.J9,{initialValues:p,onSubmit:h,children:function(e){var t=e.isSubmitting;return(0,Z.jsx)(S.l0,{id:X,children:(0,Z.jsx)(E.ZP,{isOpen:a,onClose:c,header:(0,Z.jsx)(E.zR,{title:"System classification details"}),footer:m!==j.Wg.PROCESSING?(0,Z.jsx)(E.Gn,{onClose:c,formId:X,isSaving:t}):void 0,children:u?(0,Z.jsx)(r.M5,{children:(0,Z.jsx)(s.$,{})}):(0,Z.jsxs)(r.Kq,{spacing:4,children:[(0,Z.jsxs)(r.MI,{columns:2,spacingY:2,children:[(0,Z.jsx)(Y,{label:"System name",value:i.name}),(0,Z.jsx)(Y,{label:"System type",value:i.system_type}),(0,Z.jsx)(Y,{label:"Classification status",value:(0,Z.jsx)(g.Z,{status:m,resource:j.j.SYSTEMS,display:"inline"})})]}),l,v?(0,Z.jsx)(G,{system:i,classificationInstance:V(d)?d:void 0}):null]})})})}})},U=function(e){var t=e.systems,n=(0,d.T)(),s=(0,d.C)(y.Oq),i=(0,d.C)($.o5);return(0,Z.jsxs)(r.Kq,{children:[(0,Z.jsxs)(m.iA,{size:"sm","data-testid":"systems-classify-table",children:[(0,Z.jsx)(m.hr,{children:(0,Z.jsxs)(m.Tr,{children:[(0,Z.jsx)(m.Th,{children:"System Name"}),(0,Z.jsx)(m.Th,{maxWidth:"100px",children:"Classification Status"})]})}),(0,Z.jsx)(m.p3,{children:t.map((function(e){var t=s.get(e.fides_key);return(0,Z.jsxs)(m.Tr,{"data-testid":"row-".concat(e.fides_key),_hover:{bg:"gray.50"},cursor:"pointer",onClick:function(){return function(e){n((0,$.Pj)(e.fides_key))}(e)},children:[(0,Z.jsx)(m.Td,{children:(0,Z.jsx)(v.Rt,{system:e,attribute:"name"})}),(0,Z.jsx)(m.Td,{"data-testid":"status-".concat(e.fides_key),children:(0,Z.jsx)(g.Z,{resource:j.j.SYSTEMS,status:null===t||void 0===t?void 0:t.status})})]},e.fides_key)}))})]}),i?(0,Z.jsx)(q,{system:i,isOpen:null!=i,onClose:function(){return n((0,$.Pj)(void 0))}}):null]})},B=function(e){var t=e.children;return(0,Z.jsx)(h.Z,{title:"Classify Systems",children:(0,Z.jsxs)(r.Kq,{spacing:4,children:[(0,Z.jsx)(r.X6,{fontSize:"2xl",fontWeight:"semibold",children:"Classified systems"}),t]})})},H=function(){var e=(0,o.useRouter)(),t=(0,u.useDispatch)(),n=(0,f.d)().systemOrDatamapRoute,a=(0,y.x8)(),h=a.isSuccess,m=a.isLoading,v=(0,d.C)(p.PG),g=(0,p.K3)(void 0,{skip:!h||v&&v.length>0}),x=g.isLoading,b=g.data,O=v||b;(0,l.useEffect)((function(){b&&b.length&&t((0,p.Wc)(b))}),[t,b]);var w=(0,l.useState)(!0),_=w[0],k=w[1],S=(0,y.Wm)({resource_type:j.j.SYSTEMS,fides_keys:null===O||void 0===O?void 0:O.map((function(e){return e.fides_key}))},{skip:!h,pollingInterval:_?3e3:void 0}),P=S.isLoading,E=S.data;(0,l.useEffect)((function(){m||h||e.push("/")}),[e,h,m]);var C=x||P,D=!!E&&E.every((function(e){return e.status===j.Wg.COMPLETE||e.status===j.Wg.FAILED||e.status===j.Wg.REVIEWED}));return(0,l.useEffect)((function(){D&&k(!1)}),[D]),C?(0,Z.jsx)(B,{children:(0,Z.jsx)(s.$,{})}):E&&0!==E.length?(0,Z.jsxs)(B,{children:[(0,Z.jsx)(r.xv,{children:D?"All systems have been classifed by Fides.":"Systems are still being classified by Fides."}),O&&O.length?(0,Z.jsx)(U,{systems:O}):"No systems with classifications found",(0,Z.jsx)(r.Ug,{children:(0,Z.jsx)(c(),{href:n,passHref:!0,children:(0,Z.jsx)(i.zx,{variant:"primary",size:"sm",children:"Finish"})})})]}):(0,Z.jsx)(B,{children:(0,Z.jsx)(r.xv,{"data-testid":"no-classifications",children:"No classifications found. Have you run a scan?"})})}},27396:function(e,t,n){"use strict";n.d(t,{Bw:function(){return a},D4:function(){return s},Dy:function(){return o},XD:function(){return l},cz:function(){return u},hE:function(){return c},oK:function(){return i}});var r=n(56661),s=function(e){return"error"in e},i=function(e){return(0,r.Ln)({status:"string"},e)&&"PARSING_ERROR"===e.status},a=function(e){return(0,r.Ln)({status:"number",data:{}},e)},c=function(e){return(0,r.Ln)({detail:"string"},e)},o=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},l=function(e){return(0,r.Ln)({detail:{error:"string",resource_type:"string",fides_key:"string"}},e)},u=function(e){return(0,r.Ln)({detail:[{loc:["string","number"],msg:"string",type:"string"}]},e)}},61028:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/classify-systems",function(){return n(16621)}])},56661:function(e,t,n){"use strict";n.d(t,{Ln:function(){return r}});const r=(e,t)=>i(e,t),s=Symbol("SOME"),i=(e,t)=>{if("string"==typeof e)return e===typeof t;if(Array.isArray(e))return s in e?e.some((e=>i(e,t))):!!Array.isArray(t)&&(0===e.length||t.every((t=>e.some((e=>i(e,t))))));if("object"!=typeof t||null===t)return!1;const n=t;return Object.entries(e).every((([e,t])=>i(t,n[e])))};class a{static narrow(e){return new a((t=>r(e,t)))}constructor(e){this.NF=void 0,this.NF=e}satisfied(e){return this.NF(e)}build(e){return e}and(e){const t=this.NF,n=e instanceof a?e.NF:e instanceof Function?e:t=>r(e,t);return new a((e=>t(e)&&n(e)))}}new a((e=>!0))}},function(e){e.O(0,[5472,7246,4247,9774,2888,179],(function(){return t=61028,e(e.s=t);var t}));var t=e.O();_N_E=t}]);
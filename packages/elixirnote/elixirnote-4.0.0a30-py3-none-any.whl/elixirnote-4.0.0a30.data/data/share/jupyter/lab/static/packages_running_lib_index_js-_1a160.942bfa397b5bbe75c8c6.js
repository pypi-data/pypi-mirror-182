"use strict";
(self["webpackChunk_jupyterlab_application_top"] = self["webpackChunk_jupyterlab_application_top"] || []).push([["packages_running_lib_index_js-_1a160"],{

/***/ "../../packages/running/lib/index.js":
/*!*******************************************!*\
  !*** ../../packages/running/lib/index.js ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "IRunningSessionManagers": () => (/* binding */ IRunningSessionManagers),
/* harmony export */   "RunningSessionManagers": () => (/* binding */ RunningSessionManagers),
/* harmony export */   "RunningSessions": () => (/* binding */ RunningSessions)
/* harmony export */ });
/* harmony import */ var _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @jupyterlab/apputils */ "webpack/sharing/consume/default/@jupyterlab/apputils/@jupyterlab/apputils");
/* harmony import */ var _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__);
/* harmony import */ var _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @jupyterlab/translation */ "webpack/sharing/consume/default/@jupyterlab/translation/@jupyterlab/translation");
/* harmony import */ var _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_translation__WEBPACK_IMPORTED_MODULE_1__);
/* harmony import */ var _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @jupyterlab/ui-components */ "webpack/sharing/consume/default/@jupyterlab/ui-components/@jupyterlab/ui-components");
/* harmony import */ var _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(_jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2__);
/* harmony import */ var _lumino_coreutils__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @lumino/coreutils */ "webpack/sharing/consume/default/@lumino/coreutils/@lumino/coreutils");
/* harmony import */ var _lumino_coreutils__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(_lumino_coreutils__WEBPACK_IMPORTED_MODULE_3__);
/* harmony import */ var _lumino_disposable__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @lumino/disposable */ "webpack/sharing/consume/default/@lumino/disposable/@lumino/disposable");
/* harmony import */ var _lumino_disposable__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(_lumino_disposable__WEBPACK_IMPORTED_MODULE_4__);
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! react */ "webpack/sharing/consume/default/react/react");
/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_5__);
// Copyright (c) Jupyter Development Team.
// Distributed under the terms of the Modified BSD License.
/**
 * @packageDocumentation
 * @module running
 */






/**
 * The class name added to a running widget.
 */
const RUNNING_CLASS = 'jp-RunningSessions';
/**
 * The class name added to a running widget header.
 */
const HEADER_CLASS = 'jp-RunningSessions-header';
/**
 * The class name added to the running terminal sessions section.
 */
const SECTION_CLASS = 'jp-RunningSessions-section';
/**
 * The class name added to the running sessions section header.
 */
const SECTION_HEADER_CLASS = 'jp-RunningSessions-sectionHeader';
/**
 * The class name added to a section container.
 */
const CONTAINER_CLASS = 'jp-RunningSessions-sectionContainer';
/**
 * The class name added to the running kernel sessions section list.
 */
const LIST_CLASS = 'jp-RunningSessions-sectionList';
/**
 * The class name added to the running sessions items.
 */
const ITEM_CLASS = 'jp-RunningSessions-item';
/**
 * The class name added to a running session item label.
 */
const ITEM_LABEL_CLASS = 'jp-RunningSessions-itemLabel';
/**
 * The class name added to a running session item detail.
 */
const ITEM_DETAIL_CLASS = 'jp-RunningSessions-itemDetail';
/**
 * The class name added to a running session item shutdown button.
 */
const SHUTDOWN_BUTTON_CLASS = 'jp-RunningSessions-itemShutdown';
/**
 * The class name added to a running session item shutdown button.
 */
const SHUTDOWN_ALL_BUTTON_CLASS = 'jp-RunningSessions-shutdownAll';
/**
 * The running sessions token.
 */
const IRunningSessionManagers = new _lumino_coreutils__WEBPACK_IMPORTED_MODULE_3__.Token('@jupyterlab/running:IRunningSessionManagers');
class RunningSessionManagers {
    constructor() {
        this._managers = [];
    }
    /**
     * Add a running item manager.
     *
     * @param manager - The running item manager.
     *
     */
    add(manager) {
        this._managers.push(manager);
        return new _lumino_disposable__WEBPACK_IMPORTED_MODULE_4__.DisposableDelegate(() => {
            const i = this._managers.indexOf(manager);
            if (i > -1) {
                this._managers.splice(i, 1);
            }
        });
    }
    /**
     * Return an iterator of launcher items.
     */
    items() {
        return this._managers;
    }
}
function Item(props) {
    var _a;
    const { runningItem } = props;
    const icon = runningItem.icon();
    const detail = (_a = runningItem.detail) === null || _a === void 0 ? void 0 : _a.call(runningItem);
    const translator = props.translator || _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_1__.nullTranslator;
    const trans = translator.load('jupyterlab');
    const shutdownLabel = props.shutdownLabel || trans.__('Shut Down');
    const shutdownItemIcon = props.shutdownItemIcon || _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2__.closeIcon;
    return (react__WEBPACK_IMPORTED_MODULE_5__.createElement("li", { className: ITEM_CLASS },
        react__WEBPACK_IMPORTED_MODULE_5__.createElement(icon.react, { tag: "span", stylesheet: "runningItem" }),
        react__WEBPACK_IMPORTED_MODULE_5__.createElement("span", { className: ITEM_LABEL_CLASS, title: runningItem.labelTitle ? runningItem.labelTitle() : '', onClick: () => runningItem.open() }, runningItem.label()),
        detail && react__WEBPACK_IMPORTED_MODULE_5__.createElement("span", { className: ITEM_DETAIL_CLASS }, detail),
        react__WEBPACK_IMPORTED_MODULE_5__.createElement(_jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2__.ToolbarButtonComponent, { className: SHUTDOWN_BUTTON_CLASS, icon: shutdownItemIcon, onClick: () => runningItem.shutdown(), tooltip: shutdownLabel })));
}
function ListView(props) {
    return (react__WEBPACK_IMPORTED_MODULE_5__.createElement("ul", { className: LIST_CLASS }, props.runningItems.map((item, i) => (react__WEBPACK_IMPORTED_MODULE_5__.createElement(Item, { key: i, runningItem: item, shutdownLabel: props.shutdownLabel, shutdownItemIcon: props.shutdownItemIcon, translator: props.translator })))));
}
function List(props) {
    return (react__WEBPACK_IMPORTED_MODULE_5__.createElement(_jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2__.UseSignal, { signal: props.manager.runningChanged }, () => (react__WEBPACK_IMPORTED_MODULE_5__.createElement(ListView, { runningItems: props.manager.running(), shutdownLabel: props.shutdownLabel, shutdownAllLabel: props.shutdownAllLabel, shutdownItemIcon: props.manager.shutdownItemIcon, translator: props.translator }))));
}
/**
 * The Section component contains the shared look and feel for an interactive
 * list of kernels and sessions.
 *
 * It is specialized for each based on its props.
 */
function Section(props) {
    const translator = props.translator || _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_1__.nullTranslator;
    const trans = translator.load('jupyterlab');
    const shutdownAllLabel = props.manager.shutdownAllLabel || trans.__('Shut Down All');
    const shutdownTitle = `${shutdownAllLabel}?`;
    const shutdownAllConfirmationText = props.manager.shutdownAllConfirmationText ||
        `${shutdownAllLabel} ${props.manager.name}`;
    function onShutdown() {
        void (0,_jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.showDialog)({
            title: shutdownTitle,
            body: shutdownAllConfirmationText,
            buttons: [
                _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.Dialog.cancelButton(),
                _jupyterlab_apputils__WEBPACK_IMPORTED_MODULE_0__.Dialog.warnButton({ label: shutdownAllLabel })
            ]
        }).then(result => {
            if (result.button.accept) {
                props.manager.shutdownAll();
            }
        });
    }
    return (react__WEBPACK_IMPORTED_MODULE_5__.createElement("div", { className: SECTION_CLASS },
        react__WEBPACK_IMPORTED_MODULE_5__.createElement(react__WEBPACK_IMPORTED_MODULE_5__.Fragment, null,
            react__WEBPACK_IMPORTED_MODULE_5__.createElement("div", { className: `${SECTION_HEADER_CLASS} jp-stack-panel-header` },
                react__WEBPACK_IMPORTED_MODULE_5__.createElement("h2", null, props.manager.name),
                react__WEBPACK_IMPORTED_MODULE_5__.createElement(_jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2__.UseSignal, { signal: props.manager.runningChanged }, () => {
                    const disabled = props.manager.running().length === 0;
                    return (react__WEBPACK_IMPORTED_MODULE_5__.createElement("button", { className: `${SHUTDOWN_ALL_BUTTON_CLASS} jp-mod-styled ${disabled && 'jp-mod-disabled'}`, disabled: disabled, onClick: onShutdown }, shutdownAllLabel));
                })),
            react__WEBPACK_IMPORTED_MODULE_5__.createElement("div", { className: CONTAINER_CLASS },
                react__WEBPACK_IMPORTED_MODULE_5__.createElement(List, { manager: props.manager, shutdownLabel: props.manager.shutdownLabel, shutdownAllLabel: shutdownAllLabel, translator: props.translator })))));
}
function RunningSessionsComponent(props) {
    const translator = props.translator || _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_1__.nullTranslator;
    const trans = translator.load('jupyterlab');
    return (react__WEBPACK_IMPORTED_MODULE_5__.createElement(react__WEBPACK_IMPORTED_MODULE_5__.Fragment, null,
        react__WEBPACK_IMPORTED_MODULE_5__.createElement("div", { className: HEADER_CLASS },
            react__WEBPACK_IMPORTED_MODULE_5__.createElement(_jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2__.ToolbarButtonComponent, { tooltip: trans.__('Refresh List'), icon: _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2__.refreshIcon, onClick: () => props.managers.items().forEach(manager => manager.refreshRunning()) })),
        props.managers.items().map(manager => (react__WEBPACK_IMPORTED_MODULE_5__.createElement(Section, { key: manager.name, manager: manager, translator: props.translator })))));
}
/**
 * A class that exposes the running terminal and kernel sessions.
 */
class RunningSessions extends _jupyterlab_ui_components__WEBPACK_IMPORTED_MODULE_2__.ReactWidget {
    /**
     * Construct a new running widget.
     */
    constructor(managers, translator) {
        super();
        this.managers = managers;
        this.translator = translator || _jupyterlab_translation__WEBPACK_IMPORTED_MODULE_1__.nullTranslator;
        // this can't be in the react element, because then it would be too nested
        this.addClass(RUNNING_CLASS);
    }
    render() {
        return (react__WEBPACK_IMPORTED_MODULE_5__.createElement(RunningSessionsComponent, { managers: this.managers, translator: this.translator }));
    }
}


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFja2FnZXNfcnVubmluZ19saWJfaW5kZXhfanMtXzFhMTYwLjk0MmJmYTM5N2I1YmJlNzVjOGM2LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLDBDQUEwQztBQUMxQywyREFBMkQ7QUFDM0Q7OztHQUdHO0FBRXVEO0FBQ1k7QUFRbkM7QUFDTztBQUMyQjtBQUV0QztBQUUvQjs7R0FFRztBQUNILE1BQU0sYUFBYSxHQUFHLG9CQUFvQixDQUFDO0FBRTNDOztHQUVHO0FBQ0gsTUFBTSxZQUFZLEdBQUcsMkJBQTJCLENBQUM7QUFFakQ7O0dBRUc7QUFDSCxNQUFNLGFBQWEsR0FBRyw0QkFBNEIsQ0FBQztBQUVuRDs7R0FFRztBQUNILE1BQU0sb0JBQW9CLEdBQUcsa0NBQWtDLENBQUM7QUFFaEU7O0dBRUc7QUFDSCxNQUFNLGVBQWUsR0FBRyxxQ0FBcUMsQ0FBQztBQUU5RDs7R0FFRztBQUNILE1BQU0sVUFBVSxHQUFHLGdDQUFnQyxDQUFDO0FBRXBEOztHQUVHO0FBQ0gsTUFBTSxVQUFVLEdBQUcseUJBQXlCLENBQUM7QUFFN0M7O0dBRUc7QUFDSCxNQUFNLGdCQUFnQixHQUFHLDhCQUE4QixDQUFDO0FBRXhEOztHQUVHO0FBQ0gsTUFBTSxpQkFBaUIsR0FBRywrQkFBK0IsQ0FBQztBQUUxRDs7R0FFRztBQUNILE1BQU0scUJBQXFCLEdBQUcsaUNBQWlDLENBQUM7QUFFaEU7O0dBRUc7QUFDSCxNQUFNLHlCQUF5QixHQUFHLGdDQUFnQyxDQUFDO0FBRW5FOztHQUVHO0FBQ0ksTUFBTSx1QkFBdUIsR0FBRyxJQUFJLG9EQUFLLENBQzlDLDZDQUE2QyxDQUM5QyxDQUFDO0FBbUJLLE1BQU0sc0JBQXNCO0lBQW5DO1FBeUJVLGNBQVMsR0FBZ0MsRUFBRSxDQUFDO0lBQ3RELENBQUM7SUF6QkM7Ozs7O09BS0c7SUFDSCxHQUFHLENBQUMsT0FBa0M7UUFDcEMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFD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QUMsS0FBSyxFQUFFLENBQUMsT0FBTyxDQUFDLE9BQU8sQ0FBQyxFQUFFLENBQUMsT0FBTyxDQUFDLGNBQWMsRUFBRSxDQUFDLEdBRXJFLENBQ0U7UUFDTCxLQUFLLENBQUMsUUFBUSxDQUFDLEtBQUssRUFBRSxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQ3JDLGlEQUFDLE9BQU8sSUFDTixHQUFHLEVBQUUsT0FBTyxDQUFDLElBQUksRUFDakIsT0FBTyxFQUFFLE9BQU8sRUFDaEIsVUFBVSxFQUFFLEtBQUssQ0FBQyxVQUFVLEdBQzVCLENBQ0gsQ0FBQyxDQUNELENBQ0osQ0FBQztBQUNKLENBQUM7QUFFRDs7R0FFRztBQUNJLE1BQU0sZUFBZ0IsU0FBUSxrRUFBVztJQUM5Qzs7T0FFRztJQUNILFlBQVksUUFBaUMsRUFBRSxVQUF3QjtRQUNyRSxLQUFLLEVBQUUsQ0FBQztRQUNSLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDO1FBQ3pCLElBQUksQ0FBQyxVQUFVLEdBQUcsVUFBVSxJQUFJLG1FQUFjLENBQUM7UUFFL0MsMEVBQTBFO1FBQzFFLElBQUksQ0FBQyxRQUFRLENBQUMsYUFBYSxDQUFDLENBQUM7SUFDL0IsQ0FBQztJQUVTLE1BQU07UUFDZCxPQUFPLENBQ0wsaURBQUMsd0JBQXdCLElBQ3ZCLFFBQVEsRUFBRSxJQUFJLENBQUMsUUFBUSxFQUN2QixVQUFVLEVBQUUsSUFBSSxDQUFDLFVBQVUsR0FDM0IsQ0FDSCxDQUFDO0lBQ0osQ0FBQztDQUlGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4uLy4uL3BhY2thZ2VzL3J1bm5pbmcvc3JjL2luZGV4LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDb3B5cmlnaHQgKGMpIEp1cHl0ZXIgRGV2ZWxvcG1lbnQgVGVhbS5cbi8vIERpc3RyaWJ1dGVkIHVuZGVyIHRoZSB0ZXJtcyBvZiB0aGUgTW9kaWZpZWQgQlNEIExpY2Vuc2UuXG4vKipcbiAqIEBwYWNrYWdlRG9jdW1lbnRhdGlvblxuICogQG1vZHVsZSBydW5uaW5nXG4gKi9cblxuaW1wb3J0IHsgRGlhbG9nLCBzaG93RGlhbG9nIH0gZnJvbSAnQGp1cHl0ZXJsYWIvYXBwdXRpbHMnO1xuaW1wb3J0IHsgSVRyYW5zbGF0b3IsIG51bGxUcmFuc2xhdG9yIH0gZnJvbSAnQGp1cHl0ZXJsYWIvdHJhbnNsYXRpb24nO1xuaW1wb3J0IHtcbiAgY2xvc2VJY29uLFxuICBMYWJJY29uLFxuICBSZWFjdFdpZGdldCxcbiAgcmVmcmVzaEljb24sXG4gIFRvb2xiYXJCdXR0b25Db21wb25lbnQsXG4gIFVzZVNpZ25hbFxufSBmcm9tICdAanVweXRlcmxhYi91aS1jb21wb25lbnRzJztcbmltcG9ydCB7IFRva2VuIH0gZnJvbSAnQGx1bWluby9jb3JldXRpbHMnO1xuaW1wb3J0IHsgRGlzcG9zYWJsZURlbGVnYXRlLCBJRGlzcG9zYWJsZSB9IGZyb20gJ0BsdW1pbm8vZGlzcG9zYWJsZSc7XG5pbXBvcnQgeyBJU2lnbmFsIH0gZnJvbSAnQGx1bWluby9zaWduYWxpbmcnO1xuaW1wb3J0ICogYXMgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG4vKipcbiAqIFRoZSBjbGFzcyBuYW1lIGFkZGVkIHRvIGEgcnVubmluZyB3aWRnZXQuXG4gKi9cbmNvbnN0IFJVTk5JTkdfQ0xBU1MgPSAnanAtUnVubmluZ1Nlc3Npb25zJztcblxuLyoqXG4gKiBUaGUgY2xhc3MgbmFtZSBhZGRlZCB0byBhIHJ1bm5pbmcgd2lkZ2V0IGhlYWRlci5cbiAqL1xuY29uc3QgSEVBREVSX0NMQVNTID0gJ2pwLVJ1bm5pbmdTZXNzaW9ucy1oZWFkZXInO1xuXG4vKipcbiAqIFRoZSBjbGFzcyBuYW1lIGFkZGVkIHRvIHRoZSBydW5uaW5nIHRlcm1pbmFsIHNlc3Npb25zIHNlY3Rpb24uXG4gKi9cbmNvbnN0IFNFQ1RJT05fQ0xBU1MgPSAnanAtUnVubmluZ1Nlc3Npb25zLXNlY3Rpb24nO1xuXG4vKipcbiAqIFRoZSBjbGFzcyBuYW1lIGFkZGVkIHRvIHRoZSBydW5uaW5nIHNlc3Npb25zIHNlY3Rpb24gaGVhZGVyLlxuICovXG5jb25zdCBTRUNUSU9OX0hFQURFUl9DTEFTUyA9ICdqcC1SdW5uaW5nU2Vzc2lvbnMtc2VjdGlvbkhlYWRlcic7XG5cbi8qKlxuICogVGhlIGNsYXNzIG5hbWUgYWRkZWQgdG8gYSBzZWN0aW9uIGNvbnRhaW5lci5cbiAqL1xuY29uc3QgQ09OVEFJTkVSX0NMQVNTID0gJ2pwLVJ1bm5pbmdTZXNzaW9ucy1zZWN0aW9uQ29udGFpbmVyJztcblxuLyoqXG4gKiBUaGUgY2xhc3MgbmFtZSBhZGRlZCB0byB0aGUgcnVubmluZyBrZXJuZWwgc2Vzc2lvbnMgc2VjdGlvbiBsaXN0LlxuICovXG5jb25zdCBMSVNUX0NMQVNTID0gJ2pwLVJ1bm5pbmdTZXNzaW9ucy1zZWN0aW9uTGlzdCc7XG5cbi8qKlxuICogVGhlIGNsYXNzIG5hbWUgYWRkZWQgdG8gdGhlIHJ1bm5pbmcgc2Vzc2lvbnMgaXRlbXMuXG4gKi9cbmNvbnN0IElURU1fQ0xBU1MgPSAnanAtUnVubmluZ1Nlc3Npb25zLWl0ZW0nO1xuXG4vKipcbiAqIFRoZSBjbGFzcyBuYW1lIGFkZGVkIHRvIGEgcnVubmluZyBzZXNzaW9uIGl0ZW0gbGFiZWwuXG4gKi9cbmNvbnN0IElURU1fTEFCRUxfQ0xBU1MgPSAnanAtUnVubmluZ1Nlc3Npb25zLWl0ZW1MYWJlbCc7XG5cbi8qKlxuICogVGhlIGNsYXNzIG5hbWUgYWRkZWQgdG8gYSBydW5uaW5nIHNlc3Npb24gaXRlbSBkZXRhaWwuXG4gKi9cbmNvbnN0IElURU1fREVUQUlMX0NMQVNTID0gJ2pwLVJ1bm5pbmdTZXNzaW9ucy1pdGVtRGV0YWlsJztcblxuLyoqXG4gKiBUaGUgY2xhc3MgbmFtZSBhZGRlZCB0byBhIHJ1bm5pbmcgc2Vzc2lvbiBpdGVtIHNodXRkb3duIGJ1dHRvbi5cbiAqL1xuY29uc3QgU0hVVERPV05fQlVUVE9OX0NMQVNTID0gJ2pwLVJ1bm5pbmdTZXNzaW9ucy1pdGVtU2h1dGRvd24nO1xuXG4vKipcbiAqIFRoZSBjbGFzcyBuYW1lIGFkZGVkIHRvIGEgcnVubmluZyBzZXNzaW9uIGl0ZW0gc2h1dGRvd24gYnV0dG9uLlxuICovXG5jb25zdCBTSFVURE9XTl9BTExfQlVUVE9OX0NMQVNTID0gJ2pwLVJ1bm5pbmdTZXNzaW9ucy1zaHV0ZG93bkFsbCc7XG5cbi8qKlxuICogVGhlIHJ1bm5pbmcgc2Vzc2lvbnMgdG9rZW4uXG4gKi9cbmV4cG9ydCBjb25zdCBJUnVubmluZ1Nlc3Npb25NYW5hZ2VycyA9IG5ldyBUb2tlbjxJUnVubmluZ1Nlc3Npb25NYW5hZ2Vycz4oXG4gICdAanVweXRlcmxhYi9ydW5uaW5nOklSdW5uaW5nU2Vzc2lvbk1hbmFnZXJzJ1xuKTtcblxuLyoqXG4gKiBUaGUgcnVubmluZyBpbnRlcmZhY2UuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgSVJ1bm5pbmdTZXNzaW9uTWFuYWdlcnMge1xuICAvKipcbiAgICogQWRkIGEgcnVubmluZyBpdGVtIG1hbmFnZXIuXG4gICAqXG4gICAqIEBwYXJhbSBtYW5hZ2VyIC0gVGhlIHJ1bm5pbmcgaXRlbSBtYW5hZ2VyLlxuICAgKlxuICAgKi9cbiAgYWRkKG1hbmFnZXI6IElSdW5uaW5nU2Vzc2lvbnMuSU1hbmFnZXIpOiBJRGlzcG9zYWJsZTtcbiAgLyoqXG4gICAqIFJldHVybiBhbiBhcnJheSBvZiBtYW5hZ2Vycy5cbiAgICovXG4gIGl0ZW1zKCk6IFJlYWRvbmx5QXJyYXk8SVJ1bm5pbmdTZXNzaW9ucy5JTWFuYWdlcj47XG59XG5cbmV4cG9ydCBjbGFzcyBSdW5uaW5nU2Vzc2lvbk1hbmFnZXJzIGltcGxlbWVudHMgSVJ1bm5pbmdTZXNzaW9uTWFuYWdlcnMge1xuICAvKipcbiAgICogQWRkIGEgcnVubmluZyBpdGVtIG1hbmFnZXIuXG4gICAqXG4gICAqIEBwYXJhbSBtYW5hZ2VyIC0gVGhlIHJ1bm5pbmcgaXRlbSBtYW5hZ2VyLlxuICAgKlxuICAgKi9cbiAgYWRkKG1hbmFnZXI6IElSdW5uaW5nU2Vzc2lvbnMuSU1hbmFnZXIpOiBJRGlzcG9zYWJsZSB7XG4gICAgdGhpcy5fbWFuYWdlcnMucHVzaChtYW5hZ2VyKTtcbiAgICByZXR1cm4gbmV3IERpc3Bvc2FibGVEZWxlZ2F0ZSgoKSA9PiB7XG4gICAgICBjb25zdCBpID0gdGhpcy5fbWFuYWdlcnMuaW5kZXhPZihtYW5hZ2VyKTtcblxuICAgICAgaWYgKGkgPiAtMSkge1xuICAgICAgICB0aGlzLl9tYW5hZ2Vycy5zcGxpY2UoaSwgMSk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJuIGFuIGl0ZXJhdG9yIG9mIGxhdW5jaGVyIGl0ZW1zLlxuICAgKi9cbiAgaXRlbXMoKTogUmVhZG9ubHlBcnJheTxJUnVubmluZ1Nlc3Npb25zLklNYW5hZ2VyPiB7XG4gICAgcmV0dXJuIHRoaXMuX21hbmFnZXJzO1xuICB9XG5cbiAgcHJpdmF0ZSBfbWFuYWdlcnM6IElSdW5uaW5nU2Vzc2lvbnMuSU1hbmFnZXJbXSA9IFtdO1xufVxuXG5mdW5jdGlvbiBJdGVtKHByb3BzOiB7XG4gIHJ1bm5pbmdJdGVtOiBJUnVubmluZ1Nlc3Npb25zLklSdW5uaW5nSXRlbTtcbiAgc2h1dGRvd25MYWJlbD86IHN0cmluZztcbiAgc2h1dGRvd25JdGVtSWNvbj86IExhYkljb247XG4gIHRyYW5zbGF0b3I/OiBJVHJhbnNsYXRvcjtcbn0pIHtcbiAgY29uc3QgeyBydW5uaW5nSXRlbSB9ID0gcHJvcHM7XG4gIGNvbnN0IGljb24gPSBydW5uaW5nSXRlbS5pY29uKCk7XG4gIGNvbnN0IGRldGFpbCA9IHJ1bm5pbmdJdGVtLmRldGFpbD8uKCk7XG4gIGNvbnN0IHRyYW5zbGF0b3IgPSBwcm9wcy50cmFuc2xhdG9yIHx8IG51bGxUcmFuc2xhdG9yO1xuICBjb25zdCB0cmFucyA9IHRyYW5zbGF0b3IubG9hZCgnanVweXRlcmxhYicpO1xuICBjb25zdCBzaHV0ZG93bkxhYmVsID0gcHJvcHMuc2h1dGRvd25MYWJlbCB8fCB0cmFucy5fXygnU2h1dCBEb3duJyk7XG4gIGNvbnN0IHNodXRkb3duSXRlbUljb24gPSBwcm9wcy5zaHV0ZG93bkl0ZW1JY29uIHx8IGNsb3NlSWNvbjtcblxuICByZXR1cm4gKFxuICAgIDxsaSBjbGFzc05hbWU9e0lURU1fQ0xBU1N9PlxuICAgICAgPGljb24ucmVhY3QgdGFnPVwic3BhblwiIHN0eWxlc2hlZXQ9XCJydW5uaW5nSXRlbVwiIC8+XG4gICAgICA8c3BhblxuICAgICAgICBjbGFzc05hbWU9e0lURU1fTEFCRUxfQ0xBU1N9XG4gICAgICAgIHRpdGxlPXtydW5uaW5nSXRlbS5sYWJlbFRpdGxlID8gcnVubmluZ0l0ZW0ubGFiZWxUaXRsZSgpIDogJyd9XG4gICAgICAgIG9uQ2xpY2s9eygpID0+IHJ1bm5pbmdJdGVtLm9wZW4oKX1cbiAgICAgID5cbiAgICAgICAge3J1bm5pbmdJdGVtLmxhYmVsKCl9XG4gICAgICA8L3NwYW4+XG4gICAgICB7ZGV0YWlsICYmIDxzcGFuIGNsYXNzTmFtZT17SVRFTV9ERVRBSUxfQ0xBU1N9PntkZXRhaWx9PC9zcGFuPn1cbiAgICAgIDxUb29sYmFyQnV0dG9uQ29tcG9uZW50XG4gICAgICAgIGNsYXNzTmFtZT17U0hVVERPV05fQlVUVE9OX0NMQVNTfVxuICAgICAgICBpY29uPXtzaHV0ZG93bkl0ZW1JY29ufVxuICAgICAgICBvbkNsaWNrPXsoKSA9PiBydW5uaW5nSXRlbS5zaHV0ZG93bigpfVxuICAgICAgICB0b29sdGlwPXtzaHV0ZG93bkxhYmVsfVxuICAgICAgLz5cbiAgICA8L2xpPlxuICApO1xufVxuXG5mdW5jdGlvbiBMaXN0Vmlldyhwcm9wczoge1xuICBydW5uaW5nSXRlbXM6IElSdW5uaW5nU2Vzc2lvbnMuSVJ1bm5pbmdJdGVtW107XG4gIHNodXRkb3duTGFiZWw/OiBzdHJpbmc7XG4gIHNodXRkb3duQWxsTGFiZWw/OiBzdHJpbmc7XG4gIHNodXRkb3duSXRlbUljb24/OiBMYWJJY29uO1xuICB0cmFuc2xhdG9yPzogSVRyYW5zbGF0b3I7XG59KSB7XG4gIHJldHVybiAoXG4gICAgPHVsIGNsYXNzTmFtZT17TElTVF9DTEFTU30+XG4gICAgICB7cHJvcHMucnVubmluZ0l0ZW1zLm1hcCgoaXRlbSwgaSkgPT4gKFxuICAgICAgICA8SXRlbVxuICAgICAgICAgIGtleT17aX1cbiAgICAgICAgICBydW5uaW5nSXRlbT17aXRlbX1cbiAgICAgICAgICBzaHV0ZG93bkxhYmVsPXtwcm9wcy5zaHV0ZG93bkxhYmVsfVxuICAgICAgICAgIHNodXRkb3duSXRlbUljb249e3Byb3BzLnNodXRkb3duSXRlbUljb259XG4gICAgICAgICAgdHJhbnNsYXRvcj17cHJvcHMudHJhbnNsYXRvcn1cbiAgICAgICAgLz5cbiAgICAgICkpfVxuICAgIDwvdWw+XG4gICk7XG59XG5cbmZ1bmN0aW9uIExpc3QocHJvcHM6IHtcbiAgbWFuYWdlcjogSVJ1bm5pbmdTZXNzaW9ucy5JTWFuYWdlcjtcbiAgc2h1dGRvd25MYWJlbD86IHN0cmluZztcbiAgc2h1dGRvd25BbGxMYWJlbD86IHN0cmluZztcbiAgdHJhbnNsYXRvcj86IElUcmFuc2xhdG9yO1xufSkge1xuICByZXR1cm4gKFxuICAgIDxVc2VTaWduYWwgc2lnbmFsPXtwcm9wcy5tYW5hZ2VyLnJ1bm5pbmdDaGFuZ2VkfT5cbiAgICAgIHsoKSA9PiAoXG4gICAgICAgIDxMaXN0Vmlld1xuICAgICAgICAgIHJ1bm5pbmdJdGVtcz17cHJvcHMubWFuYWdlci5ydW5uaW5nKCl9XG4gICAgICAgICAgc2h1dGRvd25MYWJlbD17cHJvcHMuc2h1dGRvd25MYWJlbH1cbiAgICAgICAgICBzaHV0ZG93bkFsbExhYmVsPXtwcm9wcy5zaHV0ZG93bkFsbExhYmVsfVxuICAgICAgICAgIHNodXRkb3duSXRlbUljb249e3Byb3BzLm1hbmFnZXIuc2h1dGRvd25JdGVtSWNvbn1cbiAgICAgICAgICB0cmFuc2xhdG9yPXtwcm9wcy50cmFuc2xhdG9yfVxuICAgICAgICAvPlxuICAgICAgKX1cbiAgICA8L1VzZVNpZ25hbD5cbiAgKTtcbn1cblxuLyoqXG4gKiBUaGUgU2VjdGlvbiBjb21wb25lbnQgY29udGFpbnMgdGhlIHNoYXJlZCBsb29rIGFuZCBmZWVsIGZvciBhbiBpbnRlcmFjdGl2ZVxuICogbGlzdCBvZiBrZXJuZWxzIGFuZCBzZXNzaW9ucy5cbiAqXG4gKiBJdCBpcyBzcGVjaWFsaXplZCBmb3IgZWFjaCBiYXNlZCBvbiBpdHMgcHJvcHMuXG4gKi9cbmZ1bmN0aW9uIFNlY3Rpb24ocHJvcHM6IHtcbiAgbWFuYWdlcjogSVJ1bm5pbmdTZXNzaW9ucy5JTWFuYWdlcjtcbiAgdHJhbnNsYXRvcj86IElUcmFuc2xhdG9yO1xufSkge1xuICBjb25zdCB0cmFuc2xhdG9yID0gcHJvcHMudHJhbnNsYXRvciB8fCBudWxsVHJhbnNsYXRvcjtcbiAgY29uc3QgdHJhbnMgPSB0cmFuc2xhdG9yLmxvYWQoJ2p1cHl0ZXJsYWInKTtcbiAgY29uc3Qgc2h1dGRvd25BbGxMYWJlbCA9XG4gICAgcHJvcHMubWFuYWdlci5zaHV0ZG93bkFsbExhYmVsIHx8IHRyYW5zLl9fKCdTaHV0IERvd24gQWxsJyk7XG4gIGNvbnN0IHNodXRkb3duVGl0bGUgPSBgJHtzaHV0ZG93bkFsbExhYmVsfT9gO1xuICBjb25zdCBzaHV0ZG93bkFsbENvbmZpcm1hdGlvblRleHQgPVxuICAgIHByb3BzLm1hbmFnZXIuc2h1dGRvd25BbGxDb25maXJtYXRpb25UZXh0IHx8XG4gICAgYCR7c2h1dGRvd25BbGxMYWJlbH0gJHtwcm9wcy5tYW5hZ2VyLm5hbWV9YDtcbiAgZnVuY3Rpb24gb25TaHV0ZG93bigpIHtcbiAgICB2b2lkIHNob3dEaWFsb2coe1xuICAgICAgdGl0bGU6IHNodXRkb3duVGl0bGUsXG4gICAgICBib2R5OiBzaHV0ZG93bkFsbENvbmZpcm1hdGlvblRleHQsXG4gICAgICBidXR0b25zOiBbXG4gICAgICAgIERpYWxvZy5jYW5jZWxCdXR0b24oKSxcbiAgICAgICAgRGlhbG9nLndhcm5CdXR0b24oeyBsYWJlbDogc2h1dGRvd25BbGxMYWJlbCB9KVxuICAgICAgXVxuICAgIH0pLnRoZW4ocmVzdWx0ID0+IHtcbiAgICAgIGlmIChyZXN1bHQuYnV0dG9uLmFjY2VwdCkge1xuICAgICAgICBwcm9wcy5tYW5hZ2VyLnNodXRkb3duQWxsKCk7XG4gICAgICB9XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPXtTRUNUSU9OX0NMQVNTfT5cbiAgICAgIDw+XG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtgJHtTRUNUSU9OX0hFQURFUl9DTEFTU30ganAtc3RhY2stcGFuZWwtaGVhZGVyYH0+XG4gICAgICAgICAgPGgyPntwcm9wcy5tYW5hZ2VyLm5hbWV9PC9oMj5cbiAgICAgICAgICA8VXNlU2lnbmFsIHNpZ25hbD17cHJvcHMubWFuYWdlci5ydW5uaW5nQ2hhbmdlZH0+XG4gICAgICAgICAgICB7KCkgPT4ge1xuICAgICAgICAgICAgICBjb25zdCBkaXNhYmxlZCA9IHByb3BzLm1hbmFnZXIucnVubmluZygpLmxlbmd0aCA9PT0gMDtcbiAgICAgICAgICAgICAgcmV0dXJuIChcbiAgICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Ake1NIVVRET1dOX0FMTF9CVVRUT05fQ0xBU1N9IGpwLW1vZC1zdHlsZWQgJHtcbiAgICAgICAgICAgICAgICAgICAgZGlzYWJsZWQgJiYgJ2pwLW1vZC1kaXNhYmxlZCdcbiAgICAgICAgICAgICAgICAgIH1gfVxuICAgICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2Rpc2FibGVkfVxuICAgICAgICAgICAgICAgICAgb25DbGljaz17b25TaHV0ZG93bn1cbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICB7c2h1dGRvd25BbGxMYWJlbH1cbiAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgKTtcbiAgICAgICAgICAgIH19XG4gICAgICAgICAgPC9Vc2VTaWduYWw+XG4gICAgICAgIDwvZGl2PlxuXG4gICAgICAgIDxkaXYgY2xhc3NOYW1lPXtDT05UQUlORVJfQ0xBU1N9PlxuICAgICAgICAgIDxMaXN0XG4gICAgICAgICAgICBtYW5hZ2VyPXtwcm9wcy5tYW5hZ2VyfVxuICAgICAgICAgICAgc2h1dGRvd25MYWJlbD17cHJvcHMubWFuYWdlci5zaHV0ZG93bkxhYmVsfVxuICAgICAgICAgICAgc2h1dGRvd25BbGxMYWJlbD17c2h1dGRvd25BbGxMYWJlbH1cbiAgICAgICAgICAgIHRyYW5zbGF0b3I9e3Byb3BzLnRyYW5zbGF0b3J9XG4gICAgICAgICAgLz5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8Lz5cbiAgICA8L2Rpdj5cbiAgKTtcbn1cblxuZnVuY3Rpb24gUnVubmluZ1Nlc3Npb25zQ29tcG9uZW50KHByb3BzOiB7XG4gIG1hbmFnZXJzOiBJUnVubmluZ1Nlc3Npb25NYW5hZ2VycztcbiAgdHJhbnNsYXRvcj86IElUcmFuc2xhdG9yO1xufSkge1xuICBjb25zdCB0cmFuc2xhdG9yID0gcHJvcHMudHJhbnNsYXRvciB8fCBudWxsVHJhbnNsYXRvcjtcbiAgY29uc3QgdHJhbnMgPSB0cmFuc2xhdG9yLmxvYWQoJ2p1cHl0ZXJsYWInKTtcbiAgcmV0dXJuIChcbiAgICA8PlxuICAgICAgPGRpdiBjbGFzc05hbWU9e0hFQURFUl9DTEFTU30+XG4gICAgICAgIDxUb29sYmFyQnV0dG9uQ29tcG9uZW50XG4gICAgICAgICAgdG9vbHRpcD17dHJhbnMuX18oJ1JlZnJlc2ggTGlzdCcpfVxuICAgICAgICAgIGljb249e3JlZnJlc2hJY29ufVxuICAgICAgICAgIG9uQ2xpY2s9eygpID0+XG4gICAgICAgICAgICBwcm9wcy5tYW5hZ2Vycy5pdGVtcygpLmZvckVhY2gobWFuYWdlciA9PiBtYW5hZ2VyLnJlZnJlc2hSdW5uaW5nKCkpXG4gICAgICAgICAgfVxuICAgICAgICAvPlxuICAgICAgPC9kaXY+XG4gICAgICB7cHJvcHMubWFuYWdlcnMuaXRlbXMoKS5tYXAobWFuYWdlciA9PiAoXG4gICAgICAgIDxTZWN0aW9uXG4gICAgICAgICAga2V5PXttYW5hZ2VyLm5hbWV9XG4gICAgICAgICAgbWFuYWdlcj17bWFuYWdlcn1cbiAgICAgICAgICB0cmFuc2xhdG9yPXtwcm9wcy50cmFuc2xhdG9yfVxuICAgICAgICAvPlxuICAgICAgKSl9XG4gICAgPC8+XG4gICk7XG59XG5cbi8qKlxuICogQSBjbGFzcyB0aGF0IGV4cG9zZXMgdGhlIHJ1bm5pbmcgdGVybWluYWwgYW5kIGtlcm5lbCBzZXNzaW9ucy5cbiAqL1xuZXhwb3J0IGNsYXNzIFJ1bm5pbmdTZXNzaW9ucyBleHRlbmRzIFJlYWN0V2lkZ2V0IHtcbiAgLyoqXG4gICAqIENvbnN0cnVjdCBhIG5ldyBydW5uaW5nIHdpZGdldC5cbiAgICovXG4gIGNvbnN0cnVjdG9yKG1hbmFnZXJzOiBJUnVubmluZ1Nlc3Npb25NYW5hZ2VycywgdHJhbnNsYXRvcj86IElUcmFuc2xhdG9yKSB7XG4gICAgc3VwZXIoKTtcbiAgICB0aGlzLm1hbmFnZXJzID0gbWFuYWdlcnM7XG4gICAgdGhpcy50cmFuc2xhdG9yID0gdHJhbnNsYXRvciB8fCBudWxsVHJhbnNsYXRvcjtcblxuICAgIC8vIHRoaXMgY2FuJ3QgYmUgaW4gdGhlIHJlYWN0IGVsZW1lbnQsIGJlY2F1c2UgdGhlbiBpdCB3b3VsZCBiZSB0b28gbmVzdGVkXG4gICAgdGhpcy5hZGRDbGFzcyhSVU5OSU5HX0NMQVNTKTtcbiAgfVxuXG4gIHByb3RlY3RlZCByZW5kZXIoKTogSlNYLkVsZW1lbnQge1xuICAgIHJldHVybiAoXG4gICAgICA8UnVubmluZ1Nlc3Npb25zQ29tcG9uZW50XG4gICAgICAgIG1hbmFnZXJzPXt0aGlzLm1hbmFnZXJzfVxuICAgICAgICB0cmFuc2xhdG9yPXt0aGlzLnRyYW5zbGF0b3J9XG4gICAgICAvPlxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIG1hbmFnZXJzOiBJUnVubmluZ1Nlc3Npb25NYW5hZ2VycztcbiAgcHJvdGVjdGVkIHRyYW5zbGF0b3I6IElUcmFuc2xhdG9yO1xufVxuXG4vKipcbiAqIFRoZSBuYW1lc3BhY2UgZm9yIHRoZSBgSVJ1bm5pbmdTZXNzaW9uc2AgY2xhc3Mgc3RhdGljcy5cbiAqL1xuZXhwb3J0IG5hbWVzcGFjZSBJUnVubmluZ1Nlc3Npb25zIHtcbiAgLyoqXG4gICAqIEEgbWFuYWdlciBvZiBydW5uaW5nIGl0ZW1zIGdyb3VwZWQgdW5kZXIgYSBzaW5nbGUgc2VjdGlvbi5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgSU1hbmFnZXIge1xuICAgIC8vIE5hbWUgdGhhdCBpcyBzaG93biB0byB0aGUgdXNlciBpbiBwbHVyYWxcbiAgICBuYW1lOiBzdHJpbmc7XG4gICAgLy8gY2FsbGVkIHdoZW4gdGhlIHNodXRkb3duIGFsbCBidXR0b24gaXMgcHJlc3NlZFxuICAgIHNodXRkb3duQWxsKCk6IHZvaWQ7XG4gICAgLy8gbGlzdCB0aGUgcnVubmluZyBtb2RlbHMuXG4gICAgcnVubmluZygpOiBJUnVubmluZ0l0ZW1bXTtcbiAgICAvLyBGb3JjZSBhIHJlZnJlc2ggb2YgdGhlIHJ1bm5pbmcgbW9kZWxzLlxuICAgIHJlZnJlc2hSdW5uaW5nKCk6IHZvaWQ7XG4gICAgLy8gQSBzaWduYWwgdGhhdCBzaG91bGQgYmUgZW1pdHRlZCB3aGVuIHRoZSBpdGVtIGxpc3QgaGFzIGNoYW5nZWQuXG4gICAgcnVubmluZ0NoYW5nZWQ6IElTaWduYWw8YW55LCBhbnk+O1xuICAgIC8vIEEgc3RyaW5nIHVzZWQgdG8gZGVzY3JpYmUgdGhlIHNodXRkb3duIGFjdGlvbi5cbiAgICBzaHV0ZG93bkxhYmVsPzogc3RyaW5nO1xuICAgIC8vIEEgc3RyaW5nIHVzZWQgdG8gZGVzY3JpYmUgdGhlIHNodXRkb3duIGFsbCBhY3Rpb24uXG4gICAgc2h1dGRvd25BbGxMYWJlbD86IHN0cmluZztcbiAgICAvLyBBIHN0cmluZyB1c2VkIGFzIHRoZSBib2R5IHRleHQgaW4gdGhlIHNodXRkb3duIGFsbCBjb25maXJtYXRpb24gZGlhbG9nLlxuICAgIHNodXRkb3duQWxsQ29uZmlybWF0aW9uVGV4dD86IHN0cmluZztcbiAgICAvLyBUaGUgaWNvbiB0byBzaG93IGZvciBzaHV0dGluZyBkb3duIGFuIGluZGl2aWR1YWwgaXRlbSBpbiB0aGlzIHNlY3Rpb24uXG4gICAgc2h1dGRvd25JdGVtSWNvbj86IExhYkljb247XG4gIH1cblxuICAvKipcbiAgICogQSBydW5uaW5nIGl0ZW0uXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIElSdW5uaW5nSXRlbSB7XG4gICAgLy8gY2FsbGVkIHdoZW4gdGhlIHJ1bm5pbmcgaXRlbSBpcyBjbGlja2VkXG4gICAgb3BlbjogKCkgPT4gdm9pZDtcbiAgICAvLyBjYWxsZWQgd2hlbiB0aGUgc2h1dGRvd24gYnV0dG9uIGlzIHByZXNzZWQgb24gYSBwYXJ0aWN1bGFyIGl0ZW1cbiAgICBzaHV0ZG93bjogKCkgPT4gdm9pZDtcbiAgICAvLyBMYWJJY29uIHRvIHVzZSBhcyB0aGUgaWNvblxuICAgIGljb246ICgpID0+IExhYkljb247XG4gICAgLy8gY2FsbGVkIHRvIGRldGVybWluZSB0aGUgbGFiZWwgZm9yIGVhY2ggaXRlbVxuICAgIGxhYmVsOiAoKSA9PiBzdHJpbmc7XG4gICAgLy8gY2FsbGVkIHRvIGRldGVybWluZSB0aGUgYHRpdGxlYCBhdHRyaWJ1dGUgZm9yIGVhY2ggaXRlbSwgd2hpY2ggaXMgcmV2ZWFsZWQgb24gaG92ZXJcbiAgICBsYWJlbFRpdGxlPzogKCkgPT4gc3RyaW5nO1xuICAgIC8vIGNhbGxlZCB0byBkZXRlcm1pbmUgdGhlIGBkZXRhaWxgIGF0dHJpYnV0ZSB3aGljaCBpcyBzaG93biBvcHRpb25hbGx5XG4gICAgLy8gaW4gYSBjb2x1bW4gYWZ0ZXIgdGhlIGxhYmVsXG4gICAgZGV0YWlsPzogKCkgPT4gc3RyaW5nO1xuICB9XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=
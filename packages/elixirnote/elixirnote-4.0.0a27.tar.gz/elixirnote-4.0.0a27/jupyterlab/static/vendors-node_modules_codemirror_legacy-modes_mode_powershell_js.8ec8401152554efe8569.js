"use strict";
(self["webpackChunk_jupyterlab_application_top"] = self["webpackChunk_jupyterlab_application_top"] || []).push([["vendors-node_modules_codemirror_legacy-modes_mode_powershell_js"],{

/***/ "./node_modules/@codemirror/legacy-modes/mode/powershell.js":
/*!******************************************************************!*\
  !*** ./node_modules/@codemirror/legacy-modes/mode/powershell.js ***!
  \******************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
/* harmony export */ __webpack_require__.d(__webpack_exports__, {
/* harmony export */   "powerShell": () => (/* binding */ powerShell)
/* harmony export */ });
function buildRegexp(patterns, options) {
  options = options || {};
  var prefix = options.prefix !== undefined ? options.prefix : '^';
  var suffix = options.suffix !== undefined ? options.suffix : '\\b';

  for (var i = 0; i < patterns.length; i++) {
    if (patterns[i] instanceof RegExp) {
      patterns[i] = patterns[i].source;
    }
    else {
      patterns[i] = patterns[i].replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
    }
  }

  return new RegExp(prefix + '(' + patterns.join('|') + ')' + suffix, 'i');
}

var notCharacterOrDash = '(?=[^A-Za-z\\d\\-_]|$)';
var varNames = /[\w\-:]/
var keywords = buildRegexp([
  /begin|break|catch|continue|data|default|do|dynamicparam/,
  /else|elseif|end|exit|filter|finally|for|foreach|from|function|if|in/,
  /param|process|return|switch|throw|trap|try|until|where|while/
], { suffix: notCharacterOrDash });

var punctuation = /[\[\]{},;`\\\.]|@[({]/;
var wordOperators = buildRegexp([
  'f',
  /b?not/,
  /[ic]?split/, 'join',
  /is(not)?/, 'as',
  /[ic]?(eq|ne|[gl][te])/,
  /[ic]?(not)?(like|match|contains)/,
  /[ic]?replace/,
  /b?(and|or|xor)/
], { prefix: '-' });
var symbolOperators = /[+\-*\/%]=|\+\+|--|\.\.|[+\-*&^%:=!|\/]|<(?!#)|(?!#)>/;
var operators = buildRegexp([wordOperators, symbolOperators], { suffix: '' });

var numbers = /^((0x[\da-f]+)|((\d+\.\d+|\d\.|\.\d+|\d+)(e[\+\-]?\d+)?))[ld]?([kmgtp]b)?/i;

var identifiers = /^[A-Za-z\_][A-Za-z\-\_\d]*\b/;

var symbolBuiltins = /[A-Z]:|%|\?/i;
var namedBuiltins = buildRegexp([
  /Add-(Computer|Content|History|Member|PSSnapin|Type)/,
  /Checkpoint-Computer/,
  /Clear-(Content|EventLog|History|Host|Item(Property)?|Variable)/,
  /Compare-Object/,
  /Complete-Transaction/,
  /Connect-PSSession/,
  /ConvertFrom-(Csv|Json|SecureString|StringData)/,
  /Convert-Path/,
  /ConvertTo-(Csv|Html|Json|SecureString|Xml)/,
  /Copy-Item(Property)?/,
  /Debug-Process/,
  /Disable-(ComputerRestore|PSBreakpoint|PSRemoting|PSSessionConfiguration)/,
  /Disconnect-PSSession/,
  /Enable-(ComputerRestore|PSBreakpoint|PSRemoting|PSSessionConfiguration)/,
  /(Enter|Exit)-PSSession/,
  /Export-(Alias|Clixml|Console|Counter|Csv|FormatData|ModuleMember|PSSession)/,
  /ForEach-Object/,
  /Format-(Custom|List|Table|Wide)/,
  new RegExp('Get-(Acl|Alias|AuthenticodeSignature|ChildItem|Command|ComputerRestorePoint|Content|ControlPanelItem|Counter|Credential'
             + '|Culture|Date|Event|EventLog|EventSubscriber|ExecutionPolicy|FormatData|Help|History|Host|HotFix|Item|ItemProperty|Job'
             + '|Location|Member|Module|PfxCertificate|Process|PSBreakpoint|PSCallStack|PSDrive|PSProvider|PSSession|PSSessionConfiguration'
             + '|PSSnapin|Random|Service|TraceSource|Transaction|TypeData|UICulture|Unique|Variable|Verb|WinEvent|WmiObject)'),
  /Group-Object/,
  /Import-(Alias|Clixml|Counter|Csv|LocalizedData|Module|PSSession)/,
  /ImportSystemModules/,
  /Invoke-(Command|Expression|History|Item|RestMethod|WebRequest|WmiMethod)/,
  /Join-Path/,
  /Limit-EventLog/,
  /Measure-(Command|Object)/,
  /Move-Item(Property)?/,
  new RegExp('New-(Alias|Event|EventLog|Item(Property)?|Module|ModuleManifest|Object|PSDrive|PSSession|PSSessionConfigurationFile'
             + '|PSSessionOption|PSTransportOption|Service|TimeSpan|Variable|WebServiceProxy|WinEvent)'),
  /Out-(Default|File|GridView|Host|Null|Printer|String)/,
  /Pause/,
  /(Pop|Push)-Location/,
  /Read-Host/,
  /Receive-(Job|PSSession)/,
  /Register-(EngineEvent|ObjectEvent|PSSessionConfiguration|WmiEvent)/,
  /Remove-(Computer|Event|EventLog|Item(Property)?|Job|Module|PSBreakpoint|PSDrive|PSSession|PSSnapin|TypeData|Variable|WmiObject)/,
  /Rename-(Computer|Item(Property)?)/,
  /Reset-ComputerMachinePassword/,
  /Resolve-Path/,
  /Restart-(Computer|Service)/,
  /Restore-Computer/,
  /Resume-(Job|Service)/,
  /Save-Help/,
  /Select-(Object|String|Xml)/,
  /Send-MailMessage/,
  new RegExp('Set-(Acl|Alias|AuthenticodeSignature|Content|Date|ExecutionPolicy|Item(Property)?|Location|PSBreakpoint|PSDebug' +
             '|PSSessionConfiguration|Service|StrictMode|TraceSource|Variable|WmiInstance)'),
  /Show-(Command|ControlPanelItem|EventLog)/,
  /Sort-Object/,
  /Split-Path/,
  /Start-(Job|Process|Service|Sleep|Transaction|Transcript)/,
  /Stop-(Computer|Job|Process|Service|Transcript)/,
  /Suspend-(Job|Service)/,
  /TabExpansion2/,
  /Tee-Object/,
  /Test-(ComputerSecureChannel|Connection|ModuleManifest|Path|PSSessionConfigurationFile)/,
  /Trace-Command/,
  /Unblock-File/,
  /Undo-Transaction/,
  /Unregister-(Event|PSSessionConfiguration)/,
  /Update-(FormatData|Help|List|TypeData)/,
  /Use-Transaction/,
  /Wait-(Event|Job|Process)/,
  /Where-Object/,
  /Write-(Debug|Error|EventLog|Host|Output|Progress|Verbose|Warning)/,
  /cd|help|mkdir|more|oss|prompt/,
  /ac|asnp|cat|cd|chdir|clc|clear|clhy|cli|clp|cls|clv|cnsn|compare|copy|cp|cpi|cpp|cvpa|dbp|del|diff|dir|dnsn|ebp/,
  /echo|epal|epcsv|epsn|erase|etsn|exsn|fc|fl|foreach|ft|fw|gal|gbp|gc|gci|gcm|gcs|gdr|ghy|gi|gjb|gl|gm|gmo|gp|gps/,
  /group|gsn|gsnp|gsv|gu|gv|gwmi|h|history|icm|iex|ihy|ii|ipal|ipcsv|ipmo|ipsn|irm|ise|iwmi|iwr|kill|lp|ls|man|md/,
  /measure|mi|mount|move|mp|mv|nal|ndr|ni|nmo|npssc|nsn|nv|ogv|oh|popd|ps|pushd|pwd|r|rbp|rcjb|rcsn|rd|rdr|ren|ri/,
  /rjb|rm|rmdir|rmo|rni|rnp|rp|rsn|rsnp|rujb|rv|rvpa|rwmi|sajb|sal|saps|sasv|sbp|sc|select|set|shcm|si|sl|sleep|sls/,
  /sort|sp|spjb|spps|spsv|start|sujb|sv|swmi|tee|trcm|type|where|wjb|write/
], { prefix: '', suffix: '' });
var variableBuiltins = buildRegexp([
  /[$?^_]|Args|ConfirmPreference|ConsoleFileName|DebugPreference|Error|ErrorActionPreference|ErrorView|ExecutionContext/,
  /FormatEnumerationLimit|Home|Host|Input|MaximumAliasCount|MaximumDriveCount|MaximumErrorCount|MaximumFunctionCount/,
  /MaximumHistoryCount|MaximumVariableCount|MyInvocation|NestedPromptLevel|OutputEncoding|Pid|Profile|ProgressPreference/,
  /PSBoundParameters|PSCommandPath|PSCulture|PSDefaultParameterValues|PSEmailServer|PSHome|PSScriptRoot|PSSessionApplicationName/,
  /PSSessionConfigurationName|PSSessionOption|PSUICulture|PSVersionTable|Pwd|ShellId|StackTrace|VerbosePreference/,
  /WarningPreference|WhatIfPreference/,

  /Event|EventArgs|EventSubscriber|Sender/,
  /Matches|Ofs|ForEach|LastExitCode|PSCmdlet|PSItem|PSSenderInfo|This/,
  /true|false|null/
], { prefix: '\\$', suffix: '' });

var builtins = buildRegexp([symbolBuiltins, namedBuiltins, variableBuiltins], { suffix: notCharacterOrDash });

var grammar = {
  keyword: keywords,
  number: numbers,
  operator: operators,
  builtin: builtins,
  punctuation: punctuation,
  variable: identifiers
};

// tokenizers
function tokenBase(stream, state) {
  // Handle Comments
  //var ch = stream.peek();

  var parent = state.returnStack[state.returnStack.length - 1];
  if (parent && parent.shouldReturnFrom(state)) {
    state.tokenize = parent.tokenize;
    state.returnStack.pop();
    return state.tokenize(stream, state);
  }

  if (stream.eatSpace()) {
    return null;
  }

  if (stream.eat('(')) {
    state.bracketNesting += 1;
    return 'punctuation';
  }

  if (stream.eat(')')) {
    state.bracketNesting -= 1;
    return 'punctuation';
  }

  for (var key in grammar) {
    if (stream.match(grammar[key])) {
      return key;
    }
  }

  var ch = stream.next();

  // single-quote string
  if (ch === "'") {
    return tokenSingleQuoteString(stream, state);
  }

  if (ch === '$') {
    return tokenVariable(stream, state);
  }

  // double-quote string
  if (ch === '"') {
    return tokenDoubleQuoteString(stream, state);
  }

  if (ch === '<' && stream.eat('#')) {
    state.tokenize = tokenComment;
    return tokenComment(stream, state);
  }

  if (ch === '#') {
    stream.skipToEnd();
    return 'comment';
  }

  if (ch === '@') {
    var quoteMatch = stream.eat(/["']/);
    if (quoteMatch && stream.eol()) {
      state.tokenize = tokenMultiString;
      state.startQuote = quoteMatch[0];
      return tokenMultiString(stream, state);
    } else if (stream.eol()) {
      return 'error';
    } else if (stream.peek().match(/[({]/)) {
      return 'punctuation';
    } else if (stream.peek().match(varNames)) {
      // splatted variable
      return tokenVariable(stream, state);
    }
  }
  return 'error';
}

function tokenSingleQuoteString(stream, state) {
  var ch;
  while ((ch = stream.peek()) != null) {
    stream.next();

    if (ch === "'" && !stream.eat("'")) {
      state.tokenize = tokenBase;
      return 'string';
    }
  }

  return 'error';
}

function tokenDoubleQuoteString(stream, state) {
  var ch;
  while ((ch = stream.peek()) != null) {
    if (ch === '$') {
      state.tokenize = tokenStringInterpolation;
      return 'string';
    }

    stream.next();
    if (ch === '`') {
      stream.next();
      continue;
    }

    if (ch === '"' && !stream.eat('"')) {
      state.tokenize = tokenBase;
      return 'string';
    }
  }

  return 'error';
}

function tokenStringInterpolation(stream, state) {
  return tokenInterpolation(stream, state, tokenDoubleQuoteString);
}

function tokenMultiStringReturn(stream, state) {
  state.tokenize = tokenMultiString;
  state.startQuote = '"'
  return tokenMultiString(stream, state);
}

function tokenHereStringInterpolation(stream, state) {
  return tokenInterpolation(stream, state, tokenMultiStringReturn);
}

function tokenInterpolation(stream, state, parentTokenize) {
  if (stream.match('$(')) {
    var savedBracketNesting = state.bracketNesting;
    state.returnStack.push({
      /*jshint loopfunc:true */
      shouldReturnFrom: function(state) {
        return state.bracketNesting === savedBracketNesting;
      },
      tokenize: parentTokenize
    });
    state.tokenize = tokenBase;
    state.bracketNesting += 1;
    return 'punctuation';
  } else {
    stream.next();
    state.returnStack.push({
      shouldReturnFrom: function() { return true; },
      tokenize: parentTokenize
    });
    state.tokenize = tokenVariable;
    return state.tokenize(stream, state);
  }
}

function tokenComment(stream, state) {
  var maybeEnd = false, ch;
  while ((ch = stream.next()) != null) {
    if (maybeEnd && ch == '>') {
      state.tokenize = tokenBase;
      break;
    }
    maybeEnd = (ch === '#');
  }
  return 'comment';
}

function tokenVariable(stream, state) {
  var ch = stream.peek();
  if (stream.eat('{')) {
    state.tokenize = tokenVariableWithBraces;
    return tokenVariableWithBraces(stream, state);
  } else if (ch != undefined && ch.match(varNames)) {
    stream.eatWhile(varNames);
    state.tokenize = tokenBase;
    return 'variable';
  } else {
    state.tokenize = tokenBase;
    return 'error';
  }
}

function tokenVariableWithBraces(stream, state) {
  var ch;
  while ((ch = stream.next()) != null) {
    if (ch === '}') {
      state.tokenize = tokenBase;
      break;
    }
  }
  return 'variable';
}

function tokenMultiString(stream, state) {
  var quote = state.startQuote;
  if (stream.sol() && stream.match(new RegExp(quote + '@'))) {
    state.tokenize = tokenBase;
  }
  else if (quote === '"') {
    while (!stream.eol()) {
      var ch = stream.peek();
      if (ch === '$') {
        state.tokenize = tokenHereStringInterpolation;
        return 'string';
      }

      stream.next();
      if (ch === '`') {
        stream.next();
      }
    }
  }
  else {
    stream.skipToEnd();
  }

  return 'string';
}

const powerShell = {
  startState: function() {
    return {
      returnStack: [],
      bracketNesting: 0,
      tokenize: tokenBase
    };
  },

  token: function(stream, state) {
    return state.tokenize(stream, state);
  },

  languageData: {
    commentTokens: {line: "#", block: {open: "<#", close: "#>"}}
  }
};


/***/ })

}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidmVuZG9ycy1ub2RlX21vZHVsZXNfY29kZW1pcnJvcl9sZWdhY3ktbW9kZXNfbW9kZV9wb3dlcnNoZWxsX2pzLjhlYzg0MDExNTI1NTRlZmU4NTY5LmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSxrQkFBa0IscUJBQXFCO0FBQ3ZDO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkRBQTZEO0FBQzdEO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLDRCQUE0Qjs7QUFFakMsMEJBQTBCLEVBQUUsV0FBVztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLLGFBQWE7QUFDbEI7QUFDQSxnRUFBZ0UsWUFBWTs7QUFFNUU7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUssd0JBQXdCO0FBQzdCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUssMkJBQTJCOztBQUVoQyxnRkFBZ0YsNEJBQTRCOztBQUU1RztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0EsTUFBTSxpQ0FBaUM7QUFDdkM7QUFDQSxNQUFNO0FBQ047QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxPQUFPO0FBQ1A7QUFDQSxLQUFLO0FBQ0w7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQSxxQ0FBcUMsY0FBYztBQUNuRDtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxtQkFBbUI7QUFDbkI7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRU87QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0E7QUFDQSxHQUFHOztBQUVIO0FBQ0Esb0JBQW9CLG1CQUFtQjtBQUN2QztBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGp1cHl0ZXJsYWIvYXBwbGljYXRpb24tdG9wLy4vbm9kZV9tb2R1bGVzL0Bjb2RlbWlycm9yL2xlZ2FjeS1tb2Rlcy9tb2RlL3Bvd2Vyc2hlbGwuanMiXSwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gYnVpbGRSZWdleHAocGF0dGVybnMsIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG4gIHZhciBwcmVmaXggPSBvcHRpb25zLnByZWZpeCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5wcmVmaXggOiAnXic7XG4gIHZhciBzdWZmaXggPSBvcHRpb25zLnN1ZmZpeCAhPT0gdW5kZWZpbmVkID8gb3B0aW9ucy5zdWZmaXggOiAnXFxcXGInO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgcGF0dGVybnMubGVuZ3RoOyBpKyspIHtcbiAgICBpZiAocGF0dGVybnNbaV0gaW5zdGFuY2VvZiBSZWdFeHApIHtcbiAgICAgIHBhdHRlcm5zW2ldID0gcGF0dGVybnNbaV0uc291cmNlO1xuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgIHBhdHRlcm5zW2ldID0gcGF0dGVybnNbaV0ucmVwbGFjZSgvWy1cXC9cXFxcXiQqKz8uKCl8W1xcXXt9XS9nLCAnXFxcXCQmJyk7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBSZWdFeHAocHJlZml4ICsgJygnICsgcGF0dGVybnMuam9pbignfCcpICsgJyknICsgc3VmZml4LCAnaScpO1xufVxuXG52YXIgbm90Q2hhcmFjdGVyT3JEYXNoID0gJyg/PVteQS1aYS16XFxcXGRcXFxcLV9dfCQpJztcbnZhciB2YXJOYW1lcyA9IC9bXFx3XFwtOl0vXG52YXIga2V5d29yZHMgPSBidWlsZFJlZ2V4cChbXG4gIC9iZWdpbnxicmVha3xjYXRjaHxjb250aW51ZXxkYXRhfGRlZmF1bHR8ZG98ZHluYW1pY3BhcmFtLyxcbiAgL2Vsc2V8ZWxzZWlmfGVuZHxleGl0fGZpbHRlcnxmaW5hbGx5fGZvcnxmb3JlYWNofGZyb218ZnVuY3Rpb258aWZ8aW4vLFxuICAvcGFyYW18cHJvY2Vzc3xyZXR1cm58c3dpdGNofHRocm93fHRyYXB8dHJ5fHVudGlsfHdoZXJlfHdoaWxlL1xuXSwgeyBzdWZmaXg6IG5vdENoYXJhY3Rlck9yRGFzaCB9KTtcblxudmFyIHB1bmN0dWF0aW9uID0gL1tcXFtcXF17fSw7YFxcXFxcXC5dfEBbKHtdLztcbnZhciB3b3JkT3BlcmF0b3JzID0gYnVpbGRSZWdleHAoW1xuICAnZicsXG4gIC9iP25vdC8sXG4gIC9baWNdP3NwbGl0LywgJ2pvaW4nLFxuICAvaXMobm90KT8vLCAnYXMnLFxuICAvW2ljXT8oZXF8bmV8W2dsXVt0ZV0pLyxcbiAgL1tpY10/KG5vdCk/KGxpa2V8bWF0Y2h8Y29udGFpbnMpLyxcbiAgL1tpY10/cmVwbGFjZS8sXG4gIC9iPyhhbmR8b3J8eG9yKS9cbl0sIHsgcHJlZml4OiAnLScgfSk7XG52YXIgc3ltYm9sT3BlcmF0b3JzID0gL1srXFwtKlxcLyVdPXxcXCtcXCt8LS18XFwuXFwufFsrXFwtKiZeJTo9IXxcXC9dfDwoPyEjKXwoPyEjKT4vO1xudmFyIG9wZXJhdG9ycyA9IGJ1aWxkUmVnZXhwKFt3b3JkT3BlcmF0b3JzLCBzeW1ib2xPcGVyYXRvcnNdLCB7IHN1ZmZpeDogJycgfSk7XG5cbnZhciBudW1iZXJzID0gL14oKDB4W1xcZGEtZl0rKXwoKFxcZCtcXC5cXGQrfFxcZFxcLnxcXC5cXGQrfFxcZCspKGVbXFwrXFwtXT9cXGQrKT8pKVtsZF0/KFtrbWd0cF1iKT8vaTtcblxudmFyIGlkZW50aWZpZXJzID0gL15bQS1aYS16XFxfXVtBLVphLXpcXC1cXF9cXGRdKlxcYi87XG5cbnZhciBzeW1ib2xCdWlsdGlucyA9IC9bQS1aXTp8JXxcXD8vaTtcbnZhciBuYW1lZEJ1aWx0aW5zID0gYnVpbGRSZWdleHAoW1xuICAvQWRkLShDb21wdXRlcnxDb250ZW50fEhpc3Rvcnl8TWVtYmVyfFBTU25hcGlufFR5cGUpLyxcbiAgL0NoZWNrcG9pbnQtQ29tcHV0ZXIvLFxuICAvQ2xlYXItKENvbnRlbnR8RXZlbnRMb2d8SGlzdG9yeXxIb3N0fEl0ZW0oUHJvcGVydHkpP3xWYXJpYWJsZSkvLFxuICAvQ29tcGFyZS1PYmplY3QvLFxuICAvQ29tcGxldGUtVHJhbnNhY3Rpb24vLFxuICAvQ29ubmVjdC1QU1Nlc3Npb24vLFxuICAvQ29udmVydEZyb20tKENzdnxKc29ufFNlY3VyZVN0cmluZ3xTdHJpbmdEYXRhKS8sXG4gIC9Db252ZXJ0LVBhdGgvLFxuICAvQ29udmVydFRvLShDc3Z8SHRtbHxKc29ufFNlY3VyZVN0cmluZ3xYbWwpLyxcbiAgL0NvcHktSXRlbShQcm9wZXJ0eSk/LyxcbiAgL0RlYnVnLVByb2Nlc3MvLFxuICAvRGlzYWJsZS0oQ29tcHV0ZXJSZXN0b3JlfFBTQnJlYWtwb2ludHxQU1JlbW90aW5nfFBTU2Vzc2lvbkNvbmZpZ3VyYXRpb24pLyxcbiAgL0Rpc2Nvbm5lY3QtUFNTZXNzaW9uLyxcbiAgL0VuYWJsZS0oQ29tcHV0ZXJSZXN0b3JlfFBTQnJlYWtwb2ludHxQU1JlbW90aW5nfFBTU2Vzc2lvbkNvbmZpZ3VyYXRpb24pLyxcbiAgLyhFbnRlcnxFeGl0KS1QU1Nlc3Npb24vLFxuICAvRXhwb3J0LShBbGlhc3xDbGl4bWx8Q29uc29sZXxDb3VudGVyfENzdnxGb3JtYXREYXRhfE1vZHVsZU1lbWJlcnxQU1Nlc3Npb24pLyxcbiAgL0ZvckVhY2gtT2JqZWN0LyxcbiAgL0Zvcm1hdC0oQ3VzdG9tfExpc3R8VGFibGV8V2lkZSkvLFxuICBuZXcgUmVnRXhwKCdHZXQtKEFjbHxBbGlhc3xBdXRoZW50aWNvZGVTaWduYXR1cmV8Q2hpbGRJdGVtfENvbW1hbmR8Q29tcHV0ZXJSZXN0b3JlUG9pbnR8Q29udGVudHxDb250cm9sUGFuZWxJdGVtfENvdW50ZXJ8Q3JlZGVudGlhbCdcbiAgICAgICAgICAgICArICd8Q3VsdHVyZXxEYXRlfEV2ZW50fEV2ZW50TG9nfEV2ZW50U3Vic2NyaWJlcnxFeGVjdXRpb25Qb2xpY3l8Rm9ybWF0RGF0YXxIZWxwfEhpc3Rvcnl8SG9zdHxIb3RGaXh8SXRlbXxJdGVtUHJvcGVydHl8Sm9iJ1xuICAgICAgICAgICAgICsgJ3xMb2NhdGlvbnxNZW1iZXJ8TW9kdWxlfFBmeENlcnRpZmljYXRlfFByb2Nlc3N8UFNCcmVha3BvaW50fFBTQ2FsbFN0YWNrfFBTRHJpdmV8UFNQcm92aWRlcnxQU1Nlc3Npb258UFNTZXNzaW9uQ29uZmlndXJhdGlvbidcbiAgICAgICAgICAgICArICd8UFNTbmFwaW58UmFuZG9tfFNlcnZpY2V8VHJhY2VTb3VyY2V8VHJhbnNhY3Rpb258VHlwZURhdGF8VUlDdWx0dXJlfFVuaXF1ZXxWYXJpYWJsZXxWZXJifFdpbkV2ZW50fFdtaU9iamVjdCknKSxcbiAgL0dyb3VwLU9iamVjdC8sXG4gIC9JbXBvcnQtKEFsaWFzfENsaXhtbHxDb3VudGVyfENzdnxMb2NhbGl6ZWREYXRhfE1vZHVsZXxQU1Nlc3Npb24pLyxcbiAgL0ltcG9ydFN5c3RlbU1vZHVsZXMvLFxuICAvSW52b2tlLShDb21tYW5kfEV4cHJlc3Npb258SGlzdG9yeXxJdGVtfFJlc3RNZXRob2R8V2ViUmVxdWVzdHxXbWlNZXRob2QpLyxcbiAgL0pvaW4tUGF0aC8sXG4gIC9MaW1pdC1FdmVudExvZy8sXG4gIC9NZWFzdXJlLShDb21tYW5kfE9iamVjdCkvLFxuICAvTW92ZS1JdGVtKFByb3BlcnR5KT8vLFxuICBuZXcgUmVnRXhwKCdOZXctKEFsaWFzfEV2ZW50fEV2ZW50TG9nfEl0ZW0oUHJvcGVydHkpP3xNb2R1bGV8TW9kdWxlTWFuaWZlc3R8T2JqZWN0fFBTRHJpdmV8UFNTZXNzaW9ufFBTU2Vzc2lvbkNvbmZpZ3VyYXRpb25GaWxlJ1xuICAgICAgICAgICAgICsgJ3xQU1Nlc3Npb25PcHRpb258UFNUcmFuc3BvcnRPcHRpb258U2VydmljZXxUaW1lU3BhbnxWYXJpYWJsZXxXZWJTZXJ2aWNlUHJveHl8V2luRXZlbnQpJyksXG4gIC9PdXQtKERlZmF1bHR8RmlsZXxHcmlkVmlld3xIb3N0fE51bGx8UHJpbnRlcnxTdHJpbmcpLyxcbiAgL1BhdXNlLyxcbiAgLyhQb3B8UHVzaCktTG9jYXRpb24vLFxuICAvUmVhZC1Ib3N0LyxcbiAgL1JlY2VpdmUtKEpvYnxQU1Nlc3Npb24pLyxcbiAgL1JlZ2lzdGVyLShFbmdpbmVFdmVudHxPYmplY3RFdmVudHxQU1Nlc3Npb25Db25maWd1cmF0aW9ufFdtaUV2ZW50KS8sXG4gIC9SZW1vdmUtKENvbXB1dGVyfEV2ZW50fEV2ZW50TG9nfEl0ZW0oUHJvcGVydHkpP3xKb2J8TW9kdWxlfFBTQnJlYWtwb2ludHxQU0RyaXZlfFBTU2Vzc2lvbnxQU1NuYXBpbnxUeXBlRGF0YXxWYXJpYWJsZXxXbWlPYmplY3QpLyxcbiAgL1JlbmFtZS0oQ29tcHV0ZXJ8SXRlbShQcm9wZXJ0eSk/KS8sXG4gIC9SZXNldC1Db21wdXRlck1hY2hpbmVQYXNzd29yZC8sXG4gIC9SZXNvbHZlLVBhdGgvLFxuICAvUmVzdGFydC0oQ29tcHV0ZXJ8U2VydmljZSkvLFxuICAvUmVzdG9yZS1Db21wdXRlci8sXG4gIC9SZXN1bWUtKEpvYnxTZXJ2aWNlKS8sXG4gIC9TYXZlLUhlbHAvLFxuICAvU2VsZWN0LShPYmplY3R8U3RyaW5nfFhtbCkvLFxuICAvU2VuZC1NYWlsTWVzc2FnZS8sXG4gIG5ldyBSZWdFeHAoJ1NldC0oQWNsfEFsaWFzfEF1dGhlbnRpY29kZVNpZ25hdHVyZXxDb250ZW50fERhdGV8RXhlY3V0aW9uUG9saWN5fEl0ZW0oUHJvcGVydHkpP3xMb2NhdGlvbnxQU0JyZWFrcG9pbnR8UFNEZWJ1ZycgK1xuICAgICAgICAgICAgICd8UFNTZXNzaW9uQ29uZmlndXJhdGlvbnxTZXJ2aWNlfFN0cmljdE1vZGV8VHJhY2VTb3VyY2V8VmFyaWFibGV8V21pSW5zdGFuY2UpJyksXG4gIC9TaG93LShDb21tYW5kfENvbnRyb2xQYW5lbEl0ZW18RXZlbnRMb2cpLyxcbiAgL1NvcnQtT2JqZWN0LyxcbiAgL1NwbGl0LVBhdGgvLFxuICAvU3RhcnQtKEpvYnxQcm9jZXNzfFNlcnZpY2V8U2xlZXB8VHJhbnNhY3Rpb258VHJhbnNjcmlwdCkvLFxuICAvU3RvcC0oQ29tcHV0ZXJ8Sm9ifFByb2Nlc3N8U2VydmljZXxUcmFuc2NyaXB0KS8sXG4gIC9TdXNwZW5kLShKb2J8U2VydmljZSkvLFxuICAvVGFiRXhwYW5zaW9uMi8sXG4gIC9UZWUtT2JqZWN0LyxcbiAgL1Rlc3QtKENvbXB1dGVyU2VjdXJlQ2hhbm5lbHxDb25uZWN0aW9ufE1vZHVsZU1hbmlmZXN0fFBhdGh8UFNTZXNzaW9uQ29uZmlndXJhdGlvbkZpbGUpLyxcbiAgL1RyYWNlLUNvbW1hbmQvLFxuICAvVW5ibG9jay1GaWxlLyxcbiAgL1VuZG8tVHJhbnNhY3Rpb24vLFxuICAvVW5yZWdpc3Rlci0oRXZlbnR8UFNTZXNzaW9uQ29uZmlndXJhdGlvbikvLFxuICAvVXBkYXRlLShGb3JtYXREYXRhfEhlbHB8TGlzdHxUeXBlRGF0YSkvLFxuICAvVXNlLVRyYW5zYWN0aW9uLyxcbiAgL1dhaXQtKEV2ZW50fEpvYnxQcm9jZXNzKS8sXG4gIC9XaGVyZS1PYmplY3QvLFxuICAvV3JpdGUtKERlYnVnfEVycm9yfEV2ZW50TG9nfEhvc3R8T3V0cHV0fFByb2dyZXNzfFZlcmJvc2V8V2FybmluZykvLFxuICAvY2R8aGVscHxta2Rpcnxtb3JlfG9zc3xwcm9tcHQvLFxuICAvYWN8YXNucHxjYXR8Y2R8Y2hkaXJ8Y2xjfGNsZWFyfGNsaHl8Y2xpfGNscHxjbHN8Y2x2fGNuc258Y29tcGFyZXxjb3B5fGNwfGNwaXxjcHB8Y3ZwYXxkYnB8ZGVsfGRpZmZ8ZGlyfGRuc258ZWJwLyxcbiAgL2VjaG98ZXBhbHxlcGNzdnxlcHNufGVyYXNlfGV0c258ZXhzbnxmY3xmbHxmb3JlYWNofGZ0fGZ3fGdhbHxnYnB8Z2N8Z2NpfGdjbXxnY3N8Z2RyfGdoeXxnaXxnamJ8Z2x8Z218Z21vfGdwfGdwcy8sXG4gIC9ncm91cHxnc258Z3NucHxnc3Z8Z3V8Z3Z8Z3dtaXxofGhpc3Rvcnl8aWNtfGlleHxpaHl8aWl8aXBhbHxpcGNzdnxpcG1vfGlwc258aXJtfGlzZXxpd21pfGl3cnxraWxsfGxwfGxzfG1hbnxtZC8sXG4gIC9tZWFzdXJlfG1pfG1vdW50fG1vdmV8bXB8bXZ8bmFsfG5kcnxuaXxubW98bnBzc2N8bnNufG52fG9ndnxvaHxwb3BkfHBzfHB1c2hkfHB3ZHxyfHJicHxyY2pifHJjc258cmR8cmRyfHJlbnxyaS8sXG4gIC9yamJ8cm18cm1kaXJ8cm1vfHJuaXxybnB8cnB8cnNufHJzbnB8cnVqYnxydnxydnBhfHJ3bWl8c2FqYnxzYWx8c2Fwc3xzYXN2fHNicHxzY3xzZWxlY3R8c2V0fHNoY218c2l8c2x8c2xlZXB8c2xzLyxcbiAgL3NvcnR8c3B8c3BqYnxzcHBzfHNwc3Z8c3RhcnR8c3VqYnxzdnxzd21pfHRlZXx0cmNtfHR5cGV8d2hlcmV8d2pifHdyaXRlL1xuXSwgeyBwcmVmaXg6ICcnLCBzdWZmaXg6ICcnIH0pO1xudmFyIHZhcmlhYmxlQnVpbHRpbnMgPSBidWlsZFJlZ2V4cChbXG4gIC9bJD9eX118QXJnc3xDb25maXJtUHJlZmVyZW5jZXxDb25zb2xlRmlsZU5hbWV8RGVidWdQcmVmZXJlbmNlfEVycm9yfEVycm9yQWN0aW9uUHJlZmVyZW5jZXxFcnJvclZpZXd8RXhlY3V0aW9uQ29udGV4dC8sXG4gIC9Gb3JtYXRFbnVtZXJhdGlvbkxpbWl0fEhvbWV8SG9zdHxJbnB1dHxNYXhpbXVtQWxpYXNDb3VudHxNYXhpbXVtRHJpdmVDb3VudHxNYXhpbXVtRXJyb3JDb3VudHxNYXhpbXVtRnVuY3Rpb25Db3VudC8sXG4gIC9NYXhpbXVtSGlzdG9yeUNvdW50fE1heGltdW1WYXJpYWJsZUNvdW50fE15SW52b2NhdGlvbnxOZXN0ZWRQcm9tcHRMZXZlbHxPdXRwdXRFbmNvZGluZ3xQaWR8UHJvZmlsZXxQcm9ncmVzc1ByZWZlcmVuY2UvLFxuICAvUFNCb3VuZFBhcmFtZXRlcnN8UFNDb21tYW5kUGF0aHxQU0N1bHR1cmV8UFNEZWZhdWx0UGFyYW1ldGVyVmFsdWVzfFBTRW1haWxTZXJ2ZXJ8UFNIb21lfFBTU2NyaXB0Um9vdHxQU1Nlc3Npb25BcHBsaWNhdGlvbk5hbWUvLFxuICAvUFNTZXNzaW9uQ29uZmlndXJhdGlvbk5hbWV8UFNTZXNzaW9uT3B0aW9ufFBTVUlDdWx0dXJlfFBTVmVyc2lvblRhYmxlfFB3ZHxTaGVsbElkfFN0YWNrVHJhY2V8VmVyYm9zZVByZWZlcmVuY2UvLFxuICAvV2FybmluZ1ByZWZlcmVuY2V8V2hhdElmUHJlZmVyZW5jZS8sXG5cbiAgL0V2ZW50fEV2ZW50QXJnc3xFdmVudFN1YnNjcmliZXJ8U2VuZGVyLyxcbiAgL01hdGNoZXN8T2ZzfEZvckVhY2h8TGFzdEV4aXRDb2RlfFBTQ21kbGV0fFBTSXRlbXxQU1NlbmRlckluZm98VGhpcy8sXG4gIC90cnVlfGZhbHNlfG51bGwvXG5dLCB7IHByZWZpeDogJ1xcXFwkJywgc3VmZml4OiAnJyB9KTtcblxudmFyIGJ1aWx0aW5zID0gYnVpbGRSZWdleHAoW3N5bWJvbEJ1aWx0aW5zLCBuYW1lZEJ1aWx0aW5zLCB2YXJpYWJsZUJ1aWx0aW5zXSwgeyBzdWZmaXg6IG5vdENoYXJhY3Rlck9yRGFzaCB9KTtcblxudmFyIGdyYW1tYXIgPSB7XG4gIGtleXdvcmQ6IGtleXdvcmRzLFxuICBudW1iZXI6IG51bWJlcnMsXG4gIG9wZXJhdG9yOiBvcGVyYXRvcnMsXG4gIGJ1aWx0aW46IGJ1aWx0aW5zLFxuICBwdW5jdHVhdGlvbjogcHVuY3R1YXRpb24sXG4gIHZhcmlhYmxlOiBpZGVudGlmaWVyc1xufTtcblxuLy8gdG9rZW5pemVyc1xuZnVuY3Rpb24gdG9rZW5CYXNlKHN0cmVhbSwgc3RhdGUpIHtcbiAgLy8gSGFuZGxlIENvbW1lbnRzXG4gIC8vdmFyIGNoID0gc3RyZWFtLnBlZWsoKTtcblxuICB2YXIgcGFyZW50ID0gc3RhdGUucmV0dXJuU3RhY2tbc3RhdGUucmV0dXJuU3RhY2subGVuZ3RoIC0gMV07XG4gIGlmIChwYXJlbnQgJiYgcGFyZW50LnNob3VsZFJldHVybkZyb20oc3RhdGUpKSB7XG4gICAgc3RhdGUudG9rZW5pemUgPSBwYXJlbnQudG9rZW5pemU7XG4gICAgc3RhdGUucmV0dXJuU3RhY2sucG9wKCk7XG4gICAgcmV0dXJuIHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICB9XG5cbiAgaWYgKHN0cmVhbS5lYXRTcGFjZSgpKSB7XG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBpZiAoc3RyZWFtLmVhdCgnKCcpKSB7XG4gICAgc3RhdGUuYnJhY2tldE5lc3RpbmcgKz0gMTtcbiAgICByZXR1cm4gJ3B1bmN0dWF0aW9uJztcbiAgfVxuXG4gIGlmIChzdHJlYW0uZWF0KCcpJykpIHtcbiAgICBzdGF0ZS5icmFja2V0TmVzdGluZyAtPSAxO1xuICAgIHJldHVybiAncHVuY3R1YXRpb24nO1xuICB9XG5cbiAgZm9yICh2YXIga2V5IGluIGdyYW1tYXIpIHtcbiAgICBpZiAoc3RyZWFtLm1hdGNoKGdyYW1tYXJba2V5XSkpIHtcbiAgICAgIHJldHVybiBrZXk7XG4gICAgfVxuICB9XG5cbiAgdmFyIGNoID0gc3RyZWFtLm5leHQoKTtcblxuICAvLyBzaW5nbGUtcXVvdGUgc3RyaW5nXG4gIGlmIChjaCA9PT0gXCInXCIpIHtcbiAgICByZXR1cm4gdG9rZW5TaW5nbGVRdW90ZVN0cmluZyhzdHJlYW0sIHN0YXRlKTtcbiAgfVxuXG4gIGlmIChjaCA9PT0gJyQnKSB7XG4gICAgcmV0dXJuIHRva2VuVmFyaWFibGUoc3RyZWFtLCBzdGF0ZSk7XG4gIH1cblxuICAvLyBkb3VibGUtcXVvdGUgc3RyaW5nXG4gIGlmIChjaCA9PT0gJ1wiJykge1xuICAgIHJldHVybiB0b2tlbkRvdWJsZVF1b3RlU3RyaW5nKHN0cmVhbSwgc3RhdGUpO1xuICB9XG5cbiAgaWYgKGNoID09PSAnPCcgJiYgc3RyZWFtLmVhdCgnIycpKSB7XG4gICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkNvbW1lbnQ7XG4gICAgcmV0dXJuIHRva2VuQ29tbWVudChzdHJlYW0sIHN0YXRlKTtcbiAgfVxuXG4gIGlmIChjaCA9PT0gJyMnKSB7XG4gICAgc3RyZWFtLnNraXBUb0VuZCgpO1xuICAgIHJldHVybiAnY29tbWVudCc7XG4gIH1cblxuICBpZiAoY2ggPT09ICdAJykge1xuICAgIHZhciBxdW90ZU1hdGNoID0gc3RyZWFtLmVhdCgvW1wiJ10vKTtcbiAgICBpZiAocXVvdGVNYXRjaCAmJiBzdHJlYW0uZW9sKCkpIHtcbiAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5NdWx0aVN0cmluZztcbiAgICAgIHN0YXRlLnN0YXJ0UXVvdGUgPSBxdW90ZU1hdGNoWzBdO1xuICAgICAgcmV0dXJuIHRva2VuTXVsdGlTdHJpbmcoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfSBlbHNlIGlmIChzdHJlYW0uZW9sKCkpIHtcbiAgICAgIHJldHVybiAnZXJyb3InO1xuICAgIH0gZWxzZSBpZiAoc3RyZWFtLnBlZWsoKS5tYXRjaCgvWyh7XS8pKSB7XG4gICAgICByZXR1cm4gJ3B1bmN0dWF0aW9uJztcbiAgICB9IGVsc2UgaWYgKHN0cmVhbS5wZWVrKCkubWF0Y2godmFyTmFtZXMpKSB7XG4gICAgICAvLyBzcGxhdHRlZCB2YXJpYWJsZVxuICAgICAgcmV0dXJuIHRva2VuVmFyaWFibGUoc3RyZWFtLCBzdGF0ZSk7XG4gICAgfVxuICB9XG4gIHJldHVybiAnZXJyb3InO1xufVxuXG5mdW5jdGlvbiB0b2tlblNpbmdsZVF1b3RlU3RyaW5nKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIGNoO1xuICB3aGlsZSAoKGNoID0gc3RyZWFtLnBlZWsoKSkgIT0gbnVsbCkge1xuICAgIHN0cmVhbS5uZXh0KCk7XG5cbiAgICBpZiAoY2ggPT09IFwiJ1wiICYmICFzdHJlYW0uZWF0KFwiJ1wiKSkge1xuICAgICAgc3RhdGUudG9rZW5pemUgPSB0b2tlbkJhc2U7XG4gICAgICByZXR1cm4gJ3N0cmluZyc7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuICdlcnJvcic7XG59XG5cbmZ1bmN0aW9uIHRva2VuRG91YmxlUXVvdGVTdHJpbmcoc3RyZWFtLCBzdGF0ZSkge1xuICB2YXIgY2g7XG4gIHdoaWxlICgoY2ggPSBzdHJlYW0ucGVlaygpKSAhPSBudWxsKSB7XG4gICAgaWYgKGNoID09PSAnJCcpIHtcbiAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5TdHJpbmdJbnRlcnBvbGF0aW9uO1xuICAgICAgcmV0dXJuICdzdHJpbmcnO1xuICAgIH1cblxuICAgIHN0cmVhbS5uZXh0KCk7XG4gICAgaWYgKGNoID09PSAnYCcpIHtcbiAgICAgIHN0cmVhbS5uZXh0KCk7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBpZiAoY2ggPT09ICdcIicgJiYgIXN0cmVhbS5lYXQoJ1wiJykpIHtcbiAgICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICAgICAgcmV0dXJuICdzdHJpbmcnO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAnZXJyb3InO1xufVxuXG5mdW5jdGlvbiB0b2tlblN0cmluZ0ludGVycG9sYXRpb24oc3RyZWFtLCBzdGF0ZSkge1xuICByZXR1cm4gdG9rZW5JbnRlcnBvbGF0aW9uKHN0cmVhbSwgc3RhdGUsIHRva2VuRG91YmxlUXVvdGVTdHJpbmcpO1xufVxuXG5mdW5jdGlvbiB0b2tlbk11bHRpU3RyaW5nUmV0dXJuKHN0cmVhbSwgc3RhdGUpIHtcbiAgc3RhdGUudG9rZW5pemUgPSB0b2tlbk11bHRpU3RyaW5nO1xuICBzdGF0ZS5zdGFydFF1b3RlID0gJ1wiJ1xuICByZXR1cm4gdG9rZW5NdWx0aVN0cmluZyhzdHJlYW0sIHN0YXRlKTtcbn1cblxuZnVuY3Rpb24gdG9rZW5IZXJlU3RyaW5nSW50ZXJwb2xhdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gIHJldHVybiB0b2tlbkludGVycG9sYXRpb24oc3RyZWFtLCBzdGF0ZSwgdG9rZW5NdWx0aVN0cmluZ1JldHVybik7XG59XG5cbmZ1bmN0aW9uIHRva2VuSW50ZXJwb2xhdGlvbihzdHJlYW0sIHN0YXRlLCBwYXJlbnRUb2tlbml6ZSkge1xuICBpZiAoc3RyZWFtLm1hdGNoKCckKCcpKSB7XG4gICAgdmFyIHNhdmVkQnJhY2tldE5lc3RpbmcgPSBzdGF0ZS5icmFja2V0TmVzdGluZztcbiAgICBzdGF0ZS5yZXR1cm5TdGFjay5wdXNoKHtcbiAgICAgIC8qanNoaW50IGxvb3BmdW5jOnRydWUgKi9cbiAgICAgIHNob3VsZFJldHVybkZyb206IGZ1bmN0aW9uKHN0YXRlKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZS5icmFja2V0TmVzdGluZyA9PT0gc2F2ZWRCcmFja2V0TmVzdGluZztcbiAgICAgIH0sXG4gICAgICB0b2tlbml6ZTogcGFyZW50VG9rZW5pemVcbiAgICB9KTtcbiAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQmFzZTtcbiAgICBzdGF0ZS5icmFja2V0TmVzdGluZyArPSAxO1xuICAgIHJldHVybiAncHVuY3R1YXRpb24nO1xuICB9IGVsc2Uge1xuICAgIHN0cmVhbS5uZXh0KCk7XG4gICAgc3RhdGUucmV0dXJuU3RhY2sucHVzaCh7XG4gICAgICBzaG91bGRSZXR1cm5Gcm9tOiBmdW5jdGlvbigpIHsgcmV0dXJuIHRydWU7IH0sXG4gICAgICB0b2tlbml6ZTogcGFyZW50VG9rZW5pemVcbiAgICB9KTtcbiAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuVmFyaWFibGU7XG4gICAgcmV0dXJuIHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRva2VuQ29tbWVudChzdHJlYW0sIHN0YXRlKSB7XG4gIHZhciBtYXliZUVuZCA9IGZhbHNlLCBjaDtcbiAgd2hpbGUgKChjaCA9IHN0cmVhbS5uZXh0KCkpICE9IG51bGwpIHtcbiAgICBpZiAobWF5YmVFbmQgJiYgY2ggPT0gJz4nKSB7XG4gICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQmFzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgICBtYXliZUVuZCA9IChjaCA9PT0gJyMnKTtcbiAgfVxuICByZXR1cm4gJ2NvbW1lbnQnO1xufVxuXG5mdW5jdGlvbiB0b2tlblZhcmlhYmxlKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIGNoID0gc3RyZWFtLnBlZWsoKTtcbiAgaWYgKHN0cmVhbS5lYXQoJ3snKSkge1xuICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5WYXJpYWJsZVdpdGhCcmFjZXM7XG4gICAgcmV0dXJuIHRva2VuVmFyaWFibGVXaXRoQnJhY2VzKHN0cmVhbSwgc3RhdGUpO1xuICB9IGVsc2UgaWYgKGNoICE9IHVuZGVmaW5lZCAmJiBjaC5tYXRjaCh2YXJOYW1lcykpIHtcbiAgICBzdHJlYW0uZWF0V2hpbGUodmFyTmFtZXMpO1xuICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICAgIHJldHVybiAndmFyaWFibGUnO1xuICB9IGVsc2Uge1xuICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICAgIHJldHVybiAnZXJyb3InO1xuICB9XG59XG5cbmZ1bmN0aW9uIHRva2VuVmFyaWFibGVXaXRoQnJhY2VzKHN0cmVhbSwgc3RhdGUpIHtcbiAgdmFyIGNoO1xuICB3aGlsZSAoKGNoID0gc3RyZWFtLm5leHQoKSkgIT0gbnVsbCkge1xuICAgIGlmIChjaCA9PT0gJ30nKSB7XG4gICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuQmFzZTtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICByZXR1cm4gJ3ZhcmlhYmxlJztcbn1cblxuZnVuY3Rpb24gdG9rZW5NdWx0aVN0cmluZyhzdHJlYW0sIHN0YXRlKSB7XG4gIHZhciBxdW90ZSA9IHN0YXRlLnN0YXJ0UXVvdGU7XG4gIGlmIChzdHJlYW0uc29sKCkgJiYgc3RyZWFtLm1hdGNoKG5ldyBSZWdFeHAocXVvdGUgKyAnQCcpKSkge1xuICAgIHN0YXRlLnRva2VuaXplID0gdG9rZW5CYXNlO1xuICB9XG4gIGVsc2UgaWYgKHF1b3RlID09PSAnXCInKSB7XG4gICAgd2hpbGUgKCFzdHJlYW0uZW9sKCkpIHtcbiAgICAgIHZhciBjaCA9IHN0cmVhbS5wZWVrKCk7XG4gICAgICBpZiAoY2ggPT09ICckJykge1xuICAgICAgICBzdGF0ZS50b2tlbml6ZSA9IHRva2VuSGVyZVN0cmluZ0ludGVycG9sYXRpb247XG4gICAgICAgIHJldHVybiAnc3RyaW5nJztcbiAgICAgIH1cblxuICAgICAgc3RyZWFtLm5leHQoKTtcbiAgICAgIGlmIChjaCA9PT0gJ2AnKSB7XG4gICAgICAgIHN0cmVhbS5uZXh0KCk7XG4gICAgICB9XG4gICAgfVxuICB9XG4gIGVsc2Uge1xuICAgIHN0cmVhbS5za2lwVG9FbmQoKTtcbiAgfVxuXG4gIHJldHVybiAnc3RyaW5nJztcbn1cblxuZXhwb3J0IGNvbnN0IHBvd2VyU2hlbGwgPSB7XG4gIHN0YXJ0U3RhdGU6IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7XG4gICAgICByZXR1cm5TdGFjazogW10sXG4gICAgICBicmFja2V0TmVzdGluZzogMCxcbiAgICAgIHRva2VuaXplOiB0b2tlbkJhc2VcbiAgICB9O1xuICB9LFxuXG4gIHRva2VuOiBmdW5jdGlvbihzdHJlYW0sIHN0YXRlKSB7XG4gICAgcmV0dXJuIHN0YXRlLnRva2VuaXplKHN0cmVhbSwgc3RhdGUpO1xuICB9LFxuXG4gIGxhbmd1YWdlRGF0YToge1xuICAgIGNvbW1lbnRUb2tlbnM6IHtsaW5lOiBcIiNcIiwgYmxvY2s6IHtvcGVuOiBcIjwjXCIsIGNsb3NlOiBcIiM+XCJ9fVxuICB9XG59O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9
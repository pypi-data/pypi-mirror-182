{% extends "page.html" %}

{% if announcement_login %}
  {% set announcement = announcement_login %}
{% endif %}
{% block script %}
{{  super() }}
<script type="text/javascript">
    document.addEventListener('DOMContentLoaded', function() {
        let button = document.getElementById('eye');
        button.addEventListener("click", function(e) {
            let pwd = document.getElementById("password_input");
            if (pwd.getAttribute("type") === "password") {
                pwd.setAttribute("type", "text");
                button.textContent = "<img src="{{base_url}}static/images/eye-close.svg"/>";
            } else {
                pwd.setAttribute("type", "password");
                button.textContent = "<img src="{{base_url}}static/images/eye.svg"/>";
            }
        });
    });
    // パスワードの表示・非表示切替
    $(".toggle-password").click(function () {
        // iconの切り替え
        $(this).toggleClass("mdi-eye mdi-eye-off");

        // 入力フォームの取得
        let input = $(this).parent().prev("input");
        // type切替
        if (input.attr("type") == "password") {
            input.attr("type", "text");
        } else {
            input.attr("type", "password");
        }
    });

    // if (window.location.protocol === "http:") {
        // unhide http warning
    //     let warning = document.getElementById('insecure-login-warning');
    //     warning.className = warning.className.replace(/\bhidden\b/, '');
    // }
</script>

{% endblock script %}
{% block style %}
<style>
   
</style>
{% endblock style %}
{% block main %}
{% block login %}
<div class="wrapper">
    <div id="login-main" class="container">
        <form action="{{login_url}}?next={{next}}" method="post" role="form" class="form">
            <h1 style={color: #FFFFFF}>Welcome to JijZeptLab</h1>

                {% if login_error %}
                <p class="login_error">
                    {{login_error}}
                </p>
                {% endif %}
                <input id="username_input" type="email" name="username" placeholder="username" val="{{username}}" autocapitalize="off" autocorrect="off" class="form-control" autofocus="autofocus" required />
                <p></p>

                <input id="password_input" type="password" name="password" placeholder="password" val="" autocapitalize="off" autocorrect="off" class="form-control" />

                <span id="password_label" for='password_input' class="password-eye-close">
                    <i toggle="#password-field" class="password-eye-close"></i>
                </span>
 
                {% if two_factor_auth %}
                <label for="2fa_input">2FA code:</label>
                <input id="2fa_input" type="text" autocapitalize="off" autocorrect="off" class="form-control" name="2fa" placeholder="If you don't have 2FA, leave empty" />
                <p></p>
                {% endif %}

                <input type="submit" id="login_submit" class='btn btn-jupyter' value='Sign In' />
            
                <p></p>
                {% if enable_signup %}

                {% endif %}
        </form>
    </div>
    <ul class="bg-bubbles">
        <li class="bg-bubbles-li-1"></li>
        <li class="bg-bubbles-li-2"></li>
        <li class="bg-bubbles-li-3"></li>
        <li class="bg-bubbles-li-4"></li>
        <li class="bg-bubbles-li-5"></li>
        <li class="bg-bubbles-li-6"></li>
        <li class="bg-bubbles-li-7"></li>
        <li class="bg-bubbles-li-8"></li>
        <li class="bg-bubbles-li-9"></li>
        <li class="bg-bubbles-li-10"></li>
    </ul>
</div>

{% endblock login %}
{% endblock main %}
